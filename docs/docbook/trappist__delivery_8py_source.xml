<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_trappist__delivery_8py_source" xml:lang="en-US">
<title>trappist_delivery.py</title>
<indexterm><primary>examples/trappist_delivery.py</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_trappist__delivery_8py_source_1l00001"/><link linkend="_namespaceexamples_1_1trappist__delivery">00001</link> <emphasis role="keyword">import</emphasis>&#32;numpy&#32;<emphasis role="keyword">as</emphasis>&#32;np
<anchor xml:id="_trappist__delivery_8py_source_1l00002"/>00002 <emphasis role="keyword">import</emphasis>&#32;os
<anchor xml:id="_trappist__delivery_8py_source_1l00003"/>00003 <emphasis role="keyword">import</emphasis>&#32;json
<anchor xml:id="_trappist__delivery_8py_source_1l00004"/>00004 <emphasis role="keyword">import</emphasis>&#32;matplotlib.pyplot&#32;<emphasis role="keyword">as</emphasis>&#32;plt
<anchor xml:id="_trappist__delivery_8py_source_1l00005"/>00005 
<anchor xml:id="_trappist__delivery_8py_source_1l00006"/>00006 <emphasis role="keyword">from</emphasis>&#32;scipy.optimize&#32;<emphasis role="keyword">import</emphasis>&#32;Bounds
<anchor xml:id="_trappist__delivery_8py_source_1l00007"/>00007 <emphasis role="keyword">from</emphasis>&#32;fcmaes&#32;<emphasis role="keyword">import</emphasis>&#32;retry
<anchor xml:id="_trappist__delivery_8py_source_1l00008"/>00008 <emphasis role="keyword">from</emphasis>&#32;<link linkend="_namespacefcmaes_1_1optimizer">fcmaes.optimizer</link>&#32;<emphasis role="keyword">import</emphasis>&#32;Bite_cpp,&#32;wrapper,&#32;logger
<anchor xml:id="_trappist__delivery_8py_source_1l00009"/>00009 <emphasis role="keyword">from</emphasis>&#32;<link linkend="_namespacefcmaes_1_1optimizer">fcmaes.optimizer</link>&#32;<emphasis role="keyword">import</emphasis>&#32;Crfmnes_cpp,&#32;Crfmnes,&#32;de_cma,&#32;Bite_cpp,&#32;Cma_cpp,&#32;dtime,&#32;&#32;De_cpp,&#32;random_search,&#32;wrapper
<anchor xml:id="_trappist__delivery_8py_source_1l00010"/>00010 <emphasis role="keyword">import</emphasis>&#32;ctypes&#32;<emphasis role="keyword">as</emphasis>&#32;ct
<anchor xml:id="_trappist__delivery_8py_source_1l00011"/>00011 <emphasis role="keyword">import</emphasis>&#32;multiprocessing&#32;<emphasis role="keyword">as</emphasis>&#32;mp&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00012"/>00012 &#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00013"/>00013 <emphasis role="keyword">import</emphasis>&#32;sys&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00014"/>00014 <emphasis role="keyword">from</emphasis>&#32;loguru&#32;<emphasis role="keyword">import</emphasis>&#32;logger
<anchor xml:id="_trappist__delivery_8py_source_1l00015"/>00015 
<anchor xml:id="_trappist__delivery_8py_source_1l00016"/>00016 logger.remove()
<anchor xml:id="_trappist__delivery_8py_source_1l00017"/><link linkend="_namespaceexamples_1_1trappist__delivery_1ad77004958229e12040ca3f94df74adc9">00017</link> logger.add(sys.stdout,&#32;format=<emphasis role="stringliteral">&quot;{time:HH:mm:ss.SS}&#32;|&#32;{process}&#32;|&#32;{level}&#32;|&#32;{message}&quot;</emphasis>,&#32;level=<emphasis role="stringliteral">&quot;INFO&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00018"/>00018 logger.add(<emphasis role="stringliteral">&quot;log_{time}.txt&quot;</emphasis>,&#32;format=<emphasis role="stringliteral">&quot;{time:HH:mm:ss.SS}&#32;|&#32;{process}&#32;|&#32;{level}&#32;|&#32;{message}&quot;</emphasis>,&#32;level=<emphasis role="stringliteral">&quot;INFO&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00019"/>00019 
<anchor xml:id="_trappist__delivery_8py_source_1l00020"/>00020 <emphasis role="comment">#&#32;see&#32;https://optimize.esa.int/challenge/spoc-delivery-scheduling/About</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00021"/>00021 <emphasis role="comment">#&#32;see&#32;https://optimize.esa.int/challenge/spoc-delivery-scheduling/p/delivery-scheduling</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00022"/>00022 
<anchor xml:id="_trappist__delivery_8py_source_1l00023"/>00023 <emphasis role="comment">#&#32;Tested&#32;using&#32;https://docs.conda.io/en/main/miniconda.html&#32;on&#32;Linux&#32;Mint&#32;21.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00024"/>00024 
<anchor xml:id="_trappist__delivery_8py_source_1l00025"/>00025 <emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00026"/>00026 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;Extends&#32;ESAs&#32;verification&#32;code&#32;for&#32;the&#32;SpOC:&#32;Delivery&#32;Scheduling&#32;competition&#32;held&#32;in&#32;2022.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00027"/>00027 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;Original&#32;code</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00028"/>00028 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;https://api.optimize.esa.int/media/problems/spoc-delivery-scheduling-delivery-scheduling-1649698262955.py</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00029"/>00029 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;is&#32;unmodified.&#32;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00030"/>00030 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;A&#32;second&#32;class&#32;fitness&#32;is&#32;added,&#32;which&#32;removes&#32;redundancies&#32;in&#32;the&#32;decision&#32;variable&#32;vector&#32;reducing</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00031"/>00031 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;dimension&#32;to&#32;352.&#32;Instead&#32;of&#32;only&#32;considering&#32;the&#32;station&#32;with&#32;minimal&#32;resources&#32;it&#32;uses&#32;a&#32;weighted</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00032"/>00032 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;sum&#32;as&#32;fitness&#32;value.&#32;Performance&#32;is&#32;greatly&#32;improved&#32;by&#32;using&#32;https://numba.pydata.org/&#32;enabling&#32;about</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00033"/>00033 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;500000&#32;fitness&#32;evaluations&#32;per&#32;second&#32;on&#32;a&#32;16&#32;core&#32;CPU.&#32;&#32;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00034"/>00034 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;Applies&#32;the&#32;https://github.com/avaneev/biteopt&#32;BiteOpt&#32;algorithm&#32;iteratively&#32;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00035"/>00035 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;using&#32;parallel&#32;restarts.&#32;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00036"/>00036 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00037"/>00037 
<anchor xml:id="_trappist__delivery_8py_source_1l00038"/>00038 <emphasis role="keyword">class&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule">trappist_schedule</link>:
<anchor xml:id="_trappist__delivery_8py_source_1l00039"/>00039 &#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00040"/>00040 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;UDP&#32;(User-Defined&#32;Problem)&#32;for&#32;the&#32;Trappist-1&#32;scheduling&#32;optimisation&#32;problem.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00041"/>00041 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;This&#32;corresponds&#32;to&#32;the&#32;third&#32;challenge&#32;in&#32;SpOC&#32;(Space&#32;Optimisation&#32;Competition)</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00042"/>00042 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;conceived&#32;by&#32;the&#32;ACT&#32;for&#32;the&#32;GECCO&#32;2022&#32;conference.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00043"/>00043 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00044"/>00044 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;The&#32;challenge&#32;involves&#32;optimising&#32;the&#32;schedule&#32;for&#32;delivering&#32;asteroids&#32;to</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00045"/>00045 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;hypothetical&#32;processing&#32;stations&#32;in&#32;a&#32;differnt&#32;orbit&#32;in&#32;the&#32;far&#32;future.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00046"/>00046 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;A&#32;more&#32;detailed&#32;overview&#32;of&#32;the&#32;problem&#32;scenario&#32;and&#32;the&#32;three&#32;challenges&#32;can&#32;be&#32;found&#32;here:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00047"/>00047 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00048"/>00048 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;https://www.esa.int/gsp/ACT/projects/gecco-2022-competition/</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00049"/>00049 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00050"/>00050 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;This&#32;class&#32;conforms&#32;to&#32;the&#32;pygmo&#32;UDP&#32;format.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00051"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule">00051</link> <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00052"/>00052 
<anchor xml:id="_trappist__delivery_8py_source_1l00053"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1ad49fb49a15d50bdf8ffb49a3a452c0d2">00053</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1ad49fb49a15d50bdf8ffb49a3a452c0d2">__init__</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00054"/>00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self,
<anchor xml:id="_trappist__delivery_8py_source_1l00055"/>00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path=os.path.join(<emphasis role="stringliteral">&quot;.&quot;</emphasis>,&#32;<emphasis role="stringliteral">&quot;trappist/candidates.txt&quot;</emphasis>),
<anchor xml:id="_trappist__delivery_8py_source_1l00056"/>00056 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;n_stations=12,
<anchor xml:id="_trappist__delivery_8py_source_1l00057"/>00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;start_time=0.0,
<anchor xml:id="_trappist__delivery_8py_source_1l00058"/>00058 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;end_time=80.0,
<anchor xml:id="_trappist__delivery_8py_source_1l00059"/>00059 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_gap=1.0,
<anchor xml:id="_trappist__delivery_8py_source_1l00060"/>00060 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;materials=(
<anchor xml:id="_trappist__delivery_8py_source_1l00061"/>00061 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;Material&#32;A&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00062"/>00062 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;Material&#32;B&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00063"/>00063 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;Material&#32;C&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00064"/>00064 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;),
<anchor xml:id="_trappist__delivery_8py_source_1l00065"/>00065 &#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00066"/>00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Database&#32;of&#32;asteroid-to-station&#32;visit&#32;opportunities,</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00067"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1acd3f1a1ff38ead0eca14e9a5278c0b8c">00067</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1acd3f1a1ff38ead0eca14e9a5278c0b8c">db</link>&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0a1525e9c7d156cfb215e35b8a7f4fb2">_load</link>(path)
<anchor xml:id="_trappist__delivery_8py_source_1l00068"/>00068 
<anchor xml:id="_trappist__delivery_8py_source_1l00069"/>00069 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Number&#32;of&#32;stations</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00070"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">00070</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;=&#32;n_stations
<anchor xml:id="_trappist__delivery_8py_source_1l00071"/>00071 
<anchor xml:id="_trappist__delivery_8py_source_1l00072"/>00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Number&#32;of&#32;asteroids</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00073"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7859cc61326139c65d5d98d6e6f7e310">00073</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7859cc61326139c65d5d98d6e6f7e310">n_asteroids</link>&#32;=&#32;len(self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1acd3f1a1ff38ead0eca14e9a5278c0b8c">db</link>)
<anchor xml:id="_trappist__delivery_8py_source_1l00074"/>00074 
<anchor xml:id="_trappist__delivery_8py_source_1l00075"/>00075 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;A&#32;flattened&#32;version&#32;of&#32;the&#32;database&#32;with</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00076"/>00076 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;(asteroid&#32;ID,&#32;station&#32;ID,&#32;opportunity&#32;ID)&#32;tuples&#32;as&#32;keys&#32;and</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00077"/>00077 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;(arrival&#32;time,&#32;mass&#32;A,&#32;mass&#32;B,&#32;mass&#32;C)&#32;tuples&#32;as&#32;values.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00078"/>00078 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;This&#32;method&#32;also&#32;computes&#32;the&#32;maximum&#32;number&#32;of&#32;opportunities</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00079"/>00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;in&#32;the&#32;database&#32;(relevant&#32;for&#32;bounds&#32;checks)</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00080"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aa1c9d81854f51cfbd8757f29953bc025">00080</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;(self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aa1c9d81854f51cfbd8757f29953bc025">flat_db</link>,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1afd0ebdc2ee3d7520dcfd6ce163703bdb">max_opportunities</link>)&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1abd8ab5bbb7c6ca032bb1c4574138c8ad">_flatten</link>(self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1acd3f1a1ff38ead0eca14e9a5278c0b8c">db</link>)
<anchor xml:id="_trappist__delivery_8py_source_1l00081"/>00081 
<anchor xml:id="_trappist__delivery_8py_source_1l00082"/>00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;The&#32;start&#32;and&#32;end&#32;times&#32;for&#32;the&#32;whole&#32;problem.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00083"/>00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Units:&#32;days</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00084"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7e81a9b44eba191fd562ad40a04deefa">00084</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7e81a9b44eba191fd562ad40a04deefa">start_time</link>&#32;=&#32;start_time
<anchor xml:id="_trappist__delivery_8py_source_1l00085"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aea3674afcf5be6fad76b85302d039080">00085</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aea3674afcf5be6fad76b85302d039080">end_time</link>&#32;=&#32;end_time
<anchor xml:id="_trappist__delivery_8py_source_1l00086"/>00086 
<anchor xml:id="_trappist__delivery_8py_source_1l00087"/>00087 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Station&#32;gap&#32;(minimum&#32;time&#32;allowed&#32;between&#32;activating&#32;two&#32;consecutive&#32;stations).</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00088"/>00088 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Units:&#32;days</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00089"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a16fd71d9d8f5b3903959487cb92c4a86">00089</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a16fd71d9d8f5b3903959487cb92c4a86">station_gap</link>&#32;=&#32;station_gap
<anchor xml:id="_trappist__delivery_8py_source_1l00090"/>00090 
<anchor xml:id="_trappist__delivery_8py_source_1l00091"/>00091 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;List&#32;of&#32;material&#32;names</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00092"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0292935302f86bb92f7f038317c97be7">00092</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0292935302f86bb92f7f038317c97be7">materials</link>&#32;=&#32;materials
<anchor xml:id="_trappist__delivery_8py_source_1l00093"/>00093 
<anchor xml:id="_trappist__delivery_8py_source_1l00094"/>00094 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a04fa91e6b227d386a9089a2c09350b0c">get_nobj</link>(self):
<anchor xml:id="_trappist__delivery_8py_source_1l00095"/>00095 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00096"/>00096 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;There&#32;is&#32;only&#32;one&#32;objective&#32;for&#32;this&#32;challenge:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00097"/>00097 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;to&#32;maximise&#32;the&#32;minimum&#32;amount&#32;of&#32;material&#32;collected&#32;per&#32;station.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00098"/>00098 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00099"/>00099 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00100"/>00100 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Number&#32;of&#32;objectives.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00101"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a04fa91e6b227d386a9089a2c09350b0c">00101</link> <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00102"/>00102 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;1
<anchor xml:id="_trappist__delivery_8py_source_1l00103"/>00103 
<anchor xml:id="_trappist__delivery_8py_source_1l00104"/>00104 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a8cebe82668c7807b5ca79c14143be75a">get_nix</link>(self):
<anchor xml:id="_trappist__delivery_8py_source_1l00105"/>00105 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00106"/>00106 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Each&#32;assignment&#32;consists&#32;of&#32;a&#32;pair&#32;of&#32;asteroid&#32;ID&#32;and&#32;station&#32;ID,</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00107"/>00107 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;hence&#32;the&#32;total&#32;number&#32;is&#32;2&#32;x&#32;the&#32;number&#32;of&#32;asteroids.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00108"/>00108 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00109"/>00109 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00110"/>00110 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Number&#32;of&#32;integer&#32;components&#32;of&#32;the&#32;chromosome.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00111"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a8cebe82668c7807b5ca79c14143be75a">00111</link> <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00112"/>00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7859cc61326139c65d5d98d6e6f7e310">n_asteroids</link>&#32;*&#32;2
<anchor xml:id="_trappist__delivery_8py_source_1l00113"/>00113 
<anchor xml:id="_trappist__delivery_8py_source_1l00114"/>00114 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a5aa2a411aa8136aa4ff032beeccc4787">get_nec</link>(self):
<anchor xml:id="_trappist__delivery_8py_source_1l00115"/>00115 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00116"/>00116 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;There&#32;are&#32;two&#32;equality&#32;constraints&#32;(cf.&#32;_fitness_impl()&#32;for&#32;details).</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00117"/>00117 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00118"/>00118 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00119"/>00119 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Number&#32;of&#32;equality&#32;constraints.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00120"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a5aa2a411aa8136aa4ff032beeccc4787">00120</link> <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00121"/>00121 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;2
<anchor xml:id="_trappist__delivery_8py_source_1l00122"/>00122 
<anchor xml:id="_trappist__delivery_8py_source_1l00123"/>00123 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a32ca9457b465788d42a6d4238887649c">get_nic</link>(self):
<anchor xml:id="_trappist__delivery_8py_source_1l00124"/>00124 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00125"/>00125 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;There&#32;are&#32;two&#32;equality&#32;constraints</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00126"/>00126 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;(cf.&#32;_fitness_impl()&#32;for&#32;details).</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00127"/>00127 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00128"/>00128 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00129"/>00129 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Number&#32;of&#32;inequality&#32;constraints.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00130"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a32ca9457b465788d42a6d4238887649c">00130</link> <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00131"/>00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;2
<anchor xml:id="_trappist__delivery_8py_source_1l00132"/>00132 
<anchor xml:id="_trappist__delivery_8py_source_1l00133"/>00133 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a05225027bb79bb598408d34eccca3d0f">get_bounds</link>(self):
<anchor xml:id="_trappist__delivery_8py_source_1l00134"/>00134 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00135"/>00135 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Bounds&#32;for&#32;chromosome&#32;elements.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00136"/>00136 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00137"/>00137 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00138"/>00138 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Bounds&#32;for&#32;each&#32;element&#32;in&#32;the&#32;chromosome.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00139"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a05225027bb79bb598408d34eccca3d0f">00139</link> <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00140"/>00140 
<anchor xml:id="_trappist__delivery_8py_source_1l00141"/>00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;lb&#32;=&#32;[self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7e81a9b44eba191fd562ad40a04deefa">start_time</link>]&#32;*&#32;(2&#32;*&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>)
<anchor xml:id="_trappist__delivery_8py_source_1l00142"/>00142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;lb.extend([1,&#32;0,&#32;0]&#32;*&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7859cc61326139c65d5d98d6e6f7e310">n_asteroids</link>)
<anchor xml:id="_trappist__delivery_8py_source_1l00143"/>00143 
<anchor xml:id="_trappist__delivery_8py_source_1l00144"/>00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ub&#32;=&#32;[self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aea3674afcf5be6fad76b85302d039080">end_time</link>]&#32;*&#32;(2&#32;*&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>)
<anchor xml:id="_trappist__delivery_8py_source_1l00145"/>00145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ub.extend(
<anchor xml:id="_trappist__delivery_8py_source_1l00146"/>00146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7859cc61326139c65d5d98d6e6f7e310">n_asteroids</link>,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1afd0ebdc2ee3d7520dcfd6ce163703bdb">max_opportunities</link>]
<anchor xml:id="_trappist__delivery_8py_source_1l00147"/>00147 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;*&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7859cc61326139c65d5d98d6e6f7e310">n_asteroids</link>
<anchor xml:id="_trappist__delivery_8py_source_1l00148"/>00148 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00149"/>00149 
<anchor xml:id="_trappist__delivery_8py_source_1l00150"/>00150 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;(lb,&#32;ub)
<anchor xml:id="_trappist__delivery_8py_source_1l00151"/>00151 
<anchor xml:id="_trappist__delivery_8py_source_1l00152"/>00152 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0a1525e9c7d156cfb215e35b8a7f4fb2">_load</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00153"/>00153 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self,
<anchor xml:id="_trappist__delivery_8py_source_1l00154"/>00154 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path,
<anchor xml:id="_trappist__delivery_8py_source_1l00155"/>00155 &#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00156"/>00156 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00157"/>00157 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00158"/>00158 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Load&#32;the&#32;database&#32;from&#32;an&#32;external&#32;JSON&#32;file.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00159"/>00159 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00160"/>00160 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Args:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00161"/>00161 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path:&#32;The&#32;path&#32;to&#32;the&#32;database&#32;file</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00162"/>00162 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00163"/>00163 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00164"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0a1525e9c7d156cfb215e35b8a7f4fb2">00164</link> <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;The&#32;path&#32;to&#32;the&#32;database&#32;file.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00165"/>00165 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00166"/>00166 
<anchor xml:id="_trappist__delivery_8py_source_1l00167"/>00167 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">with</emphasis>&#32;open(path)&#32;<emphasis role="keyword">as</emphasis>&#32;db:
<anchor xml:id="_trappist__delivery_8py_source_1l00168"/>00168 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;_db&#32;=&#32;json.loads(db.read())
<anchor xml:id="_trappist__delivery_8py_source_1l00169"/>00169 
<anchor xml:id="_trappist__delivery_8py_source_1l00170"/>00170 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;db&#32;=&#32;{}
<anchor xml:id="_trappist__delivery_8py_source_1l00171"/>00171 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;ast_id,&#32;stations&#32;<emphasis role="keywordflow">in</emphasis>&#32;_db.items():
<anchor xml:id="_trappist__delivery_8py_source_1l00172"/>00172 
<anchor xml:id="_trappist__delivery_8py_source_1l00173"/>00173 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;opportunities&#32;=&#32;{}
<anchor xml:id="_trappist__delivery_8py_source_1l00174"/>00174 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;stat_id,&#32;opps&#32;<emphasis role="keywordflow">in</emphasis>&#32;stations.items():
<anchor xml:id="_trappist__delivery_8py_source_1l00175"/>00175 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Convert&#32;the&#32;station&#32;ID&#32;from&#32;str&#32;to&#32;int.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00176"/>00176 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;opportunities[int(stat_id)]&#32;=&#32;list(opps)
<anchor xml:id="_trappist__delivery_8py_source_1l00177"/>00177 
<anchor xml:id="_trappist__delivery_8py_source_1l00178"/>00178 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Convert&#32;the&#32;asteroid&#32;ID&#32;from&#32;str&#32;to&#32;int.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00179"/>00179 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;db[int(ast_id)]&#32;=&#32;opportunities
<anchor xml:id="_trappist__delivery_8py_source_1l00180"/>00180 
<anchor xml:id="_trappist__delivery_8py_source_1l00181"/>00181 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;db
<anchor xml:id="_trappist__delivery_8py_source_1l00182"/>00182 
<anchor xml:id="_trappist__delivery_8py_source_1l00183"/>00183 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1abd8ab5bbb7c6ca032bb1c4574138c8ad">_flatten</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00184"/>00184 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self,
<anchor xml:id="_trappist__delivery_8py_source_1l00185"/>00185 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;db,
<anchor xml:id="_trappist__delivery_8py_source_1l00186"/>00186 &#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00187"/>00187 
<anchor xml:id="_trappist__delivery_8py_source_1l00188"/>00188 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00189"/>00189 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Flatten&#32;the&#32;database.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00190"/>00190 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00191"/>00191 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Args:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00192"/>00192 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;db:&#32;The&#32;database&#32;of&#32;possible&#32;asteroid&#32;/&#32;station&#32;assignment&#32;opportunities.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00193"/>00193 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00194"/>00194 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00195"/>00195 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;A&#32;flat&#32;version&#32;of&#32;the&#32;database&#32;with&#32;(asteroid&#32;ID,&#32;station&#32;ID,&#32;opportunity&#32;ID)</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00196"/>00196 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;tuples&#32;as&#32;keys&#32;and&#32;(arrival&#32;time,&#32;mass&#32;A,&#32;mass&#32;B,&#32;mass&#32;C)&#32;tuples&#32;as&#32;values&#32;and</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00197"/>00197 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;the&#32;maximum&#32;number&#32;of&#32;opportunities&#32;for&#32;any&#32;asteroid&#32;/&#32;station&#32;pair&#32;in&#32;the&#32;database.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00198"/>00198 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00199"/>00199 
<anchor xml:id="_trappist__delivery_8py_source_1l00200"/>00200 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;flat_db&#32;=&#32;{}
<anchor xml:id="_trappist__delivery_8py_source_1l00201"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1abd8ab5bbb7c6ca032bb1c4574138c8ad">00201</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;max_opps&#32;=&#32;0
<anchor xml:id="_trappist__delivery_8py_source_1l00202"/>00202 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;ast_id,&#32;stations&#32;<emphasis role="keywordflow">in</emphasis>&#32;db.items():
<anchor xml:id="_trappist__delivery_8py_source_1l00203"/>00203 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;stat_id,&#32;opps&#32;<emphasis role="keywordflow">in</emphasis>&#32;stations.items():
<anchor xml:id="_trappist__delivery_8py_source_1l00204"/>00204 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;len(opps)&#32;&gt;&#32;max_opps:
<anchor xml:id="_trappist__delivery_8py_source_1l00205"/>00205 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;max_opps&#32;=&#32;len(opps)
<anchor xml:id="_trappist__delivery_8py_source_1l00206"/>00206 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;idx,&#32;opp&#32;<emphasis role="keywordflow">in</emphasis>&#32;enumerate(opps):
<anchor xml:id="_trappist__delivery_8py_source_1l00207"/>00207 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;flat_db[(ast_id,&#32;stat_id,&#32;idx)]&#32;=&#32;opp
<anchor xml:id="_trappist__delivery_8py_source_1l00208"/>00208 
<anchor xml:id="_trappist__delivery_8py_source_1l00209"/>00209 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;(flat_db,&#32;max_opps&#32;-&#32;1)
<anchor xml:id="_trappist__delivery_8py_source_1l00210"/>00210 
<anchor xml:id="_trappist__delivery_8py_source_1l00211"/>00211 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a3e02e116bf308314a6bc6c546960635e">_plot</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00212"/>00212 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self,
<anchor xml:id="_trappist__delivery_8py_source_1l00213"/>00213 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;masses,
<anchor xml:id="_trappist__delivery_8py_source_1l00214"/>00214 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule,
<anchor xml:id="_trappist__delivery_8py_source_1l00215"/>00215 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax=None,
<anchor xml:id="_trappist__delivery_8py_source_1l00216"/>00216 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path=None,
<anchor xml:id="_trappist__delivery_8py_source_1l00217"/>00217 &#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00218"/>00218 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00219"/>00219 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Plot&#32;the&#32;total&#32;material&#32;masses&#32;at&#32;each&#32;station&#32;and</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00220"/>00220 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;the&#32;schedule&#32;vs.&#32;opportunities&#32;for&#32;each&#32;station.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00221"/>00221 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00222"/>00222 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Args:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00223"/>00223 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;masses:&#32;A&#32;2D&#32;array&#32;containing&#32;the&#32;masses&#32;corresponding&#32;to&#32;all&#32;assignment&#32;opportunities.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00224"/>00224 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule:&#32;The&#32;actual&#32;scheduled&#32;asteroid&#32;/&#32;station&#32;assignments&#32;and&#32;their&#32;corresponding&#32;masses.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00225"/>00225 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax:&#32;Plot&#32;axes.&#32;Defaults&#32;to&#32;None.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00226"/>00226 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path:&#32;A&#32;file&#32;to&#32;save&#32;the&#32;plot&#32;to.&#32;Defaults&#32;to&#32;None.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00227"/>00227 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00228"/>00228 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00229"/>00229 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Plot&#32;axes.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00230"/>00230 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00231"/>00231 
<anchor xml:id="_trappist__delivery_8py_source_1l00232"/>00232 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;ax&#32;<emphasis role="keywordflow">is</emphasis>&#32;<emphasis role="keywordtype">None</emphasis>:
<anchor xml:id="_trappist__delivery_8py_source_1l00233"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a3e02e116bf308314a6bc6c546960635e">00233</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fig,&#32;ax&#32;=&#32;plt.subplots(2,&#32;1,&#32;figsize=(12,&#32;18))
<anchor xml:id="_trappist__delivery_8py_source_1l00234"/>00234 
<anchor xml:id="_trappist__delivery_8py_source_1l00235"/>00235 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;(m_ax,&#32;w_ax)&#32;=&#32;ax[0],&#32;ax[1]
<anchor xml:id="_trappist__delivery_8py_source_1l00236"/>00236 
<anchor xml:id="_trappist__delivery_8py_source_1l00237"/>00237 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;==[&#32;Plot&#32;mass&#32;distribution&#32;]==</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00238"/>00238 
<anchor xml:id="_trappist__delivery_8py_source_1l00239"/>00239 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;indices&#32;=&#32;np.arange(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1)
<anchor xml:id="_trappist__delivery_8py_source_1l00240"/>00240 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;bar_width&#32;=&#32;0.2
<anchor xml:id="_trappist__delivery_8py_source_1l00241"/>00241 
<anchor xml:id="_trappist__delivery_8py_source_1l00242"/>00242 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.bar(
<anchor xml:id="_trappist__delivery_8py_source_1l00243"/>00243 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;indices&#32;-&#32;bar_width,
<anchor xml:id="_trappist__delivery_8py_source_1l00244"/>00244 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;masses[:,&#32;0],
<anchor xml:id="_trappist__delivery_8py_source_1l00245"/>00245 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;bar_width,
<anchor xml:id="_trappist__delivery_8py_source_1l00246"/>00246 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;color=<emphasis role="stringliteral">&quot;r&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00247"/>00247 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;label=<emphasis role="stringliteral">&quot;Material&#32;A&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00248"/>00248 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00249"/>00249 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.bar(
<anchor xml:id="_trappist__delivery_8py_source_1l00250"/>00250 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;indices,
<anchor xml:id="_trappist__delivery_8py_source_1l00251"/>00251 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;masses[:,&#32;1],
<anchor xml:id="_trappist__delivery_8py_source_1l00252"/>00252 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;bar_width,
<anchor xml:id="_trappist__delivery_8py_source_1l00253"/>00253 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;color=<emphasis role="stringliteral">&quot;g&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00254"/>00254 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;label=<emphasis role="stringliteral">&quot;Material&#32;B&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00255"/>00255 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00256"/>00256 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.bar(
<anchor xml:id="_trappist__delivery_8py_source_1l00257"/>00257 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;indices&#32;+&#32;bar_width,
<anchor xml:id="_trappist__delivery_8py_source_1l00258"/>00258 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;masses[:,&#32;2],
<anchor xml:id="_trappist__delivery_8py_source_1l00259"/>00259 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;bar_width,
<anchor xml:id="_trappist__delivery_8py_source_1l00260"/>00260 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;color=<emphasis role="stringliteral">&quot;b&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00261"/>00261 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;label=<emphasis role="stringliteral">&quot;Material&#32;C&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00262"/>00262 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00263"/>00263 
<anchor xml:id="_trappist__delivery_8py_source_1l00264"/>00264 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;==[&#32;Plot&#32;minimum&#32;masses&#32;for&#32;each&#32;material]==</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00265"/>00265 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;min_masses&#32;=&#32;masses.min(axis=0)
<anchor xml:id="_trappist__delivery_8py_source_1l00266"/>00266 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.plot(
<anchor xml:id="_trappist__delivery_8py_source_1l00267"/>00267 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[0,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1],
<anchor xml:id="_trappist__delivery_8py_source_1l00268"/>00268 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[min_masses[0],&#32;min_masses[0]],
<anchor xml:id="_trappist__delivery_8py_source_1l00269"/>00269 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;r--&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00270"/>00270 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;label=f<emphasis role="stringliteral">&quot;Minimum&#32;mass&#32;of&#32;{self.materials[0]}&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00271"/>00271 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00272"/>00272 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.plot(
<anchor xml:id="_trappist__delivery_8py_source_1l00273"/>00273 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[0,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1],
<anchor xml:id="_trappist__delivery_8py_source_1l00274"/>00274 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[min_masses[1],&#32;min_masses[1]],
<anchor xml:id="_trappist__delivery_8py_source_1l00275"/>00275 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;g--&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00276"/>00276 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;label=f<emphasis role="stringliteral">&quot;Minimum&#32;mass&#32;of&#32;{self.materials[1]}&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00277"/>00277 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00278"/>00278 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.plot(
<anchor xml:id="_trappist__delivery_8py_source_1l00279"/>00279 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[0,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1],
<anchor xml:id="_trappist__delivery_8py_source_1l00280"/>00280 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[min_masses[2],&#32;min_masses[2]],
<anchor xml:id="_trappist__delivery_8py_source_1l00281"/>00281 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;b--&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00282"/>00282 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;label=f<emphasis role="stringliteral">&quot;Minimum&#32;mass&#32;of&#32;{self.materials[2]}&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00283"/>00283 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00284"/>00284 
<anchor xml:id="_trappist__delivery_8py_source_1l00285"/>00285 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.set_xlim((0.4,&#32;12.6))
<anchor xml:id="_trappist__delivery_8py_source_1l00286"/>00286 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.set_ylim((0.4,&#32;masses.max()&#32;+&#32;4))
<anchor xml:id="_trappist__delivery_8py_source_1l00287"/>00287 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.set_xticks(list(range(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1)))
<anchor xml:id="_trappist__delivery_8py_source_1l00288"/>00288 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.set_xticklabels(list(range(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1)))
<anchor xml:id="_trappist__delivery_8py_source_1l00289"/>00289 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.set_xlabel(<emphasis role="stringliteral">&quot;Station&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00290"/>00290 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.set_ylabel(<emphasis role="stringliteral">&quot;Material&#32;masses&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00291"/>00291 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;m_ax.legend()
<anchor xml:id="_trappist__delivery_8py_source_1l00292"/>00292 
<anchor xml:id="_trappist__delivery_8py_source_1l00293"/>00293 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;==[&#32;Plot&#32;schedule&#32;]==</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00294"/>00294 
<anchor xml:id="_trappist__delivery_8py_source_1l00295"/>00295 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Plot&#32;all&#32;opportunities</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00296"/>00296 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;stat_id,&#32;data&#32;<emphasis role="keywordflow">in</emphasis>&#32;schedule.items():
<anchor xml:id="_trappist__delivery_8py_source_1l00297"/>00297 
<anchor xml:id="_trappist__delivery_8py_source_1l00298"/>00298 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;len(data)&#32;==&#32;0:
<anchor xml:id="_trappist__delivery_8py_source_1l00299"/>00299 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">continue</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00300"/>00300 
<anchor xml:id="_trappist__delivery_8py_source_1l00301"/>00301 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;opportunities,&#32;atimes,&#32;window&#32;=&#32;(
<anchor xml:id="_trappist__delivery_8py_source_1l00302"/>00302 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;data[<emphasis role="stringliteral">&quot;opportunities&quot;</emphasis>],
<anchor xml:id="_trappist__delivery_8py_source_1l00303"/>00303 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;data[<emphasis role="stringliteral">&quot;assignments&quot;</emphasis>],
<anchor xml:id="_trappist__delivery_8py_source_1l00304"/>00304 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;data[<emphasis role="stringliteral">&quot;window&quot;</emphasis>],
<anchor xml:id="_trappist__delivery_8py_source_1l00305"/>00305 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00306"/>00306 
<anchor xml:id="_trappist__delivery_8py_source_1l00307"/>00307 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Opportunities</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00308"/>00308 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.plot(
<anchor xml:id="_trappist__delivery_8py_source_1l00309"/>00309 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;opportunities,
<anchor xml:id="_trappist__delivery_8py_source_1l00310"/>00310 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;np.ones((len(opportunities),))&#32;*&#32;stat_id,
<anchor xml:id="_trappist__delivery_8py_source_1l00311"/>00311 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;r.&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00312"/>00312 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ms=1,
<anchor xml:id="_trappist__delivery_8py_source_1l00313"/>00313 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;label=<emphasis role="stringliteral">&quot;Opportunities&quot;</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;stat_id&#32;==&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordtype">None</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00314"/>00314 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00315"/>00315 
<anchor xml:id="_trappist__delivery_8py_source_1l00316"/>00316 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Arrival&#32;times</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00317"/>00317 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.plot(
<anchor xml:id="_trappist__delivery_8py_source_1l00318"/>00318 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;atimes,
<anchor xml:id="_trappist__delivery_8py_source_1l00319"/>00319 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;np.ones((len(atimes),))&#32;*&#32;stat_id,
<anchor xml:id="_trappist__delivery_8py_source_1l00320"/>00320 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;c|&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00321"/>00321 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ms=6,
<anchor xml:id="_trappist__delivery_8py_source_1l00322"/>00322 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;label=<emphasis role="stringliteral">&quot;Assignments&quot;</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;stat_id&#32;==&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordtype">None</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00323"/>00323 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00324"/>00324 
<anchor xml:id="_trappist__delivery_8py_source_1l00325"/>00325 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Window</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00326"/>00326 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.plot(
<anchor xml:id="_trappist__delivery_8py_source_1l00327"/>00327 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[window[0],&#32;window[0]],
<anchor xml:id="_trappist__delivery_8py_source_1l00328"/>00328 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>],
<anchor xml:id="_trappist__delivery_8py_source_1l00329"/>00329 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;--&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00330"/>00330 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;color=<emphasis role="stringliteral">&quot;lightgray&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00331"/>00331 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;lw=0.5,
<anchor xml:id="_trappist__delivery_8py_source_1l00332"/>00332 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00333"/>00333 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.plot(
<anchor xml:id="_trappist__delivery_8py_source_1l00334"/>00334 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[window[1],&#32;window[1]],
<anchor xml:id="_trappist__delivery_8py_source_1l00335"/>00335 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>],
<anchor xml:id="_trappist__delivery_8py_source_1l00336"/>00336 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;--&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00337"/>00337 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;color=<emphasis role="stringliteral">&quot;darkgray&quot;</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00338"/>00338 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;lw=0.5,
<anchor xml:id="_trappist__delivery_8py_source_1l00339"/>00339 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00340"/>00340 
<anchor xml:id="_trappist__delivery_8py_source_1l00341"/>00341 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.plot([self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7e81a9b44eba191fd562ad40a04deefa">start_time</link>,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7e81a9b44eba191fd562ad40a04deefa">start_time</link>],&#32;[1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>],&#32;<emphasis role="stringliteral">&quot;k-&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00342"/>00342 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.plot([self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aea3674afcf5be6fad76b85302d039080">end_time</link>,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aea3674afcf5be6fad76b85302d039080">end_time</link>],&#32;[1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>],&#32;<emphasis role="stringliteral">&quot;k-&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00343"/>00343 
<anchor xml:id="_trappist__delivery_8py_source_1l00344"/>00344 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.set_xlabel(<emphasis role="stringliteral">&quot;Time&#32;[days]&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00345"/>00345 
<anchor xml:id="_trappist__delivery_8py_source_1l00346"/>00346 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.set_yticks(list(range(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1)))
<anchor xml:id="_trappist__delivery_8py_source_1l00347"/>00347 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.set_yticklabels(list(range(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1)))
<anchor xml:id="_trappist__delivery_8py_source_1l00348"/>00348 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.set_ylabel(<emphasis role="stringliteral">&quot;Station&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00349"/>00349 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.set_ylim((0,&#32;14))
<anchor xml:id="_trappist__delivery_8py_source_1l00350"/>00350 
<anchor xml:id="_trappist__delivery_8py_source_1l00351"/>00351 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w_ax.legend(loc=1)
<anchor xml:id="_trappist__delivery_8py_source_1l00352"/>00352 
<anchor xml:id="_trappist__delivery_8py_source_1l00353"/>00353 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;path&#32;<emphasis role="keywordflow">is</emphasis>&#32;<emphasis role="keywordflow">not</emphasis>&#32;<emphasis role="keywordtype">None</emphasis>:
<anchor xml:id="_trappist__delivery_8py_source_1l00354"/>00354 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fig.savefig(path,&#32;dpi=100)
<anchor xml:id="_trappist__delivery_8py_source_1l00355"/>00355 
<anchor xml:id="_trappist__delivery_8py_source_1l00356"/>00356 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;ax
<anchor xml:id="_trappist__delivery_8py_source_1l00357"/>00357 
<anchor xml:id="_trappist__delivery_8py_source_1l00358"/>00358 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0d67cf1ecfbbfa31991d2998be8d6586">_fitness_impl</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00359"/>00359 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self,
<anchor xml:id="_trappist__delivery_8py_source_1l00360"/>00360 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x,
<anchor xml:id="_trappist__delivery_8py_source_1l00361"/>00361 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;logging=False,
<anchor xml:id="_trappist__delivery_8py_source_1l00362"/>00362 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;plotting=False,
<anchor xml:id="_trappist__delivery_8py_source_1l00363"/>00363 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax=None,
<anchor xml:id="_trappist__delivery_8py_source_1l00364"/>00364 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path=None,
<anchor xml:id="_trappist__delivery_8py_source_1l00365"/>00365 &#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00366"/>00366 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00367"/>00367 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Computes&#32;the&#32;constraints&#32;and&#32;the&#32;fitness&#32;of&#32;the&#32;provided&#32;chromosome.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00368"/>00368 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00369"/>00369 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;1.&#32;Equality&#32;constraints:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00370"/>00370 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00371"/>00371 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;1.1.&#32;Asteroid&#32;IDs:&#32;all&#32;asteroids&#32;in&#32;the&#32;database&#32;must&#32;be&#32;present&#32;in&#32;the&#32;chromosome.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00372"/>00372 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;1.2.&#32;Opportunity&#32;IDs:&#32;all&#32;opportunity&#32;IDs&#32;in&#32;the&#32;chromosome&#32;must&#32;correspond&#32;to&#32;opportunities&#32;in&#32;the&#32;database.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00373"/>00373 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00374"/>00374 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;2.&#32;Inequality&#32;constraints:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00375"/>00375 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00376"/>00376 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;2.1.&#32;Station&#32;gaps:&#32;all&#32;station&#32;gaps&#32;must&#32;be&#32;greater&#32;than&#32;a&#32;minimal&#32;time&#32;period&#32;(self.station_gap)</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00377"/>00377 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;2.2.&#32;Arrival&#32;times:&#32;all&#32;asteroid&#32;arrival&#32;times&#32;must&#32;be&#32;between&#32;the&#32;start&#32;and&#32;end&#32;times&#32;of&#32;the&#32;corresponding&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00378"/>00378 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00379"/>00379 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;3.&#32;Fitness:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00380"/>00380 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00381"/>00381 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;3.1&#32;Iterate&#32;over&#32;the&#32;chromosome&#32;and&#32;add&#32;the&#32;masses&#32;of&#32;the&#32;materials&#32;for&#32;all&#32;assigned&#32;asteroids&#32;with&#32;valid&#32;transfers</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00382"/>00382 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;3.2&#32;Find&#32;the&#32;minimum&#32;mass&#32;of&#32;each&#32;material&#32;per&#32;station.&#32;This&#32;is&#32;the&#32;final&#32;fitness.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00383"/>00383 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00384"/>00384 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Args:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00385"/>00385 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x:&#32;A&#32;list&#32;of&#32;integers&#32;and&#32;floats&#32;in&#32;the&#32;following&#32;format:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00386"/>00386 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Station&#32;start&#32;and&#32;end&#32;times&#32;(2&#32;x&#32;self.n_stations)</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00387"/>00387 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;The&#32;following&#32;items&#32;for&#32;all&#32;selected&#32;asteroids&#32;(3&#32;x&#32;self.n_asteroids&#32;integers&#32;in&#32;total):</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00388"/>00388 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Asteroid&#32;ID</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00389"/>00389 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Station&#32;ID</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00390"/>00390 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Opportunity&#32;ID</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00391"/>00391 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00392"/>00392 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;NOTE:&#32;The&#32;triplets&#32;do&#32;not&#32;have&#32;to&#32;be&#32;ordered&#32;by&#32;asteroid&#32;ID.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00393"/>00393 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00394"/>00394 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;logging:&#32;Logging&#32;switch.&#32;Defaults&#32;to&#32;False.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00395"/>00395 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;plotting:&#32;Plotting&#32;switch.&#32;Defaults&#32;to&#32;False.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00396"/>00396 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax:&#32;Plot&#32;axes.&#32;Defaults&#32;to&#32;None.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00397"/>00397 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path:&#32;File&#32;path&#32;for&#32;saving&#32;the&#32;plots.&#32;Defaults&#32;to&#32;None.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00398"/>00398 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00399"/>00399 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00400"/>00400 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;A&#32;tuple&#32;containing:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00401"/>00401 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;The&#32;fitness</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00402"/>00402 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;A&#32;list&#32;of&#32;equality&#32;constraints</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00403"/>00403 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;A&#32;list&#32;of&#32;inequality&#32;constraints</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00404"/>00404 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Plot&#32;axes</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00405"/>00405 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00406"/>00406 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00407"/>00407 
<anchor xml:id="_trappist__delivery_8py_source_1l00408"/>00408 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;eq_constraints&#32;=&#32;[]
<anchor xml:id="_trappist__delivery_8py_source_1l00409"/>00409 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ineq_constraints&#32;=&#32;[]
<anchor xml:id="_trappist__delivery_8py_source_1l00410"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0d67cf1ecfbbfa31991d2998be8d6586">00410</link> 
<anchor xml:id="_trappist__delivery_8py_source_1l00411"/>00411 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Offset&#32;representing&#32;the&#32;time&#32;windows&#32;for&#32;stations&#32;(for&#32;convenience&#32;only)</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00412"/>00412 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_times_offset&#32;=&#32;2&#32;*&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>
<anchor xml:id="_trappist__delivery_8py_source_1l00413"/>00413 
<anchor xml:id="_trappist__delivery_8py_source_1l00414"/>00414 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Extract&#32;a&#32;set&#32;of&#32;tuples&#32;of&#32;all&#32;the&#32;selections&#32;as&#32;tuples</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00415"/>00415 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;asteroid_ids&#32;=&#32;[int(a_id)&#32;<emphasis role="keywordflow">for</emphasis>&#32;a_id&#32;<emphasis role="keywordflow">in</emphasis>&#32;x[station_times_offset::3]]
<anchor xml:id="_trappist__delivery_8py_source_1l00416"/>00416 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_ids&#32;=&#32;[int(s_id)&#32;<emphasis role="keywordflow">for</emphasis>&#32;s_id&#32;<emphasis role="keywordflow">in</emphasis>&#32;x[(station_times_offset&#32;+&#32;1)&#32;::&#32;3]]
<anchor xml:id="_trappist__delivery_8py_source_1l00417"/>00417 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;assignments&#32;=&#32;[
<anchor xml:id="_trappist__delivery_8py_source_1l00418"/>00418 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;int(assignment&#32;-&#32;1)&#32;<emphasis role="keywordflow">for</emphasis>&#32;assignment&#32;<emphasis role="keywordflow">in</emphasis>&#32;x[(station_times_offset&#32;+&#32;2)&#32;::&#32;3]
<anchor xml:id="_trappist__delivery_8py_source_1l00419"/>00419 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;]
<anchor xml:id="_trappist__delivery_8py_source_1l00420"/>00420 
<anchor xml:id="_trappist__delivery_8py_source_1l00421"/>00421 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;triplets&#32;=&#32;tuple(zip(asteroid_ids,&#32;station_ids,&#32;assignments))
<anchor xml:id="_trappist__delivery_8py_source_1l00422"/>00422 
<anchor xml:id="_trappist__delivery_8py_source_1l00423"/>00423 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Extract&#32;the&#32;start&#32;and&#32;end&#32;times&#32;for&#32;all&#32;stations&#32;from&#32;the&#32;chromosome</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00424"/>00424 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_times&#32;=&#32;x[:station_times_offset]
<anchor xml:id="_trappist__delivery_8py_source_1l00425"/>00425 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_start_times&#32;=&#32;station_times[0&#32;:&#32;len(station_times)&#32;:&#32;2]
<anchor xml:id="_trappist__delivery_8py_source_1l00426"/>00426 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_end_times&#32;=&#32;station_times[1&#32;:&#32;len(station_times)&#32;:&#32;2]
<anchor xml:id="_trappist__delivery_8py_source_1l00427"/>00427 
<anchor xml:id="_trappist__delivery_8py_source_1l00428"/>00428 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00429"/>00429 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;1.&#32;Equality&#32;constraints.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00430"/>00430 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00431"/>00431 
<anchor xml:id="_trappist__delivery_8py_source_1l00432"/>00432 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;==[&#32;1.1&#32;Check&#32;asteroid&#32;IDs&#32;]==</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00433"/>00433 
<anchor xml:id="_trappist__delivery_8py_source_1l00434"/>00434 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;asteroid_id_violations&#32;=&#32;set(asteroid_ids).symmetric_difference(
<anchor xml:id="_trappist__delivery_8py_source_1l00435"/>00435 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;set(self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1acd3f1a1ff38ead0eca14e9a5278c0b8c">db</link>.keys())
<anchor xml:id="_trappist__delivery_8py_source_1l00436"/>00436 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00437"/>00437 
<anchor xml:id="_trappist__delivery_8py_source_1l00438"/>00438 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;eq_constraints.append(len(asteroid_id_violations))
<anchor xml:id="_trappist__delivery_8py_source_1l00439"/>00439 
<anchor xml:id="_trappist__delivery_8py_source_1l00440"/>00440 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;==[&#32;1.2.&#32;Check&#32;opportunities&#32;]==</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00441"/>00441 
<anchor xml:id="_trappist__delivery_8py_source_1l00442"/>00442 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Check&#32;the&#32;opportunity&#32;IDs&#32;&#32;for&#32;asteroid&#32;/&#32;station&#32;assignments</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00443"/>00443 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;where&#32;the&#32;station&#32;ID&#32;is&#32;*not*&#32;0&#32;(i.e.,&#32;the&#32;asteroid&#32;has</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00444"/>00444 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;been&#32;activated&#32;and&#32;selected&#32;for&#32;transfer&#32;to&#32;a&#32;valid&#32;station).</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00445"/>00445 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;opportunity_id_violations&#32;=&#32;[
<anchor xml:id="_trappist__delivery_8py_source_1l00446"/>00446 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;triplet
<anchor xml:id="_trappist__delivery_8py_source_1l00447"/>00447 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;triplet&#32;<emphasis role="keywordflow">in</emphasis>&#32;triplets
<anchor xml:id="_trappist__delivery_8py_source_1l00448"/>00448 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;triplet&#32;<emphasis role="keywordflow">not</emphasis>&#32;<emphasis role="keywordflow">in</emphasis>&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aa1c9d81854f51cfbd8757f29953bc025">flat_db</link>&#32;<emphasis role="keywordflow">and</emphasis>&#32;triplet[1]&#32;&gt;&#32;0
<anchor xml:id="_trappist__delivery_8py_source_1l00449"/>00449 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;]
<anchor xml:id="_trappist__delivery_8py_source_1l00450"/>00450 
<anchor xml:id="_trappist__delivery_8py_source_1l00451"/>00451 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;eq_constraints.append(len(opportunity_id_violations))
<anchor xml:id="_trappist__delivery_8py_source_1l00452"/>00452 
<anchor xml:id="_trappist__delivery_8py_source_1l00453"/>00453 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00454"/>00454 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;2.&#32;Inequality&#32;constraints.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00455"/>00455 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00456"/>00456 
<anchor xml:id="_trappist__delivery_8py_source_1l00457"/>00457 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;First&#32;we&#32;sort&#32;and&#32;index&#32;station&#32;activation&#32;windows.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00458"/>00458 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;We&#32;produce&#32;a&#32;list&#32;where&#32;each&#32;entry&#32;has&#32;the&#32;following&#32;format:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00459"/>00459 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00460"/>00460 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;[idx,&#32;[start,&#32;end]]</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00461"/>00461 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00462"/>00462 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;where</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00463"/>00463 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;-&#32;idx:&#32;index&#32;in&#32;the&#32;*original*&#32;chromosome&#32;(=&#32;station&#32;ID)</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00464"/>00464 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;-&#32;(start,&#32;end):&#32;start&#32;and&#32;end&#32;times&#32;for&#32;visiting&#32;the&#32;corresponding&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00465"/>00465 
<anchor xml:id="_trappist__delivery_8py_source_1l00466"/>00466 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_windows&#32;=&#32;zip(station_start_times,&#32;station_end_times)
<anchor xml:id="_trappist__delivery_8py_source_1l00467"/>00467 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;sorted_indexed_windows&#32;=&#32;sorted(
<anchor xml:id="_trappist__delivery_8py_source_1l00468"/>00468 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;enumerate(station_windows,&#32;1),&#32;key=<emphasis role="keyword">lambda</emphasis>&#32;i:&#32;i[1]
<anchor xml:id="_trappist__delivery_8py_source_1l00469"/>00469 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00470"/>00470 
<anchor xml:id="_trappist__delivery_8py_source_1l00471"/>00471 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;==[&#32;2.1.&#32;Check&#32;station&#32;gaps&#32;]==</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00472"/>00472 
<anchor xml:id="_trappist__delivery_8py_source_1l00473"/>00473 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Compute&#32;the&#32;gaps&#32;between&#32;stations&#32;from&#32;the&#32;sorted&#32;array&#32;of&#32;station&#32;windows</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00474"/>00474 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;gaps&#32;=&#32;[
<anchor xml:id="_trappist__delivery_8py_source_1l00475"/>00475 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s2[1][0]&#32;-&#32;s1[1][1]
<anchor xml:id="_trappist__delivery_8py_source_1l00476"/>00476 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;s1,&#32;s2&#32;<emphasis role="keywordflow">in</emphasis>&#32;zip(sorted_indexed_windows[:-1],&#32;sorted_indexed_windows[1:])
<anchor xml:id="_trappist__delivery_8py_source_1l00477"/>00477 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;]
<anchor xml:id="_trappist__delivery_8py_source_1l00478"/>00478 
<anchor xml:id="_trappist__delivery_8py_source_1l00479"/>00479 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;gap_violations&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a16fd71d9d8f5b3903959487cb92c4a86">station_gap</link>&#32;-&#32;np.array(gaps,&#32;dtype=np.float32)
<anchor xml:id="_trappist__delivery_8py_source_1l00480"/>00480 
<anchor xml:id="_trappist__delivery_8py_source_1l00481"/>00481 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ineq_constraints.append(max(gap_violations))
<anchor xml:id="_trappist__delivery_8py_source_1l00482"/>00482 
<anchor xml:id="_trappist__delivery_8py_source_1l00483"/>00483 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;==[&#32;2.2.&#32;Arrival&#32;times&#32;]==</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00484"/>00484 
<anchor xml:id="_trappist__delivery_8py_source_1l00485"/>00485 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Collect&#32;all&#32;asteroid&#32;&#32;&#32;times&#32;for&#32;each&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00486"/>00486 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_start_times&#32;=&#32;[]
<anchor xml:id="_trappist__delivery_8py_source_1l00487"/>00487 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_end_times&#32;=&#32;[]
<anchor xml:id="_trappist__delivery_8py_source_1l00488"/>00488 
<anchor xml:id="_trappist__delivery_8py_source_1l00489"/>00489 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;s_id&#32;<emphasis role="keywordflow">in</emphasis>&#32;station_ids:
<anchor xml:id="_trappist__delivery_8py_source_1l00490"/>00490 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;s_id&#32;==&#32;0:
<anchor xml:id="_trappist__delivery_8py_source_1l00491"/>00491 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Trick&#32;to&#32;make&#32;sure&#32;that&#32;unassigned&#32;asteroids&#32;don&apos;t&#32;trigger</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00492"/>00492 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;and&#32;inequality&#32;constraint&#32;violation</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00493"/>00493 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_start_times.append(-1.0)
<anchor xml:id="_trappist__delivery_8py_source_1l00494"/>00494 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_end_times.append(self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aea3674afcf5be6fad76b85302d039080">end_time</link>&#32;+&#32;1.0)
<anchor xml:id="_trappist__delivery_8py_source_1l00495"/>00495 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>:
<anchor xml:id="_trappist__delivery_8py_source_1l00496"/>00496 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_start_times.append(station_start_times[s_id&#32;-&#32;1])
<anchor xml:id="_trappist__delivery_8py_source_1l00497"/>00497 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_end_times.append(station_end_times[s_id&#32;-&#32;1])
<anchor xml:id="_trappist__delivery_8py_source_1l00498"/>00498 
<anchor xml:id="_trappist__delivery_8py_source_1l00499"/>00499 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Find&#32;any&#32;instances&#32;where&#32;the&#32;arrival&#32;time&#32;is&#32;before&#32;the&#32;start&#32;time&#32;or</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00500"/>00500 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;after&#32;the&#32;end&#32;time&#32;of&#32;the&#32;corresponding&#32;station&apos;s&#32;window.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00501"/>00501 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;arrival_times&#32;=&#32;np.array(
<anchor xml:id="_trappist__delivery_8py_source_1l00502"/>00502 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[
<anchor xml:id="_trappist__delivery_8py_source_1l00503"/>00503 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aa1c9d81854f51cfbd8757f29953bc025">flat_db</link>[triplet][0]
<anchor xml:id="_trappist__delivery_8py_source_1l00504"/>00504 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;triplet&#32;<emphasis role="keywordflow">in</emphasis>&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aa1c9d81854f51cfbd8757f29953bc025">flat_db</link>
<anchor xml:id="_trappist__delivery_8py_source_1l00505"/>00505 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>&#32;(self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aea3674afcf5be6fad76b85302d039080">end_time</link>&#32;-&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7e81a9b44eba191fd562ad40a04deefa">start_time</link>)&#32;/&#32;2
<anchor xml:id="_trappist__delivery_8py_source_1l00506"/>00506 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;triplet&#32;<emphasis role="keywordflow">in</emphasis>&#32;triplets
<anchor xml:id="_trappist__delivery_8py_source_1l00507"/>00507 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;],
<anchor xml:id="_trappist__delivery_8py_source_1l00508"/>00508 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;dtype=np.float32,
<anchor xml:id="_trappist__delivery_8py_source_1l00509"/>00509 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00510"/>00510 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_start_times&#32;=&#32;np.array(
<anchor xml:id="_trappist__delivery_8py_source_1l00511"/>00511 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_start_times,&#32;dtype=np.float32
<anchor xml:id="_trappist__delivery_8py_source_1l00512"/>00512 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00513"/>00513 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_end_times&#32;=&#32;np.array(station_window_end_times,&#32;dtype=np.float32)
<anchor xml:id="_trappist__delivery_8py_source_1l00514"/>00514 
<anchor xml:id="_trappist__delivery_8py_source_1l00515"/>00515 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Find&#32;instances&#32;where&#32;the&#32;arrival&#32;times&#32;are&#32;earier&#32;than&#32;the</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00516"/>00516 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;start&#32;time&#32;for&#32;the&#32;corresponding&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00517"/>00517 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;arrival_time_violations&#32;=&#32;np.where(
<anchor xml:id="_trappist__delivery_8py_source_1l00518"/>00518 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;arrival_times&#32;-&#32;station_window_start_times&#32;&lt;&#32;0.0,&#32;1,&#32;0
<anchor xml:id="_trappist__delivery_8py_source_1l00519"/>00519 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00520"/>00520 
<anchor xml:id="_trappist__delivery_8py_source_1l00521"/>00521 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Add&#32;to&#32;those&#32;any&#32;instances&#32;where&#32;the&#32;arrival&#32;times&#32;are&#32;later&#32;than&#32;the</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00522"/>00522 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;end&#32;time&#32;for&#32;the&#32;corresponding&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00523"/>00523 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;arrival_time_violations&#32;+=&#32;np.where(
<anchor xml:id="_trappist__delivery_8py_source_1l00524"/>00524 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_window_end_times&#32;-&#32;arrival_times&#32;&lt;&#32;0.0,&#32;1,&#32;0
<anchor xml:id="_trappist__delivery_8py_source_1l00525"/>00525 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00526"/>00526 
<anchor xml:id="_trappist__delivery_8py_source_1l00527"/>00527 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Find&#32;any&#32;violations&#32;(1s&#32;indicate&#32;a&#32;violation&#32;in&#32;either&#32;start&#32;time&#32;or&#32;end&#32;time)</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00528"/>00528 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;arrival_time_violations&#32;=&#32;np.where(arrival_time_violations&#32;&gt;&#32;0,&#32;1,&#32;0)
<anchor xml:id="_trappist__delivery_8py_source_1l00529"/>00529 
<anchor xml:id="_trappist__delivery_8py_source_1l00530"/>00530 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ineq_constraints.append(arrival_time_violations.sum())
<anchor xml:id="_trappist__delivery_8py_source_1l00531"/>00531 
<anchor xml:id="_trappist__delivery_8py_source_1l00532"/>00532 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00533"/>00533 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;3.&#32;Fitness</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00534"/>00534 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00535"/>00535 
<anchor xml:id="_trappist__delivery_8py_source_1l00536"/>00536 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Compute&#32;the&#32;masses&#32;of&#32;all&#32;materials&#32;accumulated&#32;at&#32;each&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00537"/>00537 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;masses_per_station&#32;=&#32;{
<anchor xml:id="_trappist__delivery_8py_source_1l00538"/>00538 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_id:&#32;np.array([0.0,&#32;0.0,&#32;0.0],&#32;dtype=np.float32)
<anchor xml:id="_trappist__delivery_8py_source_1l00539"/>00539 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;s_id&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1)
<anchor xml:id="_trappist__delivery_8py_source_1l00540"/>00540 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_trappist__delivery_8py_source_1l00541"/>00541 
<anchor xml:id="_trappist__delivery_8py_source_1l00542"/>00542 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(triplet,&#32;violation)&#32;<emphasis role="keywordflow">in</emphasis>&#32;zip(
<anchor xml:id="_trappist__delivery_8py_source_1l00543"/>00543 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;triplets,&#32;arrival_time_violations.astype(bool).tolist()
<anchor xml:id="_trappist__delivery_8py_source_1l00544"/>00544 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00545"/>00545 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;If&#32;the&#32;asteroid&#32;is&#32;assigned&#32;to&#32;a&#32;valid&#32;station&#32;and</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00546"/>00546 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;its&#32;arrival&#32;time&#32;is&#32;within&#32;bounds...</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00547"/>00547 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;triplet[1]&#32;&gt;&#32;0&#32;<emphasis role="keywordflow">and</emphasis>&#32;<emphasis role="keywordflow">not</emphasis>&#32;violation:
<anchor xml:id="_trappist__delivery_8py_source_1l00548"/>00548 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Add&#32;the&#32;material&#32;masses&#32;to&#32;the&#32;stations</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00549"/>00549 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;masses_per_station[triplet[1]]&#32;+=&#32;np.array(
<anchor xml:id="_trappist__delivery_8py_source_1l00550"/>00550 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aa1c9d81854f51cfbd8757f29953bc025">flat_db</link>[triplet][1:],
<anchor xml:id="_trappist__delivery_8py_source_1l00551"/>00551 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;dtype=np.float32,
<anchor xml:id="_trappist__delivery_8py_source_1l00552"/>00552 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00553"/>00553 
<anchor xml:id="_trappist__delivery_8py_source_1l00554"/>00554 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Collect&#32;all&#32;the&#32;masses&#32;per&#32;station&#32;into&#32;a&#32;single&#32;2D&#32;array&#32;that&#32;is&#32;easy&#32;to&#32;manipulate</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00555"/>00555 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;masses&#32;=&#32;np.array(
<anchor xml:id="_trappist__delivery_8py_source_1l00556"/>00556 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[masses_per_station[s]&#32;<emphasis role="keywordflow">for</emphasis>&#32;s&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1)]
<anchor xml:id="_trappist__delivery_8py_source_1l00557"/>00557 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00558"/>00558 
<anchor xml:id="_trappist__delivery_8py_source_1l00559"/>00559 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Final&#32;fitness&#32;computation.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00560"/>00560 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;The&#32;objective&#32;is&#32;to&#32;maximise&#32;the&#32;minimum&#32;mass</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00561"/>00561 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;of&#32;any&#32;material&#32;across&#32;all&#32;stations.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00562"/>00562 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fitness&#32;=&#32;-masses.min()
<anchor xml:id="_trappist__delivery_8py_source_1l00563"/>00563 
<anchor xml:id="_trappist__delivery_8py_source_1l00564"/>00564 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;logging:
<anchor xml:id="_trappist__delivery_8py_source_1l00565"/>00565 
<anchor xml:id="_trappist__delivery_8py_source_1l00566"/>00566 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(
<anchor xml:id="_trappist__delivery_8py_source_1l00567"/>00567 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;f<emphasis role="stringliteral">&quot;==[&#32;Invalid&#32;asteroid&#32;IDs:&#32;{eq_constraints[0]}&#32;out&#32;of&#32;{len(self.db)}&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00568"/>00568 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00569"/>00569 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(f<emphasis role="stringliteral">&quot;==[&#32;Invalid&#32;arrival&#32;times:&#32;{eq_constraints[1]}&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00570"/>00570 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(f<emphasis role="stringliteral">&quot;==[&#32;Minimal&#32;inter-station&#32;gap:&#32;{min(gaps):&lt;2.4}&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00571"/>00571 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(f<emphasis role="stringliteral">&quot;==[&#32;Invalid&#32;assignments:&#32;{ineq_constraints[1]}&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00572"/>00572 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(f<emphasis role="stringliteral">&quot;==[&#32;Masses&#32;per&#32;station:&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00573"/>00573 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(
<anchor xml:id="_trappist__delivery_8py_source_1l00574"/>00574 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;f<emphasis role="stringliteral">&quot;{&apos;Station&#32;ID&apos;:&gt;12}&#32;{self.materials[0]:&gt;12}&#32;{self.materials[1]:&gt;12}&#32;{self.materials[2]:&gt;12}&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00575"/>00575 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00576"/>00576 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;stat_id,&#32;mass_dist&#32;<emphasis role="keywordflow">in</emphasis>&#32;masses_per_station.items():
<anchor xml:id="_trappist__delivery_8py_source_1l00577"/>00577 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(
<anchor xml:id="_trappist__delivery_8py_source_1l00578"/>00578 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;f<emphasis role="stringliteral">&quot;{stat_id:&gt;12}&#32;{mass_dist[0]:&gt;12.6f}&#32;{mass_dist[1]:&gt;12.6f}&#32;{mass_dist[2]:&gt;12.6f}&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00579"/>00579 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00580"/>00580 
<anchor xml:id="_trappist__delivery_8py_source_1l00581"/>00581 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;idx,&#32;item&#32;<emphasis role="keywordflow">in</emphasis>&#32;enumerate(gap_violations):
<anchor xml:id="_trappist__delivery_8py_source_1l00582"/>00582 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;item&#32;&gt;&#32;0:
<anchor xml:id="_trappist__delivery_8py_source_1l00583"/>00583 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Get&#32;the&#32;station&#32;IDs&#32;in&#32;the&#32;original&#32;chromosome</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00584"/>00584 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_1_id&#32;=&#32;sorted_indexed_windows[idx][0]
<anchor xml:id="_trappist__delivery_8py_source_1l00585"/>00585 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station_2_id&#32;=&#32;sorted_indexed_windows[idx&#32;+&#32;1][0]
<anchor xml:id="_trappist__delivery_8py_source_1l00586"/>00586 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;gap&#32;=&#32;gaps[idx]
<anchor xml:id="_trappist__delivery_8py_source_1l00587"/>00587 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;gap&#32;&lt;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a16fd71d9d8f5b3903959487cb92c4a86">station_gap</link>:
<anchor xml:id="_trappist__delivery_8py_source_1l00588"/>00588 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(
<anchor xml:id="_trappist__delivery_8py_source_1l00589"/>00589 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;f<emphasis role="stringliteral">&quot;==[\tThe&#32;gap&#32;between&#32;stations&#32;{station_1_id}&#32;and&#32;{station_2_id}&#32;is&#32;{gap:3.3f}&#32;(should&#32;be&#32;&gt;=&#32;{self.station_gap:3.3f}).&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00590"/>00590 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00591"/>00591 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>:
<anchor xml:id="_trappist__delivery_8py_source_1l00592"/>00592 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(
<anchor xml:id="_trappist__delivery_8py_source_1l00593"/>00593 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;f<emphasis role="stringliteral">&quot;==[\tThe&#32;windows&#32;for&#32;stations&#32;{station_1_id}&#32;and&#32;{station_2_id}&#32;overlap&#32;by&#32;{-gap:3.3f}&#32;days.&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00594"/>00594 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00595"/>00595 
<anchor xml:id="_trappist__delivery_8py_source_1l00596"/>00596 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(f<emphasis role="stringliteral">&quot;==[&#32;Total&#32;fitness:&#32;{fitness}&quot;</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00597"/>00597 
<anchor xml:id="_trappist__delivery_8py_source_1l00598"/>00598 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Plotting</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00599"/>00599 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;plotting:
<anchor xml:id="_trappist__delivery_8py_source_1l00600"/>00600 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule&#32;=&#32;{
<anchor xml:id="_trappist__delivery_8py_source_1l00601"/>00601 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_id:&#32;{
<anchor xml:id="_trappist__delivery_8py_source_1l00602"/>00602 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;opportunities&quot;</emphasis>:&#32;[],
<anchor xml:id="_trappist__delivery_8py_source_1l00603"/>00603 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;assignments&quot;</emphasis>:&#32;[],
<anchor xml:id="_trappist__delivery_8py_source_1l00604"/>00604 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;window&quot;</emphasis>:&#32;[],
<anchor xml:id="_trappist__delivery_8py_source_1l00605"/>00605 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_trappist__delivery_8py_source_1l00606"/>00606 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;s_id&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1)
<anchor xml:id="_trappist__delivery_8py_source_1l00607"/>00607 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_trappist__delivery_8py_source_1l00608"/>00608 
<anchor xml:id="_trappist__delivery_8py_source_1l00609"/>00609 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(_,&#32;s_id,&#32;_),&#32;val&#32;<emphasis role="keywordflow">in</emphasis>&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aa1c9d81854f51cfbd8757f29953bc025">flat_db</link>.items():
<anchor xml:id="_trappist__delivery_8py_source_1l00610"/>00610 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule[s_id][<emphasis role="stringliteral">&quot;opportunities&quot;</emphasis>].append(val[0])
<anchor xml:id="_trappist__delivery_8py_source_1l00611"/>00611 
<anchor xml:id="_trappist__delivery_8py_source_1l00612"/>00612 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;triplet&#32;<emphasis role="keywordflow">in</emphasis>&#32;triplets:
<anchor xml:id="_trappist__delivery_8py_source_1l00613"/>00613 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;triplet[1]&#32;&gt;&#32;0:
<anchor xml:id="_trappist__delivery_8py_source_1l00614"/>00614 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule[triplet[1]][<emphasis role="stringliteral">&quot;assignments&quot;</emphasis>].append(self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aa1c9d81854f51cfbd8757f29953bc025">flat_db</link>[triplet][0])
<anchor xml:id="_trappist__delivery_8py_source_1l00615"/>00615 
<anchor xml:id="_trappist__delivery_8py_source_1l00616"/>00616 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;s_id,&#32;window&#32;<emphasis role="keywordflow">in</emphasis>&#32;sorted_indexed_windows:
<anchor xml:id="_trappist__delivery_8py_source_1l00617"/>00617 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;s_id&#32;&gt;&#32;0:
<anchor xml:id="_trappist__delivery_8py_source_1l00618"/>00618 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule[s_id][<emphasis role="stringliteral">&quot;window&quot;</emphasis>]&#32;=&#32;window
<anchor xml:id="_trappist__delivery_8py_source_1l00619"/>00619 
<anchor xml:id="_trappist__delivery_8py_source_1l00620"/>00620 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a3e02e116bf308314a6bc6c546960635e">_plot</link>(masses,&#32;schedule,&#32;ax=ax,&#32;path=path)
<anchor xml:id="_trappist__delivery_8py_source_1l00621"/>00621 
<anchor xml:id="_trappist__delivery_8py_source_1l00622"/>00622 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;(fitness,&#32;eq_constraints,&#32;ineq_constraints,&#32;ax)
<anchor xml:id="_trappist__delivery_8py_source_1l00623"/>00623 
<anchor xml:id="_trappist__delivery_8py_source_1l00624"/>00624 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1abfacff9519a7926d3958aa192c6aa54c">fitness</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00625"/>00625 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self,
<anchor xml:id="_trappist__delivery_8py_source_1l00626"/>00626 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x,
<anchor xml:id="_trappist__delivery_8py_source_1l00627"/>00627 &#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00628"/>00628 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00629"/>00629 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;A&#32;wrapper&#32;for&#32;the&#32;fitness&#32;function&#32;(called&#32;for&#32;evaluation&#32;only).</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00630"/>00630 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00631"/>00631 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;####################&#32;IMPORTANT&#32;######################</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00632"/>00632 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;The&#32;chromosome&#32;has&#32;the&#32;following&#32;format:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00633"/>00633 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00634"/>00634 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Start&#32;and&#32;end&#32;times&#32;for&#32;each&#32;station,&#32;*in&#32;order&#32;of&#32;Station&#32;ID*</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00635"/>00635 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Asteroid&#32;/&#32;station&#32;assignments&#32;with&#32;the&#32;corresponding&#32;arrival&#32;times.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00636"/>00636 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00637"/>00637 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Format:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00638"/>00638 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;[</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00639"/>00639 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Station&#32;1&#32;start&#32;time,&#32;Station&#32;1&#32;end&#32;time,&#32;&#32;&#32;|</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00640"/>00640 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Station&#32;2&#32;start&#32;time,&#32;Station&#32;2&#32;end&#32;time,&#32;&#32;&#32;|</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00641"/>00641 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;...&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;|&#32;2&#32;x&#32;number&#32;of&#32;stations</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00642"/>00642 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Station&#32;11&#32;start&#32;time,&#32;Station&#32;11&#32;end&#32;time,&#32;|</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00643"/>00643 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Station&#32;12&#32;start&#32;time,&#32;Station&#32;12&#32;end&#32;time,&#32;|</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00644"/>00644 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Asteroid&#32;ID,&#32;Station&#32;ID,&#32;Opportunity&#32;ID,&#32;|</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00645"/>00645 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Asteroid&#32;ID,&#32;Station&#32;ID,&#32;Opportunity&#32;ID,&#32;|</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00646"/>00646 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;...&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;|&#32;number&#32;of&#32;asteroids</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00647"/>00647 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Asteroid&#32;ID,&#32;Station&#32;ID,&#32;Opportunity&#32;ID,&#32;|</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00648"/>00648 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Asteroid&#32;ID,&#32;Station&#32;ID,&#32;Opportunity&#32;ID&#32;&#32;|</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00649"/>00649 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;]</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00650"/>00650 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00651"/>00651 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;All&#32;IDs&#32;(for&#32;asteroids,&#32;stations&#32;and&#32;opportunities)&#32;are&#32;1-based.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00652"/>00652 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;This&#32;is&#32;particularly&#32;relevant&#32;for&#32;the&#32;opportunity&#32;IDs</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00653"/>00653 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;since&#32;they&#32;are&#32;converted&#32;to&#32;0-based&#32;indices&#32;in&#32;the&#32;fitness</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00654"/>00654 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;evaluation&#32;function&#32;by&#32;subtracting&#32;1.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00655"/>00655 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00656"/>00656 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Stations&#32;must&#32;be&#32;activated&#32;*sequentially*&#32;(*not*&#32;in&#32;parallel)&#32;but&#32;not&#32;necessarily&#32;in&#32;order&#32;of&#32;their&#32;ID.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00657"/>00657 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00658"/>00658 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;There&#32;must&#32;be&#32;a&#32;minimal&#32;gap&#32;(called&#32;&apos;station&#32;gap&apos;)&#32;between&#32;the&#32;end&#32;time&#32;of&#32;one&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00659"/>00659 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;and&#32;the&#32;start&#32;time&#32;of&#32;the&#32;next.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00660"/>00660 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00661"/>00661 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Every&#32;asteroid&#32;must&#32;be&#32;either&#32;asigned&#32;to&#32;a&#32;station&#32;or&#32;unassigned.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00662"/>00662 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00663"/>00663 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;The&#32;asteroid&#32;/&#32;station&#32;assignments&#32;do&#32;not&#32;have&#32;to&#32;be&#32;&#32;in&#32;any&#32;particular&#32;order,</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00664"/>00664 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;but&#32;all&#32;asteroid&#32;IDs&#32;must&#32;appear&#32;in&#32;the&#32;chromosome,&#32;even&#32;if&#32;some&#32;asteroids&#32;are&#32;unassigned.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00665"/>00665 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00666"/>00666 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Assigned&#32;asteroids&#32;must&#32;have&#32;corresponding&#32;Station&#32;IDs&#32;between&#32;1&#32;and&#32;the&#32;number&#32;of&#32;stations.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00667"/>00667 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Unassigned&#32;asteroids&#32;must&#32;have&#32;a&#32;Station&#32;ID&#32;0.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00668"/>00668 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00669"/>00669 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;######################################################</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00670"/>00670 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00671"/>00671 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Args:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00672"/>00672 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x:&#32;A&#32;chromosome&#32;in&#32;the&#32;format&#32;specified&#32;above.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00673"/>00673 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00674"/>00674 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00675"/>00675 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;A&#32;tuple&#32;containing&#32;the&#32;fitness&#32;followed&#32;by&#32;the&#32;equality&#32;and&#32;inequality&#32;constraints.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00676"/>00676 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00677"/>00677 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00678"/>00678 
<anchor xml:id="_trappist__delivery_8py_source_1l00679"/>00679 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;(fitness,&#32;eq_constraints,&#32;ineq_constraints,&#32;ax)&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0d67cf1ecfbbfa31991d2998be8d6586">_fitness_impl</link>(x)
<anchor xml:id="_trappist__delivery_8py_source_1l00680"/>00680 
<anchor xml:id="_trappist__delivery_8py_source_1l00681"/>00681 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;(fitness,&#32;*eq_constraints,&#32;*ineq_constraints)
<anchor xml:id="_trappist__delivery_8py_source_1l00682"/>00682 
<anchor xml:id="_trappist__delivery_8py_source_1l00683"/>00683 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a8c08f4da8537abdfb6a83dd7682eb2ae">pretty</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00684"/>00684 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self,
<anchor xml:id="_trappist__delivery_8py_source_1l00685"/>00685 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x,
<anchor xml:id="_trappist__delivery_8py_source_1l00686"/>00686 &#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00687"/>00687 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00688"/>00688 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Fitness&#32;evaluation&#32;function&#32;with&#32;pretty&#32;printing.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00689"/>00689 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00690"/>00690 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Args:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00691"/>00691 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x:&#32;A&#32;chromosome.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00692"/>00692 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00693"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1abfacff9519a7926d3958aa192c6aa54c">00693</link> 
<anchor xml:id="_trappist__delivery_8py_source_1l00694"/>00694 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;(_,&#32;_,&#32;_,&#32;ax)&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0d67cf1ecfbbfa31991d2998be8d6586">_fitness_impl</link>(x,&#32;logging=<emphasis role="keyword">True</emphasis>)
<anchor xml:id="_trappist__delivery_8py_source_1l00695"/>00695 
<anchor xml:id="_trappist__delivery_8py_source_1l00696"/>00696 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aab08205267f0350357c54fad4df63b8c">plot</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00697"/>00697 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self,
<anchor xml:id="_trappist__delivery_8py_source_1l00698"/>00698 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x,
<anchor xml:id="_trappist__delivery_8py_source_1l00699"/>00699 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax=None,
<anchor xml:id="_trappist__delivery_8py_source_1l00700"/>00700 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path=None,
<anchor xml:id="_trappist__delivery_8py_source_1l00701"/>00701 &#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00702"/>00702 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00703"/>00703 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Plot&#32;the&#32;total&#32;material&#32;masses&#32;accumulated&#32;at&#32;each&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00704"/>00704 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;and&#32;the&#32;asteroid&#32;/&#32;station&#32;assignments.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00705"/>00705 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00706"/>00706 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Args:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00707"/>00707 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x:&#32;A&#32;chromosome.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00708"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a8c08f4da8537abdfb6a83dd7682eb2ae">00708</link> <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax:&#32;Plot&#32;axes.&#32;Defaults&#32;to&#32;None.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00709"/>00709 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path:&#32;A&#32;file&#32;to&#32;save&#32;the&#32;plot&#32;to.&#32;Defaults&#32;to&#32;None.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00710"/>00710 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00711"/>00711 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00712"/>00712 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Plot&#32;axes.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00713"/>00713 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00714"/>00714 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;(_,&#32;_,&#32;_,&#32;ax)&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a0d67cf1ecfbbfa31991d2998be8d6586">_fitness_impl</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00715"/>00715 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x,
<anchor xml:id="_trappist__delivery_8py_source_1l00716"/>00716 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;logging=<emphasis role="keyword">False</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00717"/>00717 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;plotting=<emphasis role="keyword">True</emphasis>,
<anchor xml:id="_trappist__delivery_8py_source_1l00718"/>00718 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax=ax,
<anchor xml:id="_trappist__delivery_8py_source_1l00719"/>00719 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;path=path,
<anchor xml:id="_trappist__delivery_8py_source_1l00720"/>00720 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00721"/>00721 
<anchor xml:id="_trappist__delivery_8py_source_1l00722"/>00722 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;ax
<anchor xml:id="_trappist__delivery_8py_source_1l00723"/>00723 
<anchor xml:id="_trappist__delivery_8py_source_1l00724"/>00724 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a4508d8053f18fb3f3d5449f360ca1abc">example</link>(self):
<anchor xml:id="_trappist__delivery_8py_source_1l00725"/>00725 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00726"/>00726 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;An&#32;example&#32;method&#32;returning&#32;a&#32;minimal&#32;chromosome&#32;that&#32;assigns</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00727"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1aab08205267f0350357c54fad4df63b8c">00727</link> <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;a&#32;single&#32;asteroid&#32;to&#32;each&#32;station.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00728"/>00728 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00729"/>00729 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00730"/>00730 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;A&#32;valid&#32;chromosome.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00731"/>00731 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00732"/>00732 
<anchor xml:id="_trappist__delivery_8py_source_1l00733"/>00733 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;assignments&#32;=&#32;{}
<anchor xml:id="_trappist__delivery_8py_source_1l00734"/>00734 
<anchor xml:id="_trappist__delivery_8py_source_1l00735"/>00735 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Iterate&#32;over&#32;a&#32;random&#32;permutation&#32;of&#32;asteroid&#32;IDs</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00736"/>00736 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;ast_id&#32;<emphasis role="keywordflow">in</emphasis>&#32;list(self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1acd3f1a1ff38ead0eca14e9a5278c0b8c">db</link>.keys()):
<anchor xml:id="_trappist__delivery_8py_source_1l00737"/>00737 
<anchor xml:id="_trappist__delivery_8py_source_1l00738"/>00738 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;len(assignments)&#32;==&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>:
<anchor xml:id="_trappist__delivery_8py_source_1l00739"/>00739 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00740"/>00740 
<anchor xml:id="_trappist__delivery_8py_source_1l00741"/>00741 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Create&#32;a&#32;set&#32;of&#32;station&#32;IDs.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00742"/>00742 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stations&#32;=&#32;set(self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1acd3f1a1ff38ead0eca14e9a5278c0b8c">db</link>[ast_id].keys()).difference(set(assignments.keys()))
<anchor xml:id="_trappist__delivery_8py_source_1l00743"/>00743 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;len(stations)&#32;&gt;&#32;0:
<anchor xml:id="_trappist__delivery_8py_source_1l00744"/>00744 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stat_id&#32;=&#32;stations.pop()
<anchor xml:id="_trappist__delivery_8py_source_1l00745"/>00745 
<anchor xml:id="_trappist__delivery_8py_source_1l00746"/>00746 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Check&#32;if&#32;the&#32;asteroid&#32;/&#32;station&#32;pair</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00747"/>00747 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;is&#32;already&#32;assigned.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00748"/>00748 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;stat_id&#32;<emphasis role="keywordflow">in</emphasis>&#32;assignments:
<anchor xml:id="_trappist__delivery_8py_source_1l00749"/>00749 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00750"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a4508d8053f18fb3f3d5449f360ca1abc">00750</link> 
<anchor xml:id="_trappist__delivery_8py_source_1l00751"/>00751 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;opps&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1acd3f1a1ff38ead0eca14e9a5278c0b8c">db</link>[ast_id][stat_id]
<anchor xml:id="_trappist__delivery_8py_source_1l00752"/>00752 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Check&#32;if&#32;there&#32;are&#32;any&#32;opportunities</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00753"/>00753 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;opp_idx,&#32;opp&#32;<emphasis role="keywordflow">in</emphasis>&#32;enumerate(opps,&#32;1):
<anchor xml:id="_trappist__delivery_8py_source_1l00754"/>00754 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Check&#32;if&#32;the&#32;arrival&#32;time&#32;of&#32;the&#32;opportunity&#32;conflicts&#32;with</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00755"/>00755 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;the&#32;assigned&#32;asteroid&#32;/&#32;station&#32;build&#32;times</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00756"/>00756 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;conflict&#32;=&#32;<emphasis role="keyword">False</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00757"/>00757 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;_,&#32;vals&#32;<emphasis role="keywordflow">in</emphasis>&#32;assignments.items():
<anchor xml:id="_trappist__delivery_8py_source_1l00758"/>00758 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;ast_id&#32;==&#32;vals[0]&#32;<emphasis role="keywordflow">or</emphasis>&#32;(vals[2]&#32;-&#32;2&#32;*&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a16fd71d9d8f5b3903959487cb92c4a86">station_gap</link>)&#32;&lt;=&#32;opp[
<anchor xml:id="_trappist__delivery_8py_source_1l00759"/>00759 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0
<anchor xml:id="_trappist__delivery_8py_source_1l00760"/>00760 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;]&#32;&lt;=&#32;(vals[3]&#32;+&#32;2&#32;*&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a16fd71d9d8f5b3903959487cb92c4a86">station_gap</link>):
<anchor xml:id="_trappist__delivery_8py_source_1l00761"/>00761 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;conflict&#32;=&#32;<emphasis role="keyword">True</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00762"/>00762 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00763"/>00763 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;<emphasis role="keywordflow">not</emphasis>&#32;conflict:
<anchor xml:id="_trappist__delivery_8py_source_1l00764"/>00764 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;assignments[stat_id]&#32;=&#32;[
<anchor xml:id="_trappist__delivery_8py_source_1l00765"/>00765 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ast_id,
<anchor xml:id="_trappist__delivery_8py_source_1l00766"/>00766 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;opp_idx,
<anchor xml:id="_trappist__delivery_8py_source_1l00767"/>00767 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;opp[0]&#32;-&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a16fd71d9d8f5b3903959487cb92c4a86">station_gap</link>,
<anchor xml:id="_trappist__delivery_8py_source_1l00768"/>00768 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;opp[0]&#32;+&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a16fd71d9d8f5b3903959487cb92c4a86">station_gap</link>,
<anchor xml:id="_trappist__delivery_8py_source_1l00769"/>00769 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;]
<anchor xml:id="_trappist__delivery_8py_source_1l00770"/>00770 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stations&#32;=&#32;set()
<anchor xml:id="_trappist__delivery_8py_source_1l00771"/>00771 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00772"/>00772 
<anchor xml:id="_trappist__delivery_8py_source_1l00773"/>00773 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Build&#32;the&#32;chromosome</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00774"/>00774 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;windows&#32;=&#32;[]
<anchor xml:id="_trappist__delivery_8py_source_1l00775"/>00775 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule&#32;=&#32;[]
<anchor xml:id="_trappist__delivery_8py_source_1l00776"/>00776 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;stat_id&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>&#32;+&#32;1):
<anchor xml:id="_trappist__delivery_8py_source_1l00777"/>00777 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Station&#32;start&#32;time</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00778"/>00778 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;windows.append(assignments[stat_id][2])
<anchor xml:id="_trappist__delivery_8py_source_1l00779"/>00779 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Station&#32;end&#32;time</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00780"/>00780 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;windows.append(assignments[stat_id][3])
<anchor xml:id="_trappist__delivery_8py_source_1l00781"/>00781 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Asteroid&#32;/&#32;station&#32;assignment</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00782"/>00782 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule.extend([assignments[stat_id][0],&#32;stat_id,&#32;assignments[stat_id][1]])
<anchor xml:id="_trappist__delivery_8py_source_1l00783"/>00783 
<anchor xml:id="_trappist__delivery_8py_source_1l00784"/>00784 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Stitch&#32;the&#32;windows&#32;and&#32;schedule&#32;together&#32;and&#32;create</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00785"/>00785 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;a&#32;complete&#32;chromosome&#32;from&#32;this&#32;partial&#32;solution.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00786"/>00786 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chromosome&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a6927de26658a5e34a9e952cd94179327">convert_to_chromosome</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00787"/>00787 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;np.concatenate((np.array(windows),&#32;np.array(schedule)))
<anchor xml:id="_trappist__delivery_8py_source_1l00788"/>00788 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00789"/>00789 
<anchor xml:id="_trappist__delivery_8py_source_1l00790"/>00790 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;chromosome
<anchor xml:id="_trappist__delivery_8py_source_1l00791"/>00791 
<anchor xml:id="_trappist__delivery_8py_source_1l00792"/>00792 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a6927de26658a5e34a9e952cd94179327">convert_to_chromosome</link>(
<anchor xml:id="_trappist__delivery_8py_source_1l00793"/>00793 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self,
<anchor xml:id="_trappist__delivery_8py_source_1l00794"/>00794 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x,
<anchor xml:id="_trappist__delivery_8py_source_1l00795"/>00795 &#32;&#32;&#32;&#32;):
<anchor xml:id="_trappist__delivery_8py_source_1l00796"/>00796 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00797"/>00797 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Creates&#32;a&#32;valid&#32;chromosome&#32;from&#32;an&#32;incomplete&#32;one.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00798"/>00798 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00799"/>00799 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Here,&#32;&apos;incomplete&apos;&#32;means&#32;that&#32;all&#32;station&#32;windows&#32;are&#32;provided</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00800"/>00800 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;but&#32;only&#32;some&#32;asteroids&#32;are&#32;assigned.&#32;This&#32;method&#32;completes&#32;the</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00801"/>00801 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;chromosome&#32;by&#32;assigning&#32;the&#32;missing&#32;asteroids&#32;to&#32;station&#32;0,&#32;which</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00802"/>00802 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;means&#32;that&#32;those&#32;asteroids&#32;will&#32;not&#32;be&#32;considered&#32;in&#32;the&#32;fitness&#32;evaluation.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00803"/>00803 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00804"/>00804 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Args:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00805"/>00805 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x:&#32;Incomplete&#32;chromosome.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00806"/>00806 <emphasis role="stringliteral"></emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00807"/>00807 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Returns:</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00808"/>00808 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;Complete&#32;chromosome.</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00809"/>00809 <emphasis role="stringliteral">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&quot;&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00810"/>00810 
<anchor xml:id="_trappist__delivery_8py_source_1l00811"/>00811 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;len(x)&#32;&lt;&#32;2&#32;*&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a18395f11e6c81aa516e2ec4bef41db1b">n_stations</link>:
<anchor xml:id="_trappist__delivery_8py_source_1l00812"/>00812 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">raise</emphasis>&#32;ValueError(
<anchor xml:id="_trappist__delivery_8py_source_1l00813"/>00813 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;The&#32;chromosome&#32;must&#32;contain&#32;at&#32;least&#32;the&#32;start&#32;and&#32;end&#32;times&#32;for&#32;the&#32;station&#32;windows.&quot;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00814"/>00814 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00815"/>00815 
<anchor xml:id="_trappist__delivery_8py_source_1l00816"/>00816 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;assignments&#32;=&#32;list(x[24:])
<anchor xml:id="_trappist__delivery_8py_source_1l00817"/>00817 
<anchor xml:id="_trappist__delivery_8py_source_1l00818"/>00818 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;Check&#32;if&#32;we&#32;have&#32;any&#32;asteroids&#32;assigned&#32;at&#32;all</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00819"/>00819 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;len(assignments)&#32;&gt;&#32;0:
<anchor xml:id="_trappist__delivery_8py_source_1l00820"/>00820 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;assignments&#32;=&#32;{
<anchor xml:id="_trappist__delivery_8py_source_1l00821"/>00821 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;assignment[0]:&#32;assignment
<anchor xml:id="_trappist__delivery_8py_source_1l00822"/>00822 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;assignment&#32;<emphasis role="keywordflow">in</emphasis>&#32;zip(
<anchor xml:id="_trappist__delivery_8py_source_1l00823"/>00823 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;assignments[::3],&#32;assignments[1::3],&#32;assignments[2::3]
<anchor xml:id="_trappist__delivery_8py_source_1l00824"/>00824 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;)
<anchor xml:id="_trappist__delivery_8py_source_1l00825"/><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a6927de26658a5e34a9e952cd94179327">00825</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_trappist__delivery_8py_source_1l00826"/>00826 
<anchor xml:id="_trappist__delivery_8py_source_1l00827"/>00827 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule&#32;=&#32;[]
<anchor xml:id="_trappist__delivery_8py_source_1l00828"/>00828 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;ast_id&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(1,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1a7859cc61326139c65d5d98d6e6f7e310">n_asteroids</link>&#32;+&#32;1):
<anchor xml:id="_trappist__delivery_8py_source_1l00829"/>00829 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;ast_id&#32;<emphasis role="keywordflow">not</emphasis>&#32;<emphasis role="keywordflow">in</emphasis>&#32;assignments:
<anchor xml:id="_trappist__delivery_8py_source_1l00830"/>00830 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule.extend([ast_id,&#32;0,&#32;0])
<anchor xml:id="_trappist__delivery_8py_source_1l00831"/>00831 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>:
<anchor xml:id="_trappist__delivery_8py_source_1l00832"/>00832 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;schedule.extend(assignments[ast_id])
<anchor xml:id="_trappist__delivery_8py_source_1l00833"/>00833 
<anchor xml:id="_trappist__delivery_8py_source_1l00834"/>00834 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;np.concatenate((np.array(x[:24]),&#32;np.array(schedule)))
<anchor xml:id="_trappist__delivery_8py_source_1l00835"/>00835 
<anchor xml:id="_trappist__delivery_8py_source_1l00836"/>00836 udp&#32;=&#32;<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule">trappist_schedule</link>()
<anchor xml:id="_trappist__delivery_8py_source_1l00837"/>00837 &#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00838"/>00838 <emphasis role="keyword">class&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1fitness">fitness</link>(object):
<anchor xml:id="_trappist__delivery_8py_source_1l00839"/>00839 
<anchor xml:id="_trappist__delivery_8py_source_1l00840"/>00840 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule_1ad49fb49a15d50bdf8ffb49a3a452c0d2">__init__</link>(self):
<anchor xml:id="_trappist__delivery_8py_source_1l00841"/>00841 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.udp&#32;=&#32;<link linkend="_classexamples_1_1trappist__delivery_1_1trappist__schedule">trappist_schedule</link>()&#32;<emphasis role="comment">#&#32;store&#32;original&#32;UDP</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00842"/>00842 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;db&#32;=&#32;self.udp.flat_db&#32;<emphasis role="comment">#&#32;original&#32;database</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00843"/>00843 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;flat&#32;=&#32;{}&#32;<emphasis role="comment">#&#32;flatten&#32;opportunities&#32;for&#32;all&#32;asteroids</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00844"/>00844 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;row&#32;<emphasis role="keywordflow">in</emphasis>&#32;db:
<anchor xml:id="_trappist__delivery_8py_source_1l00845"/>00845 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ast,&#32;station&#32;=&#32;row[0]-1,&#32;row[1]-1
<anchor xml:id="_trappist__delivery_8py_source_1l00846"/>00846 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;val&#32;=&#32;db[row]
<anchor xml:id="_trappist__delivery_8py_source_1l00847"/>00847 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;<emphasis role="keywordflow">not</emphasis>&#32;ast&#32;<emphasis role="keywordflow">in</emphasis>&#32;flat:
<anchor xml:id="_trappist__delivery_8py_source_1l00848"/>00848 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;flat[ast]&#32;=&#32;[]
<anchor xml:id="_trappist__delivery_8py_source_1l00849"/>00849 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;flat[ast].append([station]&#32;+&#32;val)&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00850"/>00850 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;db&#32;=&#32;[]&#32;<emphasis role="comment">#&#32;convert&#32;to&#32;list&#32;&#32;&#32;&#32;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00851"/>00851 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;ast&#32;<emphasis role="keywordflow">in</emphasis>&#32;flat:
<anchor xml:id="_trappist__delivery_8py_source_1l00852"/>00852 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;db.append(flat[ast])&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00853"/>00853 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.sel_i&#32;=&#32;np.argsort(np.array([len(r)&#32;<emphasis role="keywordflow">for</emphasis>&#32;r&#32;<emphasis role="keywordflow">in</emphasis>&#32;db]))
<anchor xml:id="_trappist__delivery_8py_source_1l00854"/>00854 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.sel_size&#32;=&#32;np.array([len(r)&#32;<emphasis role="keywordflow">for</emphasis>&#32;r&#32;<emphasis role="keywordflow">in</emphasis>&#32;db],&#32;dtype=int)
<anchor xml:id="_trappist__delivery_8py_source_1l00855"/><link linkend="_namespaceexamples_1_1trappist__delivery_1a11073f56d338653276d5988b460f9832">00855</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.ub_selection&#32;=&#32;self.sel_size-1E-9&#32;<emphasis role="comment">#&#32;upper&#32;bound&#32;for&#32;selection</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00856"/>00856 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;pad&#32;=&#32;len(max(db,&#32;key=len))&#32;<emphasis role="comment">#&#32;convert&#32;to&#32;array&#32;padding&#32;with&#32;zeros</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00857"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness">00857</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a5e1ca9b0352ca434af54d73f0876474d">db</link>&#32;=&#32;np.array([r&#32;+&#32;[[-1,0,0,0,0]]*(pad-len(r))&#32;<emphasis role="keywordflow">for</emphasis>&#32;r&#32;<emphasis role="keywordflow">in</emphasis>&#32;db])&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00858"/>00858 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;lb&#32;=&#32;np.array([0]&#32;*&#32;(12&#32;+&#32;len(db)))
<anchor xml:id="_trappist__delivery_8py_source_1l00859"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1ac93b14c8459740354d17ab1e96262bf8">00859</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ub&#32;=&#32;np.array([80]*12&#32;+&#32;list(self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a3c2a5c40f5941e45d4afa100a1cefcad">ub_selection</link>))
<anchor xml:id="_trappist__delivery_8py_source_1l00860"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a46dd96ea80bc85c68b209b636ec3452c">00860</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a133c96a64e92c82834d684f8b53f80f4">bounds</link>&#32;=&#32;Bounds(lb,&#32;ub)
<anchor xml:id="_trappist__delivery_8py_source_1l00861"/>00861 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a72b345bc382ff4c29360d66e89992e01">dim</link>&#32;=&#32;len(lb)
<anchor xml:id="_trappist__delivery_8py_source_1l00862"/>00862 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1af15eda907d43881daeb82c926911e37b">best</link>&#32;=&#32;mp.RawValue(ct.c_double,&#32;np.inf)
<anchor xml:id="_trappist__delivery_8py_source_1l00863"/>00863 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a59db4ff2ae78efc307bd406db4ceb986">best_min</link>&#32;=&#32;mp.RawValue(ct.c_double,&#32;0)
<anchor xml:id="_trappist__delivery_8py_source_1l00864"/>00864 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a9e75309de43a64bd7ccf8a2c860973f0">best_x</link>&#32;=&#32;mp.RawArray(ct.c_double,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a72b345bc382ff4c29360d66e89992e01">dim</link>)
<anchor xml:id="_trappist__delivery_8py_source_1l00865"/>00865 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;weights&#32;=&#32;np.zeros(12)
<anchor xml:id="_trappist__delivery_8py_source_1l00866"/>00866 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;w&#32;=&#32;1&#32;<emphasis role="comment">#&#32;decreasing&#32;weights&#32;for&#32;objective</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00867"/>00867 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fac&#32;=&#32;0.16&#32;<emphasis role="comment">#&#32;prioritize&#32;stations&#32;low&#32;on&#32;resources</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00868"/>00868 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;inc&#32;=&#32;0.1&#32;<emphasis role="comment">#&#32;all&#32;stations&#32;are&#32;valued</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00869"/>00869 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;i&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(len(weights)):
<anchor xml:id="_trappist__delivery_8py_source_1l00870"/>00870 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;weights[i]&#32;=&#32;w+inc;&#32;w&#32;=&#32;w*fac
<anchor xml:id="_trappist__delivery_8py_source_1l00871"/>00871 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis role="stringliteral">&quot;weights&#32;used&quot;</emphasis>,&#32;[round(w,&#32;6)&#32;<emphasis role="keywordflow">for</emphasis>&#32;w&#32;<emphasis role="keywordflow">in</emphasis>&#32;weights])
<anchor xml:id="_trappist__delivery_8py_source_1l00872"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1adc956fb869ae471beb7963ad438be581">00872</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a0f5c9846e248690f607ada9b0b617ecb">weights</link>&#32;=&#32;-weights
<anchor xml:id="_trappist__delivery_8py_source_1l00873"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a4d1deeb3a4f09d5a3554889183e6dc51">00873</link> 
<anchor xml:id="_trappist__delivery_8py_source_1l00874"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a3c2a5c40f5941e45d4afa100a1cefcad">00874</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a9c1664f5b2f23d74d40c0d36262af5b4">__call__</link>(self,&#32;x):&#32;<emphasis role="comment">#&#32;fitness&#32;function&#32;delegating&#32;to&#32;numba</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00875"/>00875 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;val,&#32;ps&#32;=&#32;<link linkend="_namespaceexamples_1_1trappist__delivery_1a2ac010d1048b03a8b3a60890c6d297ea">_fitness</link>(x,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a5e1ca9b0352ca434af54d73f0876474d">db</link>,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a0f5c9846e248690f607ada9b0b617ecb">weights</link>,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a4d1deeb3a4f09d5a3554889183e6dc51">sel_size</link>)
<anchor xml:id="_trappist__delivery_8py_source_1l00876"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a5e1ca9b0352ca434af54d73f0876474d">00876</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;val&#32;&lt;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1af15eda907d43881daeb82c926911e37b">best</link>.value:&#32;<emphasis role="comment">#&#32;check&#32;for&#32;best&#32;value</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00877"/>00877 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1af15eda907d43881daeb82c926911e37b">best</link>.value&#32;=&#32;val&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00878"/>00878 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print([round(p,&#32;3)&#32;<emphasis role="keywordflow">for</emphasis>&#32;p&#32;<emphasis role="keywordflow">in</emphasis>&#32;np.sort(ps)])
<anchor xml:id="_trappist__delivery_8py_source_1l00879"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a133c96a64e92c82834d684f8b53f80f4">00879</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;ps[0]&#32;&gt;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a59db4ff2ae78efc307bd406db4ceb986">best_min</link>.value:&#32;<emphasis role="comment">#&#32;check&#32;for&#32;best&#32;score</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00880"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a72b345bc382ff4c29360d66e89992e01">00880</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a59db4ff2ae78efc307bd406db4ceb986">best_min</link>.value&#32;=&#32;ps[0]&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00881"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1af15eda907d43881daeb82c926911e37b">00881</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a9e75309de43a64bd7ccf8a2c860973f0">best_x</link>[:]&#32;=&#32;x[:]&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00882"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a59db4ff2ae78efc307bd406db4ceb986">00882</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print([round(p,&#32;3)&#32;<emphasis role="keywordflow">for</emphasis>&#32;p&#32;<emphasis role="keywordflow">in</emphasis>&#32;ps],&#32;list(x))
<anchor xml:id="_trappist__delivery_8py_source_1l00883"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a9e75309de43a64bd7ccf8a2c860973f0">00883</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;val
<anchor xml:id="_trappist__delivery_8py_source_1l00884"/>00884 &#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00885"/>00885 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a1bf55a383dda1484f8e3cfbdad60dfd7">windows</link>(self,&#32;x):&#32;<emphasis role="comment">#&#32;compute&#32;station&#32;limits</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00886"/>00886 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;window_lb&#32;=&#32;x[:12].copy()&#32;<emphasis role="comment">#&#32;time&#32;window&#32;for&#32;stations&#32;lower&#32;bound</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00887"/>00887 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;window_ub&#32;=&#32;np.empty(12)&#32;<emphasis role="comment">#&#32;time&#32;window&#32;for&#32;stations&#32;upper&#32;bound</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00888"/>00888 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;wi&#32;=&#32;np.argsort(window_lb)&#32;<emphasis role="comment">#&#32;sort&#32;time&#32;windows</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00889"/>00889 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;window_lb[wi[0]]&#32;=&#32;0&#32;<emphasis role="comment">#&#32;first&#32;window&#32;has&#32;lower&#32;bound&#32;0</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00890"/>00890 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;i&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(0,&#32;11):&#32;<emphasis role="comment">#&#32;set&#32;upper&#32;bound,&#32;leave&#32;1&#32;day&#32;between&#32;windows</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00891"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a0f5c9846e248690f607ada9b0b617ecb">00891</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;window_ub[wi[i]]&#32;=&#32;window_lb[wi[i+1]]&#32;-&#32;1&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00892"/>00892 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;window_ub[wi[11]]&#32;=&#32;80&#32;<emphasis role="comment">#&#32;last&#32;window&#32;has&#32;upper&#32;bound&#32;80</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00893"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a9c1664f5b2f23d74d40c0d36262af5b4">00893</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1ac0dcebc5d6ff6cb76dbd0c193750bf07">window_lb</link>,&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1afc0f187fd3c282da558fcb39058baafd">window_ub</link>&#32;=&#32;np.array(window_lb),&#32;np.array(window_ub)
<anchor xml:id="_trappist__delivery_8py_source_1l00894"/>00894 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;window_lb,&#32;window_ub
<anchor xml:id="_trappist__delivery_8py_source_1l00895"/>00895 
<anchor xml:id="_trappist__delivery_8py_source_1l00896"/>00896 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1afe9d605b6b8ab793bcd82376d6be49cf">convert</link>(self,&#32;x):&#32;<emphasis role="comment">#&#32;convert&#32;argument&#32;vector&#32;for&#32;verification</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00897"/>00897 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x&#32;=&#32;np.array(x)
<anchor xml:id="_trappist__delivery_8py_source_1l00898"/>00898 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;db0&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a46dd96ea80bc85c68b209b636ec3452c">udp</link>.flat_db&#32;<emphasis role="comment">#&#32;original&#32;database</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00899"/>00899 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x0&#32;=&#32;[]
<anchor xml:id="_trappist__delivery_8py_source_1l00900"/>00900 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;window_lb,&#32;window_ub&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a1bf55a383dda1484f8e3cfbdad60dfd7">windows</link>(x)&#32;<emphasis role="comment">#&#32;compute&#32;station&#32;limits</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00901"/>00901 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;i&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(12):&#32;<emphasis role="comment">#&#32;put&#32;station&#32;limits</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00902"/>00902 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x0.append(window_lb[i])
<anchor xml:id="_trappist__delivery_8py_source_1l00903"/>00903 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x0.append(window_ub[i])
<anchor xml:id="_trappist__delivery_8py_source_1l00904"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a1bf55a383dda1484f8e3cfbdad60dfd7">00904</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;selection&#32;=&#32;x[12:].astype(int)&#32;<emphasis role="comment">#&#32;extract&#32;opportunity&#32;selection</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00905"/>00905 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;i,&#32;s&#32;<emphasis role="keywordflow">in</emphasis>&#32;enumerate(selection):
<anchor xml:id="_trappist__delivery_8py_source_1l00906"/>00906 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ssize&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a4d1deeb3a4f09d5a3554889183e6dc51">sel_size</link>[i]&#32;<emphasis role="comment">#&#32;start&#32;trying&#32;selection&#32;s</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00907"/>00907 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;l&#32;=&#32;len(x0)
<anchor xml:id="_trappist__delivery_8py_source_1l00908"/>00908 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;j&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(ssize):
<anchor xml:id="_trappist__delivery_8py_source_1l00909"/>00909 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;r&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a5e1ca9b0352ca434af54d73f0876474d">db</link>[i,&#32;s]&#32;<emphasis role="comment">#&#32;selected&#32;DB&#32;entry&#32;for&#32;ith&#32;asteroid</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00910"/>00910 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station&#32;=&#32;int(r[0])&#32;<emphasis role="comment">#&#32;to&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00911"/>00911 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;time&#32;=&#32;r[1]&#32;<emphasis role="comment">#&#32;if&#32;time&#32;in&#32;window&#32;add&#32;resources</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00912"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1ac0dcebc5d6ff6cb76dbd0c193750bf07">00912</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;time&#32;&gt;=&#32;window_lb[station]&#32;<emphasis role="keywordflow">and</emphasis>&#32;time&#32;&lt;=&#32;window_ub[station]:&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00913"/>00913 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;(astId,&#32;stationId,&#32;oppId)&#32;<emphasis role="keywordflow">in</emphasis>&#32;db0:&#32;<emphasis role="comment">#&#32;find&#32;indices&#32;in&#32;original&#32;DB</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00914"/>00914 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;astId&#32;==&#32;i+1&#32;<emphasis role="keywordflow">and</emphasis>&#32;stationId&#32;==&#32;station+1:&#32;<emphasis role="comment">#&#32;we&#32;count&#32;from&#32;0</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00915"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1afe9d605b6b8ab793bcd82376d6be49cf">00915</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;arrival_time,&#32;mass_A,&#32;mass_B,&#32;mass_C&#32;=&#32;db0[(astId,&#32;stationId,&#32;oppId)]
<anchor xml:id="_trappist__delivery_8py_source_1l00916"/>00916 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;time&#32;==&#32;arrival_time&#32;<emphasis role="keywordflow">and</emphasis>&#32;mass_A&#32;==&#32;r[2]&#32;<emphasis role="keywordflow">and</emphasis>&#32;mass_B&#32;==&#32;r[3]&#32;<emphasis role="keywordflow">and</emphasis>&#32;mass_C&#32;==&#32;r[4]:&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00917"/>00917 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x0.extend([astId,&#32;stationId,&#32;oppId+1])&#32;<emphasis role="comment">#&#32;indices&#32;start&#32;with&#32;1</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00918"/>00918 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00919"/>00919 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00920"/>00920 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s&#32;=&#32;(s&#32;+&#32;1)&#32;%&#32;ssize&#32;<emphasis role="comment">#&#32;if&#32;unsuccessful&#32;try&#32;other&#32;alternatives</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00921"/>00921 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;len(x0)&#32;==&#32;l:&#32;<emphasis role="comment">#&#32;no&#32;success&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00922"/>00922 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x0.extend([i+1,&#32;0,&#32;1])&#32;<emphasis role="comment">#&#32;assign&#32;station&#32;0</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00923"/>00923 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;x0
<anchor xml:id="_trappist__delivery_8py_source_1l00924"/>00924 &#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00925"/>00925 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1trappist__delivery_1af96d18a768624688d121c794e4f942f0">optimize</link>(self,&#32;maxevals=50000000,&#32;retries=2000):&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00926"/>00926 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;BiteOpt&#32;algorithm&#32;multi&#32;threaded</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00927"/>00927 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;store&#32;=&#32;<link linkend="_classfcmaes_1_1retry_1_1_store">retry.Store</link>(<link linkend="_classfcmaes_1_1optimizer_1_1wrapper">wrapper</link>(self),&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a133c96a64e92c82834d684f8b53f80f4">bounds</link>)&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00928"/>00928 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x0&#32;=&#32;<emphasis role="keywordtype">None</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00929"/>00929 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;i&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(1,&#32;5):&#32;<emphasis role="comment">#&#32;improve&#32;incrementally&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00930"/>00930 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis role="stringliteral">&quot;iteration&quot;</emphasis>,&#32;i)
<anchor xml:id="_trappist__delivery_8py_source_1l00931"/>00931 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;store&#32;=&#32;<link linkend="_classfcmaes_1_1retry_1_1_store">retry.Store</link>(<link linkend="_classfcmaes_1_1optimizer_1_1wrapper">wrapper</link>(self),&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a133c96a64e92c82834d684f8b53f80f4">bounds</link>)&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00932"/>00932 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;retry.retry(store,&#32;<link linkend="_classfcmaes_1_1optimizer_1_1_bite__cpp">Bite_cpp</link>(maxevals,x0,&#32;M=16,&#32;popsize=3200,&#32;stall_criterion=200).minimize,&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00933"/>00933 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;num_retries=retries)
<anchor xml:id="_trappist__delivery_8py_source_1l00934"/>00934 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;x0&#32;=&#32;self.<link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1a9e75309de43a64bd7ccf8a2c860973f0">best_x</link>[:]&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00935"/>00935 
<anchor xml:id="_trappist__delivery_8py_source_1l00936"/>00936 <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1trappist__delivery_1af96d18a768624688d121c794e4f942f0">optimize</link>():
<anchor xml:id="_trappist__delivery_8py_source_1l00937"/>00937 &#32;&#32;&#32;&#32;fit&#32;=&#32;<link linkend="_classexamples_1_1trappist__delivery_1_1fitness">fitness</link>()
<anchor xml:id="_trappist__delivery_8py_source_1l00938"/>00938 &#32;&#32;&#32;&#32;fit.optimize()
<anchor xml:id="_trappist__delivery_8py_source_1l00939"/>00939 &#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00940"/>00940 <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1trappist__delivery_1a3edb3cf576e5d7d7c04b7537dca935d5">check</link>():
<anchor xml:id="_trappist__delivery_8py_source_1l00941"/>00941 &#32;&#32;&#32;&#32;fit&#32;=&#32;<link linkend="_classexamples_1_1trappist__delivery_1_1fitness">fitness</link>()
<anchor xml:id="_trappist__delivery_8py_source_1l00942"/>00942 &#32;&#32;&#32;&#32;x&#32;=&#32;[23.12639746143074,&#32;49.210712151727776,&#32;2.025271098480984,&#32;33.70145021261418,&#32;74.74624854353284,&#32;55.7003375615551,&#32;68.01733901576718,&#32;38.34434794546488,&#32;45.94232240067513,&#32;64.18586868864216,&#32;71.77249965330779,&#32;41.20923483385521,&#32;5.374294766228467,&#32;10.807480433911689,&#32;41.45436283227506,&#32;9.120707788163473,&#32;18.963442563558004,&#32;35.1652835323873,&#32;16.36241134052928,&#32;23.083973995593297,&#32;34.4923496005214,&#32;28.3038806248846,&#32;37.7908866800202,&#32;27.285363391873247,&#32;42.35837759628225,&#32;48.80319538636846,&#32;22.228894776189392,&#32;4.861847410836416,&#32;34.05191571768972,&#32;37.4364516309269,&#32;20.894222781961908,&#32;30.36180412927237,&#32;26.09560460330928,&#32;66.41970995157186,&#32;28.08206446343889,&#32;8.077922495780404,&#32;33.24673601479603,&#32;14.07175866832998,&#32;21.81948009667388,&#32;47.646899320113036,&#32;24.429036271236022,&#32;21.400320205986123,&#32;40.09732302178437,&#32;36.205180686492575,&#32;14.043795280271612,&#32;9.332885295938253,&#32;25.781077815312848,&#32;55.0837591139832,&#32;40.229050229008536,&#32;3.2705796993963636,&#32;23.944771162581848,&#32;9.576358618908138,&#32;0.7519414707995067,&#32;2.165446982806674,&#32;0.8629876235393696,&#32;21.29757750113655,&#32;7.896408080250771,&#32;10.707945057879066,&#32;19.815550345157718,&#32;23.41302787935016,&#32;31.79497185413374,&#32;16.094356434749763,&#32;34.020583208389624,&#32;37.03451128849857,&#32;11.655903730566314,&#32;10.791671608206114,&#32;7.482424158908975,&#32;28.614287756529016,&#32;42.73809126166453,&#32;5.850884414166348,&#32;36.915044881784205,&#32;17.154641513304554,&#32;57.52610605331465,&#32;35.26096215030126,&#32;25.389622893890184,&#32;13.355590173125018,&#32;45.463146534385324,&#32;28.944681491785076,&#32;15.93797193295659,&#32;59.81309578439863,&#32;63.6229385274899,&#32;32.19328569599213,&#32;29.759474767696034,&#32;14.954722381046247,&#32;43.24895058350935,&#32;9.136208700797392,&#32;47.636906520021796,&#32;7.960593320719403,&#32;13.293328635549479,&#32;24.557651496572184,&#32;29.664849566838804,&#32;6.603626632762175,&#32;12.342312430847668,&#32;18.357498338611492,&#32;25.8901467635285,&#32;27.019652731967486,&#32;13.949541372919242,&#32;2.826834484452832,&#32;32.0190188353333,&#32;43.41349961218848,&#32;18.10214257604606,&#32;1.8439445952181253,&#32;5.14433577017559,&#32;1.380986698244865,&#32;2.199776336744757,&#32;3.0559899246650573,&#32;1.5384734264023017,&#32;2.214115742919157,&#32;0.36114517576806726,&#32;1.6835484762243083,&#32;4.476955029879836,&#32;0.8220331719324672,&#32;3.424326563116105,&#32;1.0944325339026684,&#32;1.3154831966976743,&#32;1.6394457153653743,&#32;1.4305063655011039,&#32;1.8825705381404303,&#32;4.413090087199976,&#32;0.8273519264482886,&#32;2.6415718054606314,&#32;1.3301528212662441,&#32;0.5014534192509065,&#32;1.6757035545118395,&#32;4.655401703670822,&#32;4.783356594747494,&#32;4.344098919186095,&#32;1.995702923800821,&#32;4.648135296847233,&#32;4.507157645115363,&#32;3.7421118797333093,&#32;2.492091503280891,&#32;0.9447192437446356,&#32;2.5754660034071484,&#32;2.067015896422351,&#32;1.4668100139041718,&#32;1.4542444435562143,&#32;17.920180424671873,&#32;4.704880165733561,&#32;7.7359501759003075,&#32;8.815574182478974,&#32;2.459770930341602,&#32;3.9436834582426195,&#32;1.40214595002838,&#32;11.157803803451282,&#32;12.072294608648924,&#32;3.9374773813377613,&#32;7.137937469173593,&#32;58.934954506499245,&#32;43.40548317889475,&#32;1.1953354110889134,&#32;25.18828342450627,&#32;36.90689855326262,&#32;17.173050000970434,&#32;7.583979388916177,&#32;50.875621555034925,&#32;17.254725034256357,&#32;7.947616367191294,&#32;10.26204702455983,&#32;10.716326937408422,&#32;9.38944061302195,&#32;10.958267911857149,&#32;44.15723151233567,&#32;23.03649766820622,&#32;54.66826002640253,&#32;29.53610944393554,&#32;40.69988337907609,&#32;30.592279074789086,&#32;14.772303425574053,&#32;21.999720735902557,&#32;56.0181540569659,&#32;12.22344317450934,&#32;34.656267184843706,&#32;2.717822194080356,&#32;35.88332923290119,&#32;46.045327517889206,&#32;22.290125985871878,&#32;31.30942614739834,&#32;22.86084228983393,&#32;12.765990661843,&#32;10.013377021858844,&#32;7.901395681474148,&#32;20.172144420440578,&#32;7.548987864768862,&#32;18.821918898435598,&#32;10.015769969653398,&#32;45.505518895693186,&#32;10.009061068072452,&#32;8.375321362147785,&#32;56.52487531358315,&#32;11.012849533914556,&#32;43.83733595631719,&#32;21.638177092923232,&#32;18.15079445504883,&#32;26.011535256786956,&#32;20.62698510168183,&#32;52.389324600347244,&#32;10.501917302649773,&#32;33.091112360163336,&#32;32.43690555579961,&#32;20.007093624256537,&#32;39.87074032707598,&#32;13.645166819288855,&#32;7.890085723329521,&#32;26.89163951227164,&#32;22.215846013217828,&#32;19.238667319001994,&#32;11.550993212617012,&#32;65.39764799695308,&#32;15.792310132095588,&#32;27.995060280077716,&#32;6.4975930814371265,&#32;8.52111517675269,&#32;7.331870231111029,&#32;33.120084420881845,&#32;22.417904545945348,&#32;10.390828112603185,&#32;4.378530398538042,&#32;15.495896962252754,&#32;1.5985287874363858,&#32;19.531033786857122,&#32;35.74698718189253,&#32;14.379068916899715,&#32;16.966069584534594,&#32;17.5220677454396,&#32;20.91210403659696,&#32;12.059319441191414,&#32;5.769824713126678,&#32;12.923817576414422,&#32;32.257457542227066,&#32;40.88025031411448,&#32;24.277606265011695,&#32;29.79021384654935,&#32;0.1461186361811261,&#32;51.94260158217971,&#32;35.774921841951794,&#32;12.540798049361959,&#32;13.109201370956796,&#32;40.02107633973688,&#32;6.90381914501392,&#32;25.095369782701766,&#32;6.749546040537202,&#32;16.908716684486343,&#32;16.34782003912364,&#32;44.826675412101984,&#32;21.401773193830593,&#32;15.69599198839753,&#32;10.506886333478398,&#32;15.391223912867654,&#32;21.71372724287722,&#32;27.349253869930504,&#32;3.776812993503014,&#32;10.571647226703462,&#32;4.677762499142719,&#32;14.137040274950778,&#32;67.3184876225992,&#32;25.376368656459668,&#32;11.252172650331858,&#32;42.801100263406084,&#32;8.747899000950754,&#32;0.3235066708666327,&#32;19.191346103276363,&#32;22.976752925466155,&#32;26.896812787932298,&#32;8.726066423490053,&#32;18.606237669321416,&#32;30.118997676853578,&#32;9.398360202814118,&#32;10.57810916809076,&#32;14.231705146188897,&#32;9.248502654445975,&#32;19.8062876454034,&#32;7.708078393390288,&#32;7.900169465667145,&#32;20.75466717853311,&#32;7.8539637762555365,&#32;26.840724774383624,&#32;53.73020675259066,&#32;12.52903809721433,&#32;12.068847699411107,&#32;19.425863251373308,&#32;19.10181265510097,&#32;24.401174964570185,&#32;4.287875123081391,&#32;20.63927079190342,&#32;42.81335113619154,&#32;8.629860963234394,&#32;30.905279212840753,&#32;9.762475067899304,&#32;20.600867656528994,&#32;21.927031193817317,&#32;21.9062100227658,&#32;13.567942281140088,&#32;35.56708604513299,&#32;13.994307686157903,&#32;6.992667807819466,&#32;10.182608790296152,&#32;24.421480507123814,&#32;27.23231643468027,&#32;16.539906154792526,&#32;10.60596318127324,&#32;39.56949802026564,&#32;46.68185224882708,&#32;16.790267771758163,&#32;6.289885663632137,&#32;9.055617813320588,&#32;17.817164716112657,&#32;16.85540590369484,&#32;18.788303932780202,&#32;3.1713695980656693,&#32;12.652967972137501,&#32;14.45667176992051,&#32;43.91781053038059,&#32;10.854577314457533,&#32;6.54333131018741,&#32;22.434286816576225,&#32;12.901447996009038,&#32;15.291099631900535,&#32;5.93488171107279,&#32;12.259391810855295,&#32;28.376335316675117,&#32;8.733866985582837,&#32;3.855350648083705,&#32;11.909422048612953,&#32;38.783350646107266,&#32;47.791591127829534,&#32;14.249229279889516,&#32;20.258997485815883,&#32;24.797390172729717,&#32;2.3703977826326073,&#32;19.69226085121024,&#32;13.722560731392694,&#32;36.019956088993546,&#32;65.10016899167518,&#32;49.778608661434106,&#32;7.3134346336476135,&#32;24.606311679932684,&#32;51.97523273571923,&#32;7.638676638278817,&#32;37.02110977859669,&#32;19.03577555276804,&#32;22.521818547976796,&#32;36.09170326817167,&#32;12.458651254537406,&#32;30.502970320265828,&#32;1.7020519629127606,&#32;42.33034444525069,&#32;12.407620449485231,&#32;24.398772129987016,&#32;26.246220709699347,&#32;33.20476192777754,&#32;7.079747483780409]
<anchor xml:id="_trappist__delivery_8py_source_1l00943"/>00943 &#32;&#32;&#32;&#32;print(fit(np.array(x)))
<anchor xml:id="_trappist__delivery_8py_source_1l00944"/><link linkend="_classexamples_1_1trappist__delivery_1_1fitness_1ad25284f2ed9bbb5897ec7ca711e5fa17">00944</link> &#32;&#32;&#32;&#32;x0&#32;=&#32;fit.convert(x)
<anchor xml:id="_trappist__delivery_8py_source_1l00945"/>00945 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">print</emphasis>&#32;(fit.udp.fitness(x0))
<anchor xml:id="_trappist__delivery_8py_source_1l00946"/>00946 &#32;&#32;&#32;&#32;fit.udp.pretty(x0)
<anchor xml:id="_trappist__delivery_8py_source_1l00947"/>00947 &#32;&#32;&#32;&#32;fit.udp.plot(x0)
<anchor xml:id="_trappist__delivery_8py_source_1l00948"/>00948 &#32;&#32;&#32;&#32;plt.show()
<anchor xml:id="_trappist__delivery_8py_source_1l00949"/>00949 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00950"/>00950 <emphasis role="keyword">from</emphasis>&#32;numba&#32;<emphasis role="keyword">import</emphasis>&#32;njit,&#32;numba
<anchor xml:id="_trappist__delivery_8py_source_1l00951"/>00951 <emphasis role="preprocessor">@njit(fastmath=True,&#32;cache=True)</emphasis>&#32;&#32;&#32;&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00952"/>00952 <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1trappist__delivery_1a2ac010d1048b03a8b3a60890c6d297ea">_fitness</link>(x,&#32;db,&#32;weights,&#32;sel_size):
<anchor xml:id="_trappist__delivery_8py_source_1l00953"/>00953 &#32;&#32;&#32;&#32;window_lb&#32;=&#32;x[:12].copy()&#32;<emphasis role="comment">#&#32;time&#32;window&#32;for&#32;stations&#32;lower&#32;bound</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00954"/>00954 &#32;&#32;&#32;&#32;wi&#32;=&#32;np.argsort(window_lb)&#32;<emphasis role="comment">#&#32;sort&#32;time&#32;windows</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00955"/><link linkend="_namespaceexamples_1_1trappist__delivery_1af96d18a768624688d121c794e4f942f0">00955</link> &#32;&#32;&#32;&#32;window_ub&#32;=&#32;np.empty(12)&#32;<emphasis role="comment">#&#32;time&#32;window&#32;for&#32;stations&#32;upper&#32;bound</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00956"/>00956 &#32;&#32;&#32;&#32;window_lb[wi[0]]&#32;=&#32;0&#32;<emphasis role="comment">#&#32;first&#32;window&#32;has&#32;lower&#32;bound&#32;0</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00957"/>00957 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;i&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(0,&#32;11):&#32;<emphasis role="comment">#&#32;set&#32;upper&#32;bound,&#32;leave&#32;1&#32;day&#32;between&#32;windows</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00958"/>00958 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;window_ub[wi[i]]&#32;=&#32;window_lb[wi[i+1]]&#32;-&#32;1&#32;
<anchor xml:id="_trappist__delivery_8py_source_1l00959"/><link linkend="_namespaceexamples_1_1trappist__delivery_1a3edb3cf576e5d7d7c04b7537dca935d5">00959</link> &#32;&#32;&#32;&#32;window_ub[wi[11]]&#32;=&#32;80&#32;<emphasis role="comment">#&#32;last&#32;window&#32;has&#32;upper&#32;bound&#32;80</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00960"/>00960 &#32;&#32;&#32;&#32;prod&#32;=&#32;np.zeros((12,3))&#32;<emphasis role="comment">#&#32;accumulate&#32;resources&#32;for&#32;stations</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00961"/>00961 &#32;&#32;&#32;&#32;selection&#32;=&#32;x[12:].astype(numba.int32)&#32;<emphasis role="comment">#&#32;@njit&#32;requires&#32;numba&#32;types&#32;&#32;&#32;&#32;</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00962"/>00962 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;i,&#32;s&#32;<emphasis role="keywordflow">in</emphasis>&#32;enumerate(selection):
<anchor xml:id="_trappist__delivery_8py_source_1l00963"/>00963 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ssize&#32;=&#32;sel_size[i]&#32;<emphasis role="comment">#&#32;start&#32;trying&#32;selection&#32;s</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00964"/>00964 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;_&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(ssize):
<anchor xml:id="_trappist__delivery_8py_source_1l00965"/>00965 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;r&#32;=&#32;db[i,&#32;s]&#32;<emphasis role="comment">#&#32;selected&#32;DB&#32;entry&#32;for&#32;ith&#32;asteroid</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00966"/>00966 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;station&#32;=&#32;int(r[0])&#32;<emphasis role="comment">#&#32;to&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00967"/>00967 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;time&#32;=&#32;r[1]&#32;<emphasis role="comment">#&#32;if&#32;time&#32;in&#32;window&#32;add&#32;resources</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00968"/>00968 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;time&#32;&gt;=&#32;window_lb[station]&#32;<emphasis role="keywordflow">and</emphasis>&#32;time&#32;&lt;=&#32;window_ub[station]:
<anchor xml:id="_trappist__delivery_8py_source_1l00969"/>00969 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;prod[station]&#32;+=&#32;r[2:]&#32;<emphasis role="comment">#&#32;add&#32;resources&#32;for&#32;station_fitness</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00970"/>00970 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">break</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00971"/><link linkend="_namespaceexamples_1_1trappist__delivery_1a2ac010d1048b03a8b3a60890c6d297ea">00971</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s&#32;=&#32;(s&#32;+&#32;1)&#32;%&#32;ssize&#32;<emphasis role="comment">#&#32;if&#32;unsuccessful&#32;try&#32;other&#32;alternatives</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00972"/>00972 &#32;&#32;&#32;&#32;stat_prod&#32;=&#32;np.empty(12)&#32;<emphasis role="comment">#&#32;numba&#32;hates&#32;fromiter,&#32;so&#32;we&#32;loop</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00973"/>00973 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;station&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(12):&#32;<emphasis role="comment">#&#32;minimum&#32;resource&#32;at&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00974"/>00974 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stat_prod[station]&#32;=&#32;min(prod[station])
<anchor xml:id="_trappist__delivery_8py_source_1l00975"/>00975 &#32;&#32;&#32;&#32;ps&#32;=&#32;np.sort(stat_prod)&#32;<emphasis role="comment">#&#32;sorted&#32;weighted&#32;sum&#32;of&#32;minima&#32;at&#32;station</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00976"/>00976 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;np.dot(ps,&#32;weights),&#32;ps&#32;<emphasis role="comment">#&#32;poorest&#32;station&#32;has&#32;priority</emphasis>
<anchor xml:id="_trappist__delivery_8py_source_1l00977"/>00977 
<anchor xml:id="_trappist__delivery_8py_source_1l00978"/>00978 
<anchor xml:id="_trappist__delivery_8py_source_1l00979"/>00979 <emphasis role="keywordflow">if</emphasis>&#32;__name__&#32;==&#32;<emphasis role="stringliteral">&apos;__main__&apos;</emphasis>:
<anchor xml:id="_trappist__delivery_8py_source_1l00980"/>00980 &#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1trappist__delivery_1af96d18a768624688d121c794e4f942f0">optimize</link>()
<anchor xml:id="_trappist__delivery_8py_source_1l00981"/>00981 &#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1trappist__delivery_1a3edb3cf576e5d7d7c04b7537dca935d5">check</link>()
<anchor xml:id="_trappist__delivery_8py_source_1l00982"/>00982 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">pass</emphasis>
</programlisting></section>

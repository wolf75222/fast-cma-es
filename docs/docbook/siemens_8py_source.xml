<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_siemens_8py_source" xml:lang="en-US">
<title>siemens.py</title>
<indexterm><primary>examples/siemens.py</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_siemens_8py_source_1l00001"/><link linkend="_namespaceexamples_1_1siemens">00001</link> 
<anchor xml:id="_siemens_8py_source_1l00002"/>00002 <emphasis role="comment">#&#32;Material&#32;flow&#32;planning&#32;for&#32;a&#32;simple&#32;a&#32;plant&#32;consisting&#32;of&#32;2&#32;machines.</emphasis>
<anchor xml:id="_siemens_8py_source_1l00003"/>00003 <emphasis role="comment">#&#32;See&#32;https://ecosystem.siemens.com/softwareforinnovators/plant-simulation-challenge-task-3/overview</emphasis>
<anchor xml:id="_siemens_8py_source_1l00004"/>00004 
<anchor xml:id="_siemens_8py_source_1l00005"/>00005 <emphasis role="comment">#&#32;Tested&#32;using&#32;https://docs.conda.io/en/main/miniconda.html&#32;on&#32;Linux&#32;Mint&#32;21.2</emphasis>
<anchor xml:id="_siemens_8py_source_1l00006"/>00006 
<anchor xml:id="_siemens_8py_source_1l00007"/>00007 <emphasis role="keyword">from</emphasis>&#32;fcmaes&#32;<emphasis role="keyword">import</emphasis>&#32;retry,&#32;decpp,&#32;bitecpp
<anchor xml:id="_siemens_8py_source_1l00008"/>00008 <emphasis role="keyword">from</emphasis>&#32;<link linkend="_namespacefcmaes_1_1optimizer">fcmaes.optimizer</link>&#32;<emphasis role="keyword">import</emphasis>&#32;wrapper,&#32;logger,&#32;Bite_cpp
<anchor xml:id="_siemens_8py_source_1l00009"/>00009 <emphasis role="keyword">from</emphasis>&#32;scipy.optimize&#32;<emphasis role="keyword">import</emphasis>&#32;Bounds
<anchor xml:id="_siemens_8py_source_1l00010"/>00010 <emphasis role="keyword">import</emphasis>&#32;ctypes&#32;<emphasis role="keyword">as</emphasis>&#32;ct
<anchor xml:id="_siemens_8py_source_1l00011"/>00011 <emphasis role="keyword">import</emphasis>&#32;multiprocessing&#32;<emphasis role="keyword">as</emphasis>&#32;mp&#32;
<anchor xml:id="_siemens_8py_source_1l00012"/>00012 <emphasis role="keyword">import</emphasis>&#32;numpy&#32;<emphasis role="keyword">as</emphasis>&#32;np
<anchor xml:id="_siemens_8py_source_1l00013"/>00013 <emphasis role="keyword">from</emphasis>&#32;collections&#32;<emphasis role="keyword">import</emphasis>&#32;deque
<anchor xml:id="_siemens_8py_source_1l00014"/>00014 
<anchor xml:id="_siemens_8py_source_1l00015"/>00015 <emphasis role="keyword">import</emphasis>&#32;sys&#32;
<anchor xml:id="_siemens_8py_source_1l00016"/>00016 <emphasis role="keyword">from</emphasis>&#32;loguru&#32;<emphasis role="keyword">import</emphasis>&#32;logger
<anchor xml:id="_siemens_8py_source_1l00017"/>00017 
<anchor xml:id="_siemens_8py_source_1l00018"/>00018 logger.remove()
<anchor xml:id="_siemens_8py_source_1l00019"/><link linkend="_namespaceexamples_1_1siemens_1a23a3c944635c8a264f08496c623a9bfa">00019</link> logger.add(sys.stdout,&#32;format=<emphasis role="stringliteral">&quot;{time:HH:mm:ss.SS}&#32;|&#32;{process}&#32;|&#32;{level}&#32;|&#32;{message}&quot;</emphasis>,&#32;level=<emphasis role="stringliteral">&quot;INFO&quot;</emphasis>)
<anchor xml:id="_siemens_8py_source_1l00020"/>00020 logger.add(<emphasis role="stringliteral">&quot;log_{time}.txt&quot;</emphasis>,&#32;format=<emphasis role="stringliteral">&quot;{time:HH:mm:ss.SS}&#32;|&#32;{process}&#32;|&#32;{level}&#32;|&#32;{message}&quot;</emphasis>,&#32;level=<emphasis role="stringliteral">&quot;INFO&quot;</emphasis>)
<anchor xml:id="_siemens_8py_source_1l00021"/>00021 
<anchor xml:id="_siemens_8py_source_1l00022"/>00022 <emphasis role="comment">#&#32;The&#32;buffer&#32;between&#32;the&#32;two&#32;machines&#32;has&#32;a&#32;capacity&#32;of&#32;8&#32;parts.&#32;</emphasis>
<anchor xml:id="_siemens_8py_source_1l00023"/>00023 <emphasis role="comment">#&#32;It&#32;can&#32;be&#32;filled&#32;and&#32;parts&#32;can&#32;be&#32;removed&#32;without&#32;any&#32;loss&#32;of&#32;time.</emphasis>
<anchor xml:id="_siemens_8py_source_1l00024"/><link linkend="_namespaceexamples_1_1siemens_1ad3a041edcdbd13065c5c8d1242e0dc69">00024</link> buffer_capacity&#32;=&#32;8&#32;
<anchor xml:id="_siemens_8py_source_1l00025"/>00025 
<anchor xml:id="_siemens_8py_source_1l00026"/>00026 <emphasis role="comment">#&#32;For&#32;setting&#32;the&#32;machine&#32;up&#32;from&#32;product&#32;A&#32;to&#32;product&#32;B&#32;and&#32;from&#32;product&#32;B&#32;to&#32;product&#32;A,&#32;</emphasis>
<anchor xml:id="_siemens_8py_source_1l00027"/>00027 <emphasis role="comment">#&#32;a&#32;setup&#32;time&#32;of&#32;10&#32;seconds&#32;is&#32;required.&#32;Setup&#32;is&#32;carried&#32;out&#32;automatically&#32;when&#32;switching&#32;between&#32;the&#32;part&#32;types.</emphasis>
<anchor xml:id="_siemens_8py_source_1l00028"/><link linkend="_namespaceexamples_1_1siemens_1a98750a048c544f155e938e599c83ff0c">00028</link> setup_time&#32;=&#32;10
<anchor xml:id="_siemens_8py_source_1l00029"/>00029 
<anchor xml:id="_siemens_8py_source_1l00030"/><link linkend="_classexamples_1_1siemens_1_1_machine">00030</link> <emphasis role="keyword">class&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_machine">Machine</link>:
<anchor xml:id="_siemens_8py_source_1l00031"/>00031 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00032"/><link linkend="_classexamples_1_1siemens_1_1_machine_1a2b27545f4d46af3150c459993480c7ea">00032</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_machine_1a2b27545f4d46af3150c459993480c7ea">__init__</link>(self,&#32;type,&#32;dtime):
<anchor xml:id="_siemens_8py_source_1l00033"/><link linkend="_classexamples_1_1siemens_1_1_machine_1ad56d0526d8d5d1233ea08e13e423698a">00033</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1ad56d0526d8d5d1233ea08e13e423698a">product</link>&#32;=&#32;-1
<anchor xml:id="_siemens_8py_source_1l00034"/><link linkend="_classexamples_1_1siemens_1_1_machine_1a9d89a15b5297f3d841f5f2c1060a5949">00034</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a9d89a15b5297f3d841f5f2c1060a5949">last_product</link>&#32;=&#32;-1
<anchor xml:id="_siemens_8py_source_1l00035"/><link linkend="_classexamples_1_1siemens_1_1_machine_1a22c5b6e74d0988be787d0edfcd1b9f16">00035</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a22c5b6e74d0988be787d0edfcd1b9f16">time</link>&#32;=&#32;0
<anchor xml:id="_siemens_8py_source_1l00036"/><link linkend="_classexamples_1_1siemens_1_1_machine_1a0226b64676509ec13b7bbed945c2317a">00036</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a0226b64676509ec13b7bbed945c2317a">type</link>&#32;=&#32;type
<anchor xml:id="_siemens_8py_source_1l00037"/><link linkend="_classexamples_1_1siemens_1_1_machine_1a186e0153fa4c3b89d35128b6d16dfea2">00037</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a186e0153fa4c3b89d35128b6d16dfea2">dtime</link>&#32;=&#32;dtime
<anchor xml:id="_siemens_8py_source_1l00038"/>00038 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00039"/><link linkend="_classexamples_1_1siemens_1_1_machine_1aecd32c1f18e3ac7977e9a86b4e8f1012">00039</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_machine_1aecd32c1f18e3ac7977e9a86b4e8f1012">process</link>(self,&#32;time,&#32;product):
<anchor xml:id="_siemens_8py_source_1l00040"/>00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#print(f&apos;process&#32;p{product}&#32;{self}&apos;)</emphasis>
<anchor xml:id="_siemens_8py_source_1l00041"/>00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;time&#32;=&#32;max(time,&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a22c5b6e74d0988be787d0edfcd1b9f16">time</link>)
<anchor xml:id="_siemens_8py_source_1l00042"/>00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;product&#32;!=&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a9d89a15b5297f3d841f5f2c1060a5949">last_product</link>:
<anchor xml:id="_siemens_8py_source_1l00043"/>00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;time&#32;+=&#32;setup_time
<anchor xml:id="_siemens_8py_source_1l00044"/>00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1ad56d0526d8d5d1233ea08e13e423698a">product</link>&#32;=&#32;product&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00045"/>00045 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a22c5b6e74d0988be787d0edfcd1b9f16">time</link>&#32;=&#32;time&#32;+&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a186e0153fa4c3b89d35128b6d16dfea2">dtime</link>[self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a0226b64676509ec13b7bbed945c2317a">type</link>,&#32;product]
<anchor xml:id="_siemens_8py_source_1l00046"/>00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00047"/><link linkend="_classexamples_1_1siemens_1_1_machine_1a945720eb724bb91836f9ade21953b6df">00047</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_machine_1a945720eb724bb91836f9ade21953b6df">take</link>(self):
<anchor xml:id="_siemens_8py_source_1l00048"/>00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#print(f&apos;take&#32;{self}&apos;)</emphasis>
<anchor xml:id="_siemens_8py_source_1l00049"/>00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a9d89a15b5297f3d841f5f2c1060a5949">last_product</link>&#32;=&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1ad56d0526d8d5d1233ea08e13e423698a">product</link>
<anchor xml:id="_siemens_8py_source_1l00050"/>00050 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1ad56d0526d8d5d1233ea08e13e423698a">product</link>&#32;=&#32;-1
<anchor xml:id="_siemens_8py_source_1l00051"/>00051 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a9d89a15b5297f3d841f5f2c1060a5949">last_product</link>
<anchor xml:id="_siemens_8py_source_1l00052"/>00052 &#32;
<anchor xml:id="_siemens_8py_source_1l00053"/><link linkend="_classexamples_1_1siemens_1_1_machine_1acf96c3492bc4e9b03bb5d1e175096165">00053</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_machine_1acf96c3492bc4e9b03bb5d1e175096165">finished</link>(self,&#32;time):
<anchor xml:id="_siemens_8py_source_1l00054"/>00054 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;time&#32;&gt;=&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a22c5b6e74d0988be787d0edfcd1b9f16">time</link>&#32;<emphasis role="keywordflow">and</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1ad56d0526d8d5d1233ea08e13e423698a">product</link>&#32;&gt;=&#32;0
<anchor xml:id="_siemens_8py_source_1l00055"/>00055 &#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00056"/><link linkend="_classexamples_1_1siemens_1_1_machine_1a6581c31f45a3d7ef036ef0291c2804eb">00056</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_machine_1a6581c31f45a3d7ef036ef0291c2804eb">available</link>(self,&#32;time):
<anchor xml:id="_siemens_8py_source_1l00057"/>00057 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;time&#32;&gt;=&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1a22c5b6e74d0988be787d0edfcd1b9f16">time</link>&#32;<emphasis role="keywordflow">and</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_machine_1ad56d0526d8d5d1233ea08e13e423698a">product</link>&#32;&lt;&#32;0
<anchor xml:id="_siemens_8py_source_1l00058"/>00058 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00059"/><link linkend="_classexamples_1_1siemens_1_1_machine_1aefd1d19fe21acd23751a1a52389d7381">00059</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_machine_1aefd1d19fe21acd23751a1a52389d7381">__str__</link>(self):
<anchor xml:id="_siemens_8py_source_1l00060"/>00060 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;f<emphasis role="stringliteral">&apos;m{self.type}&#32;p{self.product}&#32;t{self.time}&apos;</emphasis>
<anchor xml:id="_siemens_8py_source_1l00061"/>00061 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00062"/><link linkend="_classexamples_1_1siemens_1_1_buffer">00062</link> <emphasis role="keyword">class&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_buffer">Buffer</link>:
<anchor xml:id="_siemens_8py_source_1l00063"/>00063 
<anchor xml:id="_siemens_8py_source_1l00064"/><link linkend="_classexamples_1_1siemens_1_1_buffer_1ad5d9fe7d60827c588d86ec082f221c44">00064</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_buffer_1ad5d9fe7d60827c588d86ec082f221c44">__init__</link>(self):
<anchor xml:id="_siemens_8py_source_1l00065"/><link linkend="_classexamples_1_1siemens_1_1_buffer_1a43ccc9c24696a49abfda7d0c5796021b">00065</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_buffer_1a43ccc9c24696a49abfda7d0c5796021b">queue</link>&#32;=&#32;deque()
<anchor xml:id="_siemens_8py_source_1l00066"/>00066 &#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00067"/><link linkend="_classexamples_1_1siemens_1_1_buffer_1ac98405bd5e1de4c3262bd63b49c07606">00067</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_buffer_1ac98405bd5e1de4c3262bd63b49c07606">add</link>(self,&#32;product):
<anchor xml:id="_siemens_8py_source_1l00068"/>00068 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#print(f&apos;add&#32;p{product}&#32;{self}&apos;)</emphasis>
<anchor xml:id="_siemens_8py_source_1l00069"/>00069 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_buffer_1a43ccc9c24696a49abfda7d0c5796021b">queue</link>.append(product)
<anchor xml:id="_siemens_8py_source_1l00070"/>00070 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00071"/><link linkend="_classexamples_1_1siemens_1_1_buffer_1a2910953a97c88e1eabb2fa7b661cdb3a">00071</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_buffer_1a2910953a97c88e1eabb2fa7b661cdb3a">retrieve</link>(self):
<anchor xml:id="_siemens_8py_source_1l00072"/>00072 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#print(f&apos;retrieve&#32;{self}&apos;)</emphasis>
<anchor xml:id="_siemens_8py_source_1l00073"/>00073 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_buffer_1a43ccc9c24696a49abfda7d0c5796021b">queue</link>.popleft()
<anchor xml:id="_siemens_8py_source_1l00074"/>00074 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00075"/><link linkend="_classexamples_1_1siemens_1_1_buffer_1a04a779039517b202bf585be6d8dabe75">00075</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_buffer_1a04a779039517b202bf585be6d8dabe75">can_retrieve</link>(self):
<anchor xml:id="_siemens_8py_source_1l00076"/>00076 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;len(self.<link linkend="_classexamples_1_1siemens_1_1_buffer_1a43ccc9c24696a49abfda7d0c5796021b">queue</link>)&#32;&gt;&#32;0
<anchor xml:id="_siemens_8py_source_1l00077"/>00077 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00078"/><link linkend="_classexamples_1_1siemens_1_1_buffer_1a41bb2f1bdb2a4d4d6cc8dd3d62c2c903">00078</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_buffer_1a41bb2f1bdb2a4d4d6cc8dd3d62c2c903">can_add</link>(self):
<anchor xml:id="_siemens_8py_source_1l00079"/>00079 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;len(self.<link linkend="_classexamples_1_1siemens_1_1_buffer_1a43ccc9c24696a49abfda7d0c5796021b">queue</link>)&#32;&lt;&#32;buffer_capacity
<anchor xml:id="_siemens_8py_source_1l00080"/>00080 
<anchor xml:id="_siemens_8py_source_1l00081"/><link linkend="_classexamples_1_1siemens_1_1_buffer_1a4cdfffb5cafd4889adde825f097d2e24">00081</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_buffer_1a4cdfffb5cafd4889adde825f097d2e24">__str__</link>(self):
<anchor xml:id="_siemens_8py_source_1l00082"/>00082 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;f<emphasis role="stringliteral">&apos;b{len(self.queue)}&apos;</emphasis>&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00083"/>00083 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00084"/><link linkend="_classexamples_1_1siemens_1_1_plant">00084</link> <emphasis role="keyword">class&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_plant">Plant</link>:
<anchor xml:id="_siemens_8py_source_1l00085"/>00085 
<anchor xml:id="_siemens_8py_source_1l00086"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a0c807d70b50a4f01853770887af951c9">00086</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_plant_1a0c807d70b50a4f01853770887af951c9">__init__</link>(self,&#32;dtime):
<anchor xml:id="_siemens_8py_source_1l00087"/>00087 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00088"/><link linkend="_classexamples_1_1siemens_1_1_plant_1af348bfc4ca148a674e48b0131ba0baeb">00088</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af348bfc4ca148a674e48b0131ba0baeb">name</link>&#32;=&#32;<emphasis role="stringliteral">&quot;Plant&quot;</emphasis>
<anchor xml:id="_siemens_8py_source_1l00089"/><link linkend="_classexamples_1_1siemens_1_1_plant_1ab17655317b87c0ec787a77dc66bff7d6">00089</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab17655317b87c0ec787a77dc66bff7d6">dtime</link>&#32;=&#32;dtime
<anchor xml:id="_siemens_8py_source_1l00090"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a7ef051716b1d967271974422393ba9ce">00090</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a7ef051716b1d967271974422393ba9ce">dim</link>&#32;=&#32;len(dtime[0])
<anchor xml:id="_siemens_8py_source_1l00091"/><link linkend="_classexamples_1_1siemens_1_1_plant_1ae9100e0cacbed379d5b3aaea2256033a">00091</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ae9100e0cacbed379d5b3aaea2256033a">bounds</link>&#32;=&#32;Bounds([1]*self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a7ef051716b1d967271974422393ba9ce">dim</link>,&#32;[50]*self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a7ef051716b1d967271974422393ba9ce">dim</link>)&#32;
<anchor xml:id="_siemens_8py_source_1l00092"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a5242ec61b86bf80a14907a9ef9ecddb1">00092</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a5242ec61b86bf80a14907a9ef9ecddb1">qd_bounds</link>&#32;=&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ae9100e0cacbed379d5b3aaea2256033a">bounds</link>
<anchor xml:id="_siemens_8py_source_1l00093"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a512e790009360ad66c3b3bdce5493fa5">00093</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a512e790009360ad66c3b3bdce5493fa5">batch_size</link>&#32;=&#32;<emphasis role="keywordtype">None</emphasis>
<anchor xml:id="_siemens_8py_source_1l00094"/>00094 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a97bf8351232cf791ed59ee44fe62897a">reset</link>()
<anchor xml:id="_siemens_8py_source_1l00095"/>00095 
<anchor xml:id="_siemens_8py_source_1l00096"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a97bf8351232cf791ed59ee44fe62897a">00096</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_plant_1a97bf8351232cf791ed59ee44fe62897a">reset</link>(self):
<anchor xml:id="_siemens_8py_source_1l00097"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a23392ca60bd557117771bab5e577f9cb">00097</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a23392ca60bd557117771bab5e577f9cb">machine1</link>&#32;=&#32;<link linkend="_classexamples_1_1siemens_1_1_machine">Machine</link>(0,&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab17655317b87c0ec787a77dc66bff7d6">dtime</link>)
<anchor xml:id="_siemens_8py_source_1l00098"/><link linkend="_classexamples_1_1siemens_1_1_plant_1af8862c8439d7706e47f9902dabfd73a3">00098</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af8862c8439d7706e47f9902dabfd73a3">machine2</link>&#32;=&#32;<link linkend="_classexamples_1_1siemens_1_1_machine">Machine</link>(1,&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab17655317b87c0ec787a77dc66bff7d6">dtime</link>)
<anchor xml:id="_siemens_8py_source_1l00099"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a70b06de080413c95991cb21842647e14">00099</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a70b06de080413c95991cb21842647e14">buffer</link>&#32;=&#32;<link linkend="_classexamples_1_1siemens_1_1_buffer">Buffer</link>()&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00100"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a14e3b22b9af956f9a5c4ef9a74ea6074">00100</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a14e3b22b9af956f9a5c4ef9a74ea6074">count_finished</link>&#32;=&#32;0
<anchor xml:id="_siemens_8py_source_1l00101"/><link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">00101</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">time</link>&#32;=&#32;0
<anchor xml:id="_siemens_8py_source_1l00102"/><link linkend="_classexamples_1_1siemens_1_1_plant_1af64e7c8f379c2aa2d543998a9be8b170">00102</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af64e7c8f379c2aa2d543998a9be8b170">product</link>&#32;=&#32;-1
<anchor xml:id="_siemens_8py_source_1l00103"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a70badb27ace0d8c60d0688d36c69bb84">00103</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a70badb27ace0d8c60d0688d36c69bb84">to_process</link>&#32;=&#32;0&#32;<emphasis role="comment">#&#32;switch&#32;to&#32;product&#32;1&#32;at&#32;the&#32;beginning</emphasis>
<anchor xml:id="_siemens_8py_source_1l00104"/>00104 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00105"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a148ff3ee966131e176d1f8274249fee7">00105</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_plant_1a148ff3ee966131e176d1f8274249fee7">__str__</link>(self):
<anchor xml:id="_siemens_8py_source_1l00106"/>00106 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;f<emphasis role="stringliteral">&apos;{self.time}&#32;{self.machine1}&#32;{self.machine2}&#32;{self.buffer}&#32;{self.count_finished}&apos;</emphasis>&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00107"/>00107 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00108"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a1e32e624120cf855722e347ed941b77f">00108</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_plant_1a1e32e624120cf855722e347ed941b77f">next_product</link>(self):
<anchor xml:id="_siemens_8py_source_1l00109"/>00109 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#return&#32;1</emphasis>
<anchor xml:id="_siemens_8py_source_1l00110"/>00110 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a70badb27ace0d8c60d0688d36c69bb84">to_process</link>&#32;&gt;&#32;0:
<anchor xml:id="_siemens_8py_source_1l00111"/>00111 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a70badb27ace0d8c60d0688d36c69bb84">to_process</link>&#32;-=&#32;1
<anchor xml:id="_siemens_8py_source_1l00112"/>00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>:
<anchor xml:id="_siemens_8py_source_1l00113"/>00113 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;switch&#32;product</emphasis>
<anchor xml:id="_siemens_8py_source_1l00114"/>00114 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af64e7c8f379c2aa2d543998a9be8b170">product</link>&#32;=&#32;(self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af64e7c8f379c2aa2d543998a9be8b170">product</link>&#32;+&#32;1)&#32;%&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a7ef051716b1d967271974422393ba9ce">dim</link>
<anchor xml:id="_siemens_8py_source_1l00115"/>00115 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a70badb27ace0d8c60d0688d36c69bb84">to_process</link>&#32;=&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a512e790009360ad66c3b3bdce5493fa5">batch_size</link>[self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af64e7c8f379c2aa2d543998a9be8b170">product</link>]
<anchor xml:id="_siemens_8py_source_1l00116"/>00116 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00117"/>00117 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af64e7c8f379c2aa2d543998a9be8b170">product</link>&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00118"/>00118 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00119"/><link linkend="_classexamples_1_1siemens_1_1_plant_1ad8b1d9faabe8e2a82ea8eae1e98ce1c5">00119</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_plant_1ad8b1d9faabe8e2a82ea8eae1e98ce1c5">tick</link>(self):
<anchor xml:id="_siemens_8py_source_1l00120"/>00120 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#print(self)</emphasis>
<anchor xml:id="_siemens_8py_source_1l00121"/>00121 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;from&#32;machine&#32;1&#32;to&#32;buffer</emphasis>
<anchor xml:id="_siemens_8py_source_1l00122"/>00122 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a23392ca60bd557117771bab5e577f9cb">machine1</link>.finished(self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">time</link>):
<anchor xml:id="_siemens_8py_source_1l00123"/>00123 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a70b06de080413c95991cb21842647e14">buffer</link>.can_add():
<anchor xml:id="_siemens_8py_source_1l00124"/>00124 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a70b06de080413c95991cb21842647e14">buffer</link>.add(self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a23392ca60bd557117771bab5e577f9cb">machine1</link>.take())
<anchor xml:id="_siemens_8py_source_1l00125"/>00125 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00126"/>00126 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;from&#32;batch&#32;to&#32;machine1&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;</emphasis>
<anchor xml:id="_siemens_8py_source_1l00127"/>00127 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a23392ca60bd557117771bab5e577f9cb">machine1</link>.available(self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">time</link>):
<anchor xml:id="_siemens_8py_source_1l00128"/>00128 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a23392ca60bd557117771bab5e577f9cb">machine1</link>.process(self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">time</link>,&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a1e32e624120cf855722e347ed941b77f">next_product</link>())
<anchor xml:id="_siemens_8py_source_1l00129"/>00129 
<anchor xml:id="_siemens_8py_source_1l00130"/>00130 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;take&#32;from&#32;machine&#32;2&#32;if&#32;ready&#32;&#32;&#32;&#32;</emphasis>
<anchor xml:id="_siemens_8py_source_1l00131"/>00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af8862c8439d7706e47f9902dabfd73a3">machine2</link>.finished(self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">time</link>):
<anchor xml:id="_siemens_8py_source_1l00132"/>00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;product&#32;=&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af8862c8439d7706e47f9902dabfd73a3">machine2</link>.take()
<anchor xml:id="_siemens_8py_source_1l00133"/>00133 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a14e3b22b9af956f9a5c4ef9a74ea6074">count_finished</link>&#32;+=&#32;1
<anchor xml:id="_siemens_8py_source_1l00134"/>00134 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#print(f&apos;finished&#32;{product}&#32;{self.count_finished}&apos;)</emphasis>
<anchor xml:id="_siemens_8py_source_1l00135"/>00135 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00136"/>00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;from&#32;buffer&#32;to&#32;machine2&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;</emphasis>
<anchor xml:id="_siemens_8py_source_1l00137"/>00137 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af8862c8439d7706e47f9902dabfd73a3">machine2</link>.available(self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">time</link>)&#32;<emphasis role="keywordflow">and</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a70b06de080413c95991cb21842647e14">buffer</link>.can_retrieve():
<anchor xml:id="_siemens_8py_source_1l00138"/>00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1af8862c8439d7706e47f9902dabfd73a3">machine2</link>.process(self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">time</link>,&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a70b06de080413c95991cb21842647e14">buffer</link>.retrieve())
<anchor xml:id="_siemens_8py_source_1l00139"/>00139 
<anchor xml:id="_siemens_8py_source_1l00140"/>00140 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">time</link>&#32;+=&#32;1
<anchor xml:id="_siemens_8py_source_1l00141"/>00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00142"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a4570217ffc213f931499ca5ca147819c">00142</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_plant_1a4570217ffc213f931499ca5ca147819c">simulate</link>(self,&#32;all_time,&#32;batch_size):
<anchor xml:id="_siemens_8py_source_1l00143"/>00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a97bf8351232cf791ed59ee44fe62897a">reset</link>()
<anchor xml:id="_siemens_8py_source_1l00144"/>00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a512e790009360ad66c3b3bdce5493fa5">batch_size</link>&#32;=&#32;batch_size
<anchor xml:id="_siemens_8py_source_1l00145"/>00145 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab758b7cd5760565612a24989e308e0c1">time</link>&#32;&lt;&#32;all_time:
<anchor xml:id="_siemens_8py_source_1l00146"/>00146 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ad8b1d9faabe8e2a82ea8eae1e98ce1c5">tick</link>()
<anchor xml:id="_siemens_8py_source_1l00147"/>00147 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a14e3b22b9af956f9a5c4ef9a74ea6074">count_finished</link>
<anchor xml:id="_siemens_8py_source_1l00148"/>00148 
<anchor xml:id="_siemens_8py_source_1l00149"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a65f01129754dfefe1d95b9b44c0a796d">00149</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_plant_1a65f01129754dfefe1d95b9b44c0a796d">simulate_threadsafe</link>(self,&#32;all_time,&#32;batch_size):
<anchor xml:id="_siemens_8py_source_1l00150"/>00150 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;plant&#32;=&#32;<link linkend="_classexamples_1_1siemens_1_1_plant">Plant</link>(self.<link linkend="_classexamples_1_1siemens_1_1_plant_1ab17655317b87c0ec787a77dc66bff7d6">dtime</link>)
<anchor xml:id="_siemens_8py_source_1l00151"/>00151 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;plant.simulate(all_time,&#32;batch_size)
<anchor xml:id="_siemens_8py_source_1l00152"/>00152 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00153"/><link linkend="_classexamples_1_1siemens_1_1_plant_1a3262a8868ef2877018ed63cd77d9c5be">00153</link> &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis><link linkend="_classexamples_1_1siemens_1_1_plant_1a3262a8868ef2877018ed63cd77d9c5be">fitness</link>(self,&#32;x):
<anchor xml:id="_siemens_8py_source_1l00154"/>00154 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;batch_size&#32;=&#32;x.astype(dtype=int)
<anchor xml:id="_siemens_8py_source_1l00155"/>00155 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;count&#32;=&#32;self.<link linkend="_classexamples_1_1siemens_1_1_plant_1a65f01129754dfefe1d95b9b44c0a796d">simulate_threadsafe</link>(60*60*24,&#32;batch_size)
<anchor xml:id="_siemens_8py_source_1l00156"/>00156 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;-count
<anchor xml:id="_siemens_8py_source_1l00157"/>00157 
<anchor xml:id="_siemens_8py_source_1l00158"/><link linkend="_namespaceexamples_1_1siemens_1a67952b8c3871d96f16be3611f304e108">00158</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1siemens_1a67952b8c3871d96f16be3611f304e108">simulate</link>(plant):
<anchor xml:id="_siemens_8py_source_1l00159"/>00159 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">print</emphasis>&#32;(plant.simulate(60*60*24,&#32;[10,&#32;32]))&#32;<emphasis role="comment">#&#32;24&#32;hours</emphasis>
<anchor xml:id="_siemens_8py_source_1l00160"/>00160 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00161"/><link linkend="_namespaceexamples_1_1siemens_1afc870909e46d815101a1a549d8d95c37">00161</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1siemens_1afc870909e46d815101a1a549d8d95c37">optimize_de</link>(plant):&#32;
<anchor xml:id="_siemens_8py_source_1l00162"/>00162 &#32;&#32;&#32;&#32;fit&#32;=&#32;<link linkend="_classfcmaes_1_1optimizer_1_1wrapper">wrapper</link>(plant.fitness)
<anchor xml:id="_siemens_8py_source_1l00163"/>00163 &#32;&#32;&#32;&#32;ret&#32;=&#32;decpp.minimize(fit,&#32;2,&#32;plant.bounds,&#32;max_evaluations=30000,&#32;
<anchor xml:id="_siemens_8py_source_1l00164"/>00164 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;workers=mp.cpu_count(),&#32;ints=[<emphasis role="keyword">True</emphasis>,<emphasis role="keyword">True</emphasis>])
<anchor xml:id="_siemens_8py_source_1l00165"/>00165 
<anchor xml:id="_siemens_8py_source_1l00166"/><link linkend="_namespaceexamples_1_1siemens_1a12e19ccc6d58c1583e69ac1d1e6cd408">00166</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1siemens_1a12e19ccc6d58c1583e69ac1d1e6cd408">optimize_bite</link>(plant):&#32;
<anchor xml:id="_siemens_8py_source_1l00167"/>00167 &#32;&#32;&#32;&#32;fit&#32;=&#32;<link linkend="_classfcmaes_1_1optimizer_1_1wrapper">wrapper</link>(plant.fitness)
<anchor xml:id="_siemens_8py_source_1l00168"/>00168 &#32;&#32;&#32;&#32;store&#32;=&#32;<link linkend="_classfcmaes_1_1retry_1_1_store">retry.Store</link>(fit,&#32;plant.bounds)&#32;
<anchor xml:id="_siemens_8py_source_1l00169"/>00169 &#32;&#32;&#32;&#32;retry.retry(store,&#32;<link linkend="_classfcmaes_1_1optimizer_1_1_bite__cpp">Bite_cpp</link>(500).minimize,&#32;num_retries=64)&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00170"/>00170 &#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1siemens_1aa7e561dd488ae1d3eaedc8f761743f96">plot3d</link>(store,&#32;<emphasis role="stringliteral">&quot;plant&quot;</emphasis>)&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00171"/>00171 &#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00172"/><link linkend="_namespaceexamples_1_1siemens_1aa7e561dd488ae1d3eaedc8f761743f96">00172</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1siemens_1aa7e561dd488ae1d3eaedc8f761743f96">plot3d</link>(store,&#32;name,&#32;xlabel=&apos;batch1&apos;,&#32;ylabel=&apos;batch2&apos;,&#32;zlabel=&apos;number&apos;):
<anchor xml:id="_siemens_8py_source_1l00173"/>00173 &#32;&#32;&#32;&#32;<emphasis role="keyword">import</emphasis>&#32;matplotlib.pyplot&#32;<emphasis role="keyword">as</emphasis>&#32;plt
<anchor xml:id="_siemens_8py_source_1l00174"/>00174 &#32;&#32;&#32;&#32;xs&#32;=&#32;store.get_xs()
<anchor xml:id="_siemens_8py_source_1l00175"/>00175 &#32;&#32;&#32;&#32;ys&#32;=&#32;store.get_ys()&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00176"/>00176 &#32;&#32;&#32;&#32;x&#32;=&#32;xs[:,&#32;0];&#32;y&#32;=&#32;xs[:,&#32;1];&#32;z&#32;=&#32;ys
<anchor xml:id="_siemens_8py_source_1l00177"/>00177 &#32;&#32;&#32;&#32;fig&#32;=&#32;plt.figure()
<anchor xml:id="_siemens_8py_source_1l00178"/>00178 &#32;&#32;&#32;&#32;ax&#32;=&#32;fig.add_subplot()&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00179"/>00179 &#32;&#32;&#32;&#32;img&#32;=&#32;ax.scatter(x,&#32;y,&#32;s=4,&#32;c=z,&#32;cmap=<emphasis role="stringliteral">&apos;rainbow&apos;</emphasis>)
<anchor xml:id="_siemens_8py_source_1l00180"/>00180 &#32;&#32;&#32;&#32;cbar&#32;=&#32;fig.colorbar(img)
<anchor xml:id="_siemens_8py_source_1l00181"/>00181 &#32;&#32;&#32;&#32;plt.xlabel(xlabel)&#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00182"/>00182 &#32;&#32;&#32;&#32;plt.ylabel(ylabel)
<anchor xml:id="_siemens_8py_source_1l00183"/>00183 &#32;&#32;&#32;&#32;cbar.set_label(zlabel)
<anchor xml:id="_siemens_8py_source_1l00184"/>00184 &#32;&#32;&#32;&#32;fig.set_figheight(8)
<anchor xml:id="_siemens_8py_source_1l00185"/>00185 &#32;&#32;&#32;&#32;fig.set_figwidth(8)
<anchor xml:id="_siemens_8py_source_1l00186"/>00186 &#32;&#32;&#32;&#32;fig.savefig(name,&#32;dpi=300)
<anchor xml:id="_siemens_8py_source_1l00187"/>00187 
<anchor xml:id="_siemens_8py_source_1l00188"/>00188 <emphasis role="comment">#&#32;On&#32;machine&#32;1,&#32;product&#32;A&#32;has&#32;a&#32;processing&#32;time&#32;of&#32;10&#32;seconds&#32;and&#32;product&#32;B&#32;has&#32;a&#32;processing&#32;time&#32;of&#32;20&#32;seconds.</emphasis>
<anchor xml:id="_siemens_8py_source_1l00189"/>00189 <emphasis role="comment">#&#32;On&#32;machine&#32;2,&#32;product&#32;A&#32;has&#32;a&#32;production&#32;time&#32;of&#32;25&#32;seconds&#32;and&#32;product&#32;B&#32;has&#32;a&#32;processing&#32;time&#32;of&#32;15&#32;seconds.&#32;&#32;&#32;&#32;&#32;&#32;&#32;</emphasis>
<anchor xml:id="_siemens_8py_source_1l00190"/>00190 
<anchor xml:id="_siemens_8py_source_1l00191"/><link linkend="_namespaceexamples_1_1siemens_1add8affd4a1b1a45e1709d86ac89bfa54">00191</link> dtime_orig&#32;=&#32;np.array(
<anchor xml:id="_siemens_8py_source_1l00192"/>00192 &#32;&#32;&#32;&#32;[[10,&#32;20],
<anchor xml:id="_siemens_8py_source_1l00193"/>00193 &#32;&#32;&#32;&#32;&#32;[25,&#32;15]]&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00194"/>00194 &#32;&#32;&#32;&#32;)
<anchor xml:id="_siemens_8py_source_1l00195"/>00195 
<anchor xml:id="_siemens_8py_source_1l00196"/><link linkend="_namespaceexamples_1_1siemens_1a3e43412b000c273dd90c6c320e058507">00196</link> dtime_2&#32;=&#32;np.array(
<anchor xml:id="_siemens_8py_source_1l00197"/>00197 &#32;&#32;&#32;&#32;[[10,&#32;20,&#32;13,&#32;23,&#32;12],
<anchor xml:id="_siemens_8py_source_1l00198"/>00198 &#32;&#32;&#32;&#32;&#32;[25,&#32;15,&#32;23,&#32;17,&#32;19]]&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00199"/>00199 &#32;&#32;&#32;&#32;)
<anchor xml:id="_siemens_8py_source_1l00200"/>00200 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00201"/><link linkend="_namespaceexamples_1_1siemens_1ac5b4f4a9b78a88fca87ea4452adbf0dc">00201</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1siemens_1ac5b4f4a9b78a88fca87ea4452adbf0dc">main</link>():
<anchor xml:id="_siemens_8py_source_1l00202"/>00202 &#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1siemens_1a12e19ccc6d58c1583e69ac1d1e6cd408">optimize_bite</link>(<link linkend="_classexamples_1_1siemens_1_1_plant">Plant</link>(dtime_orig))
<anchor xml:id="_siemens_8py_source_1l00203"/>00203 &#32;&#32;&#32;&#32;<emphasis role="comment">#optimize_de(Plant(dtime_orig))</emphasis>
<anchor xml:id="_siemens_8py_source_1l00204"/>00204 &#32;&#32;&#32;&#32;<emphasis role="comment">#simulate(Plant(dtime_orig))</emphasis>
<anchor xml:id="_siemens_8py_source_1l00205"/>00205 &#32;&#32;&#32;&#32;
<anchor xml:id="_siemens_8py_source_1l00206"/>00206 <emphasis role="keywordflow">if</emphasis>&#32;__name__&#32;==&#32;<emphasis role="stringliteral">&apos;__main__&apos;</emphasis>:
<anchor xml:id="_siemens_8py_source_1l00207"/>00207 &#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1siemens_1ac5b4f4a9b78a88fca87ea4452adbf0dc">main</link>()
</programlisting></section>

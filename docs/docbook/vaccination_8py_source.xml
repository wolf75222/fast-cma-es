<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_vaccination_8py_source" xml:lang="en-US">
<title>vaccination.py</title>
<indexterm><primary>examples/vaccination.py</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_vaccination_8py_source_1l00001"/><link linkend="_namespaceexamples_1_1vaccination">00001</link> <emphasis role="comment">#&#32;Adapted&#32;from:</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00002"/>00002 <emphasis role="comment">#</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00003"/>00003 <emphasis role="comment">#&#32;*Modeling&#32;and&#32;Simulation&#32;in&#32;Python*</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00004"/>00004 <emphasis role="comment">#&#32;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00005"/>00005 <emphasis role="comment">#&#32;Copyright&#32;2021&#32;Allen&#32;Downey</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00006"/>00006 <emphasis role="comment">#&#32;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00007"/>00007 <emphasis role="comment">#&#32;https://github.com/AllenDowney/ModSimPy/blob/master/examples/plague.ipynb</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00008"/>00008 <emphasis role="comment">#&#32;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00009"/>00009 <emphasis role="comment">#&#32;License:&#32;[Creative&#32;Commons&#32;Attribution-NonCommercial-ShareAlike&#32;4.0&#32;International]</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00010"/>00010 <emphasis role="comment">#&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;(https://creativecommons.org/licenses/by-nc-sa/4.0/)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00011"/>00011 <emphasis role="comment">#&#32;Only&#32;non-commercial&#32;use&#32;permitted!</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00012"/>00012 <emphasis role="comment">#</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00013"/>00013 <emphasis role="comment">#&#32;See&#32;https://github.com/dietmarwo/fast-cma-es/blob/master/tutorials/Vaccination.adoc&#32;for&#32;a&#32;detailed&#32;description.</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00014"/>00014 <emphasis role="comment">#&#32;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00015"/>00015 <emphasis role="comment">#&#32;Tested&#32;using&#32;https://docs.conda.io/en/main/miniconda.html&#32;on&#32;Linux&#32;Mint&#32;21.</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00016"/>00016 
<anchor xml:id="_vaccination_8py_source_1l00017"/>00017 <emphasis role="keyword">import</emphasis>&#32;matplotlib.pyplot&#32;<emphasis role="keyword">as</emphasis>&#32;plt
<anchor xml:id="_vaccination_8py_source_1l00018"/>00018 <emphasis role="keyword">import</emphasis>&#32;numpy&#32;<emphasis role="keyword">as</emphasis>&#32;np&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00019"/>00019 <emphasis role="keyword">from</emphasis>&#32;numpy&#32;<emphasis role="keyword">import</emphasis>&#32;linspace,&#32;exp
<anchor xml:id="_vaccination_8py_source_1l00020"/>00020 <emphasis role="keyword">import</emphasis>&#32;pandas&#32;<emphasis role="keyword">as</emphasis>&#32;pd&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00021"/>00021 <emphasis role="keyword">from</emphasis>&#32;numba&#32;<emphasis role="keyword">import</emphasis>&#32;njit,&#32;numba
<anchor xml:id="_vaccination_8py_source_1l00022"/>00022 <emphasis role="keyword">import</emphasis>&#32;sys
<anchor xml:id="_vaccination_8py_source_1l00023"/>00023 
<anchor xml:id="_vaccination_8py_source_1l00024"/>00024 <emphasis role="keyword">import</emphasis>&#32;sys&#32;
<anchor xml:id="_vaccination_8py_source_1l00025"/>00025 <emphasis role="keyword">from</emphasis>&#32;loguru&#32;<emphasis role="keyword">import</emphasis>&#32;logger
<anchor xml:id="_vaccination_8py_source_1l00026"/>00026 
<anchor xml:id="_vaccination_8py_source_1l00027"/>00027 logger.remove()
<anchor xml:id="_vaccination_8py_source_1l00028"/><link linkend="_namespaceexamples_1_1vaccination_1ab819fa350d6d8da1c32ea4796cccc218">00028</link> logger.add(sys.stdout,&#32;format=<emphasis role="stringliteral">&quot;{time:HH:mm:ss.SS}&#32;|&#32;{process}&#32;|&#32;{level}&#32;|&#32;{message}&quot;</emphasis>,&#32;level=<emphasis role="stringliteral">&quot;INFO&quot;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00029"/>00029 logger.add(<emphasis role="stringliteral">&quot;log_{time}.txt&quot;</emphasis>,&#32;format=<emphasis role="stringliteral">&quot;{time:HH:mm:ss.SS}&#32;|&#32;{process}&#32;|&#32;{level}&#32;|&#32;{message}&quot;</emphasis>,&#32;level=<emphasis role="stringliteral">&quot;INFO&quot;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00030"/>00030 
<anchor xml:id="_vaccination_8py_source_1l00031"/>00031 <emphasis role="preprocessor">@njit(fastmath=True)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00032"/><link linkend="_namespaceexamples_1_1vaccination_1a1920e929d3fa9a04e2deabddd1c670c4">00032</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1vaccination_1a1920e929d3fa9a04e2deabddd1c670c4">fast_update</link>(s,&#32;i,&#32;r,&#32;beta,&#32;gamma):
<anchor xml:id="_vaccination_8py_source_1l00033"/>00033 &#32;&#32;&#32;&#32;infected&#32;=&#32;beta&#32;*&#32;i&#32;*&#32;s&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00034"/>00034 &#32;&#32;&#32;&#32;recovered&#32;=&#32;gamma&#32;*&#32;i&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00035"/>00035 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;s&#32;-&#32;infected,&#32;i&#32;+&#32;infected&#32;-&#32;recovered,&#32;r&#32;+&#32;recovered
<anchor xml:id="_vaccination_8py_source_1l00036"/>00036 
<anchor xml:id="_vaccination_8py_source_1l00037"/>00037 <emphasis role="preprocessor">@njit(fastmath=True)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00038"/><link linkend="_namespaceexamples_1_1vaccination_1a4bdddac30a6306570a020bcc149340c1">00038</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1vaccination_1a4bdddac30a6306570a020bcc149340c1">fast_simulate</link>(s,&#32;i,&#32;r,&#32;t_end,&#32;beta,&#32;gamma):
<anchor xml:id="_vaccination_8py_source_1l00039"/>00039 &#32;&#32;&#32;&#32;sa&#32;=&#32;np.empty(t_end+1)
<anchor xml:id="_vaccination_8py_source_1l00040"/>00040 &#32;&#32;&#32;&#32;ia&#32;=&#32;np.empty(t_end+1)
<anchor xml:id="_vaccination_8py_source_1l00041"/>00041 &#32;&#32;&#32;&#32;ra&#32;=&#32;np.empty(t_end+1)
<anchor xml:id="_vaccination_8py_source_1l00042"/>00042 &#32;&#32;&#32;&#32;sa[0]&#32;=&#32;s
<anchor xml:id="_vaccination_8py_source_1l00043"/>00043 &#32;&#32;&#32;&#32;ia[0]&#32;=&#32;i
<anchor xml:id="_vaccination_8py_source_1l00044"/>00044 &#32;&#32;&#32;&#32;ra[0]&#32;=&#32;r
<anchor xml:id="_vaccination_8py_source_1l00045"/>00045 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;t&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(1,&#32;t_end+1):
<anchor xml:id="_vaccination_8py_source_1l00046"/>00046 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s,&#32;i,&#32;r&#32;=&#32;<link linkend="_namespaceexamples_1_1vaccination_1a1920e929d3fa9a04e2deabddd1c670c4">fast_update</link>(s,&#32;i,&#32;r,&#32;beta,&#32;gamma)
<anchor xml:id="_vaccination_8py_source_1l00047"/>00047 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;sa[t]&#32;=&#32;s
<anchor xml:id="_vaccination_8py_source_1l00048"/>00048 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ia[t]&#32;=&#32;i
<anchor xml:id="_vaccination_8py_source_1l00049"/>00049 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ra[t]&#32;=&#32;r
<anchor xml:id="_vaccination_8py_source_1l00050"/>00050 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;sa,&#32;ia,&#32;ra&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00051"/>00051 
<anchor xml:id="_vaccination_8py_source_1l00052"/>00052 <emphasis role="preprocessor">@njit(fastmath=True)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00053"/><link linkend="_namespaceexamples_1_1vaccination_1ac2534a94f3c4080fcb6f39b4abcfb86e">00053</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1vaccination_1ac2534a94f3c4080fcb6f39b4abcfb86e">fast_simulate_last</link>(s,&#32;i,&#32;r,&#32;t_end,&#32;beta,&#32;gamma):
<anchor xml:id="_vaccination_8py_source_1l00054"/>00054 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;t&#32;<emphasis role="keywordflow">in</emphasis>&#32;range(0,&#32;t_end):
<anchor xml:id="_vaccination_8py_source_1l00055"/>00055 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s,&#32;i,&#32;r&#32;=&#32;<link linkend="_namespaceexamples_1_1vaccination_1a1920e929d3fa9a04e2deabddd1c670c4">fast_update</link>(s,&#32;i,&#32;r,&#32;beta,&#32;gamma)
<anchor xml:id="_vaccination_8py_source_1l00056"/>00056 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;s,&#32;i,&#32;r&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00057"/>00057 
<anchor xml:id="_vaccination_8py_source_1l00058"/><link linkend="_namespaceexamples_1_1vaccination_1a04a9f847b51fc09ecae12cb503754524">00058</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1vaccination_1a04a9f847b51fc09ecae12cb503754524">plot2d</link>(xs,&#32;ys,&#32;name):
<anchor xml:id="_vaccination_8py_source_1l00059"/>00059 &#32;&#32;&#32;&#32;y1&#32;=&#32;ys[:,&#32;0];&#32;y2&#32;=&#32;ys[:,&#32;1];&#32;x1&#32;=&#32;xs[:,&#32;0];&#32;x2&#32;=&#32;xs[:,&#32;1];
<anchor xml:id="_vaccination_8py_source_1l00060"/>00060 &#32;&#32;&#32;&#32;print(<emphasis role="stringliteral">&apos;size&#32;of&#32;pareto&#32;front&apos;</emphasis>,&#32;len(y1))
<anchor xml:id="_vaccination_8py_source_1l00061"/>00061 &#32;&#32;&#32;&#32;fig&#32;=&#32;plt.figure()
<anchor xml:id="_vaccination_8py_source_1l00062"/>00062 &#32;&#32;&#32;&#32;<emphasis role="comment">#ax&#32;=&#32;fig.add_subplot(projection=&apos;3d&apos;)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00063"/>00063 &#32;&#32;&#32;&#32;ax&#32;=&#32;fig.add_subplot()&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00064"/>00064 &#32;&#32;&#32;&#32;colors&#32;=&#32;[<emphasis role="stringliteral">&apos;#5c9eb7&apos;</emphasis>,<emphasis role="stringliteral">&apos;#f77199&apos;</emphasis>,<emphasis role="stringliteral">&apos;#cf81d2&apos;</emphasis>,<emphasis role="stringliteral">&apos;#4a5e6a&apos;</emphasis>,<emphasis role="stringliteral">&apos;#f45b18&apos;</emphasis>]
<anchor xml:id="_vaccination_8py_source_1l00065"/>00065 &#32;&#32;&#32;&#32;plt.xlabel(<emphasis role="stringliteral">&apos;infection&#32;rate&apos;</emphasis>)&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00066"/>00066 &#32;&#32;&#32;&#32;plt.ylabel(<emphasis role="stringliteral">&apos;spending&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00067"/>00067 &#32;&#32;&#32;&#32;ax.scatter(y1,&#32;x1,&#32;s=4,&#32;c=colors[1],&#32;label=<emphasis role="stringliteral">&apos;vaccination&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00068"/>00068 &#32;&#32;&#32;&#32;ax.scatter(y1,&#32;x2,&#32;s=4,&#32;c=colors[2],&#32;label=<emphasis role="stringliteral">&apos;campaign&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00069"/>00069 &#32;&#32;&#32;&#32;ax.scatter(y1,&#32;y2,&#32;s=4,&#32;c=colors[0],&#32;label=<emphasis role="stringliteral">&apos;sum&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00070"/>00070 &#32;&#32;&#32;&#32;plt.legend()
<anchor xml:id="_vaccination_8py_source_1l00071"/>00071 &#32;&#32;&#32;&#32;<emphasis role="comment">#plt.grid(True,&#32;linestyle=&apos;dashed&apos;)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00072"/>00072 &#32;&#32;&#32;&#32;major_xticks&#32;=&#32;np.linspace(0.05,&#32;0.5,&#32;10)
<anchor xml:id="_vaccination_8py_source_1l00073"/>00073 &#32;&#32;&#32;&#32;minor_xticks&#32;=&#32;np.linspace(0.05,&#32;0.5,&#32;46)
<anchor xml:id="_vaccination_8py_source_1l00074"/>00074 &#32;&#32;&#32;&#32;major_yticks&#32;=&#32;np.linspace(0,&#32;2400,&#32;13)
<anchor xml:id="_vaccination_8py_source_1l00075"/>00075 &#32;&#32;&#32;&#32;minor_yticks&#32;=&#32;np.linspace(0,&#32;2400,&#32;61)
<anchor xml:id="_vaccination_8py_source_1l00076"/>00076 
<anchor xml:id="_vaccination_8py_source_1l00077"/>00077 &#32;&#32;&#32;&#32;ax.set_xticks(major_xticks)
<anchor xml:id="_vaccination_8py_source_1l00078"/>00078 &#32;&#32;&#32;&#32;ax.set_xticks(minor_xticks,&#32;minor=<emphasis role="keyword">True</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00079"/>00079 &#32;&#32;&#32;&#32;ax.set_yticks(major_yticks)
<anchor xml:id="_vaccination_8py_source_1l00080"/>00080 &#32;&#32;&#32;&#32;ax.set_yticks(minor_yticks,&#32;minor=<emphasis role="keyword">True</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00081"/>00081 &#32;&#32;&#32;&#32;ax.grid(which=<emphasis role="stringliteral">&apos;major&apos;</emphasis>,&#32;color=<emphasis role="stringliteral">&apos;#CCCCCC&apos;</emphasis>,&#32;linestyle=<emphasis role="stringliteral">&apos;--&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00082"/>00082 &#32;&#32;&#32;&#32;ax.grid(which=<emphasis role="stringliteral">&apos;minor&apos;</emphasis>,&#32;color=<emphasis role="stringliteral">&apos;#CCCCCC&apos;</emphasis>,&#32;linestyle=<emphasis role="stringliteral">&apos;:&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00083"/>00083 &#32;&#32;&#32;&#32;fig.set_figheight(8)
<anchor xml:id="_vaccination_8py_source_1l00084"/>00084 &#32;&#32;&#32;&#32;fig.set_figwidth(8)
<anchor xml:id="_vaccination_8py_source_1l00085"/>00085 &#32;&#32;&#32;&#32;fig.savefig(name,&#32;dpi=300)
<anchor xml:id="_vaccination_8py_source_1l00086"/>00086 
<anchor xml:id="_vaccination_8py_source_1l00087"/><link linkend="_namespaceexamples_1_1vaccination_1abfaa852a18035e621672746cdeb09aac">00087</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1vaccination_1abfaa852a18035e621672746cdeb09aac">plot3d</link>(xs,&#32;ys,&#32;name):
<anchor xml:id="_vaccination_8py_source_1l00088"/>00088 &#32;&#32;&#32;&#32;x&#32;=&#32;ys[:,&#32;0];&#32;y&#32;=&#32;ys[:,&#32;1];&#32;z&#32;=&#32;ys[:,&#32;2]
<anchor xml:id="_vaccination_8py_source_1l00089"/>00089 &#32;&#32;&#32;&#32;fig&#32;=&#32;plt.figure()
<anchor xml:id="_vaccination_8py_source_1l00090"/>00090 &#32;&#32;&#32;&#32;<emphasis role="comment">#ax&#32;=&#32;fig.add_subplot(projection=&apos;3d&apos;)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00091"/>00091 &#32;&#32;&#32;&#32;ax&#32;=&#32;fig.add_subplot()&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00092"/>00092 &#32;&#32;&#32;&#32;img&#32;=&#32;ax.scatter(x,&#32;y,&#32;s=4,&#32;c=z,&#32;cmap=plt.hot())
<anchor xml:id="_vaccination_8py_source_1l00093"/>00093 &#32;&#32;&#32;&#32;cbar&#32;=&#32;fig.colorbar(img)
<anchor xml:id="_vaccination_8py_source_1l00094"/>00094 &#32;&#32;&#32;&#32;plt.xlabel(<emphasis role="stringliteral">&apos;infection&#32;rate&apos;</emphasis>)&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00095"/>00095 &#32;&#32;&#32;&#32;plt.ylabel(<emphasis role="stringliteral">&apos;spending&#32;vaccination&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00096"/>00096 &#32;&#32;&#32;&#32;cbar.set_label(<emphasis role="stringliteral">&apos;spending&#32;campaign&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00097"/>00097 &#32;&#32;&#32;&#32;fig.set_figheight(8)
<anchor xml:id="_vaccination_8py_source_1l00098"/>00098 &#32;&#32;&#32;&#32;fig.set_figwidth(8)
<anchor xml:id="_vaccination_8py_source_1l00099"/>00099 &#32;&#32;&#32;&#32;fig.savefig(name,&#32;dpi=300)
<anchor xml:id="_vaccination_8py_source_1l00100"/>00100 
<anchor xml:id="_vaccination_8py_source_1l00101"/>00101 &#32;&#32;&#32;&#32;<emphasis role="keyword">import</emphasis>&#32;plotly
<anchor xml:id="_vaccination_8py_source_1l00102"/>00102 &#32;&#32;&#32;&#32;<emphasis role="keyword">import</emphasis>&#32;plotly.graph_objs&#32;<emphasis role="keyword">as</emphasis>&#32;go
<anchor xml:id="_vaccination_8py_source_1l00103"/>00103 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00104"/>00104 &#32;&#32;&#32;&#32;fig1&#32;=&#32;go.Scatter3d(x=x,
<anchor xml:id="_vaccination_8py_source_1l00105"/>00105 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;y=y,
<anchor xml:id="_vaccination_8py_source_1l00106"/>00106 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;z=z,
<anchor xml:id="_vaccination_8py_source_1l00107"/>00107 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;marker=dict(opacity=0.9,
<anchor xml:id="_vaccination_8py_source_1l00108"/>00108 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;reversescale=<emphasis role="keyword">True</emphasis>,
<anchor xml:id="_vaccination_8py_source_1l00109"/>00109 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;colorscale=<emphasis role="stringliteral">&apos;Blues&apos;</emphasis>,
<anchor xml:id="_vaccination_8py_source_1l00110"/>00110 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;size=5),
<anchor xml:id="_vaccination_8py_source_1l00111"/>00111 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;line=dict&#32;(width=0.02),
<anchor xml:id="_vaccination_8py_source_1l00112"/>00112 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;mode=<emphasis role="stringliteral">&apos;markers&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00113"/>00113 &#32;&#32;&#32;&#32;mylayout&#32;=&#32;go.Layout(scene=dict(
<anchor xml:id="_vaccination_8py_source_1l00114"/>00114 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;xaxis=dict(title=<emphasis role="stringliteral">&quot;infection&#32;rate&quot;</emphasis>),
<anchor xml:id="_vaccination_8py_source_1l00115"/>00115 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;yaxis=dict(&#32;title=<emphasis role="stringliteral">&quot;spending&#32;vaccination&quot;</emphasis>),
<anchor xml:id="_vaccination_8py_source_1l00116"/>00116 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;zaxis=dict(&#32;title=<emphasis role="stringliteral">&quot;spending&#32;campaign&quot;</emphasis>),
<anchor xml:id="_vaccination_8py_source_1l00117"/>00117 &#32;&#32;&#32;&#32;),)
<anchor xml:id="_vaccination_8py_source_1l00118"/>00118 &#32;&#32;&#32;&#32;plotly.offline.plot({<emphasis role="stringliteral">&quot;data&quot;</emphasis>:&#32;[fig1],
<anchor xml:id="_vaccination_8py_source_1l00119"/>00119 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="stringliteral">&quot;layout&quot;</emphasis>:&#32;mylayout},
<anchor xml:id="_vaccination_8py_source_1l00120"/>00120 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;auto_open=<emphasis role="keyword">True</emphasis>,
<anchor xml:id="_vaccination_8py_source_1l00121"/>00121 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;filename=(<emphasis role="stringliteral">&quot;3DPlot.html&quot;</emphasis>))
<anchor xml:id="_vaccination_8py_source_1l00122"/>00122 &#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00123"/><link linkend="_namespaceexamples_1_1vaccination_1af4244c8872144d2e8cf4265b60f90b34">00123</link> <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespaceexamples_1_1vaccination_1af4244c8872144d2e8cf4265b60f90b34">execute</link>(task):
<anchor xml:id="_vaccination_8py_source_1l00124"/>00124 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00125"/>00125 &#32;&#32;&#32;&#32;SimpleNamespace&#32;=&#32;type(sys.implementation)
<anchor xml:id="_vaccination_8py_source_1l00126"/>00126 
<anchor xml:id="_vaccination_8py_source_1l00127"/>00127 &#32;&#32;&#32;&#32;<emphasis role="keyword">class&#32;</emphasis>SettableNamespace(SimpleNamespace):
<anchor xml:id="_vaccination_8py_source_1l00128"/>00128 &#32;
<anchor xml:id="_vaccination_8py_source_1l00129"/>00129 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>__init__(self,&#32;namespace=None,&#32;**kwargs):
<anchor xml:id="_vaccination_8py_source_1l00130"/>00130 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;super().__init__()
<anchor xml:id="_vaccination_8py_source_1l00131"/>00131 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;namespace:
<anchor xml:id="_vaccination_8py_source_1l00132"/>00132 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.__dict__.update(namespace.__dict__)
<anchor xml:id="_vaccination_8py_source_1l00133"/>00133 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.__dict__.update(kwargs)
<anchor xml:id="_vaccination_8py_source_1l00134"/>00134 &#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00135"/>00135 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>get(self,&#32;name,&#32;default=None):
<anchor xml:id="_vaccination_8py_source_1l00136"/>00136 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">try</emphasis>:
<anchor xml:id="_vaccination_8py_source_1l00137"/>00137 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;self.__getattribute__(name,&#32;default)
<anchor xml:id="_vaccination_8py_source_1l00138"/>00138 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">except</emphasis>&#32;AttributeError:
<anchor xml:id="_vaccination_8py_source_1l00139"/>00139 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;default
<anchor xml:id="_vaccination_8py_source_1l00140"/>00140 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00141"/>00141 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>set(self,&#32;**variables):
<anchor xml:id="_vaccination_8py_source_1l00142"/>00142 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;new&#32;=&#32;copy(self)
<anchor xml:id="_vaccination_8py_source_1l00143"/>00143 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;new.__dict__.update(variables)
<anchor xml:id="_vaccination_8py_source_1l00144"/>00144 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;new
<anchor xml:id="_vaccination_8py_source_1l00145"/>00145 
<anchor xml:id="_vaccination_8py_source_1l00146"/>00146 &#32;&#32;&#32;&#32;<emphasis role="keyword">class&#32;</emphasis>System(SettableNamespace):
<anchor xml:id="_vaccination_8py_source_1l00147"/>00147 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">pass</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00148"/>00148 &#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00149"/>00149 &#32;&#32;&#32;&#32;<emphasis role="keyword">class&#32;</emphasis>Params(SettableNamespace):
<anchor xml:id="_vaccination_8py_source_1l00150"/>00150 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">pass</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00151"/>00151 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00152"/>00152 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>State(**variables):
<anchor xml:id="_vaccination_8py_source_1l00153"/>00153 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;pd.Series(variables,&#32;name=<emphasis role="stringliteral">&apos;state&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00154"/>00154 
<anchor xml:id="_vaccination_8py_source_1l00155"/>00155 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>TimeSeries(*args,&#32;**kwargs):
<anchor xml:id="_vaccination_8py_source_1l00156"/>00156 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;args&#32;<emphasis role="keywordflow">or</emphasis>&#32;kwargs:
<anchor xml:id="_vaccination_8py_source_1l00157"/>00157 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series&#32;=&#32;pd.Series(*args,&#32;**kwargs)
<anchor xml:id="_vaccination_8py_source_1l00158"/>00158 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>:
<anchor xml:id="_vaccination_8py_source_1l00159"/>00159 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series&#32;=&#32;pd.Series([],&#32;dtype=np.float64)
<anchor xml:id="_vaccination_8py_source_1l00160"/>00160 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00161"/>00161 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series.index.name&#32;=&#32;<emphasis role="stringliteral">&apos;Time&apos;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00162"/>00162 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;<emphasis role="stringliteral">&apos;name&apos;</emphasis>&#32;<emphasis role="keywordflow">not</emphasis>&#32;<emphasis role="keywordflow">in</emphasis>&#32;kwargs:
<anchor xml:id="_vaccination_8py_source_1l00163"/>00163 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series.name&#32;=&#32;<emphasis role="stringliteral">&apos;Quantity&apos;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00164"/>00164 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;series
<anchor xml:id="_vaccination_8py_source_1l00165"/>00165 &#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00166"/>00166 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>SweepSeries(*args,&#32;**kwargs):
<anchor xml:id="_vaccination_8py_source_1l00167"/>00167 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;args&#32;<emphasis role="keywordflow">or</emphasis>&#32;kwargs:
<anchor xml:id="_vaccination_8py_source_1l00168"/>00168 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series&#32;=&#32;pd.Series(*args,&#32;**kwargs)
<anchor xml:id="_vaccination_8py_source_1l00169"/>00169 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>:
<anchor xml:id="_vaccination_8py_source_1l00170"/>00170 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series&#32;=&#32;pd.Series([],&#32;dtype=np.float64)
<anchor xml:id="_vaccination_8py_source_1l00171"/>00171 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00172"/>00172 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series.index.name&#32;=&#32;<emphasis role="stringliteral">&apos;Parameter&apos;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00173"/>00173 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;<emphasis role="stringliteral">&apos;name&apos;</emphasis>&#32;<emphasis role="keywordflow">not</emphasis>&#32;<emphasis role="keywordflow">in</emphasis>&#32;kwargs:
<anchor xml:id="_vaccination_8py_source_1l00174"/>00174 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series.name&#32;=&#32;<emphasis role="stringliteral">&apos;Metric&apos;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00175"/>00175 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;series
<anchor xml:id="_vaccination_8py_source_1l00176"/>00176 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00177"/>00177 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>make_series(x,&#32;y,&#32;**options):
<anchor xml:id="_vaccination_8py_source_1l00178"/>00178 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;underride(options,&#32;name=<emphasis role="stringliteral">&apos;values&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00179"/>00179 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;isinstance(y,&#32;pd.Series):
<anchor xml:id="_vaccination_8py_source_1l00180"/>00180 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;y&#32;=&#32;y.values
<anchor xml:id="_vaccination_8py_source_1l00181"/>00181 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series&#32;=&#32;pd.Series(y,&#32;index=x,&#32;**options)
<anchor xml:id="_vaccination_8py_source_1l00182"/>00182 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;series.index.name&#32;=&#32;<emphasis role="stringliteral">&apos;index&apos;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00183"/>00183 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;series
<anchor xml:id="_vaccination_8py_source_1l00184"/>00184 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00185"/>00185 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>underride(d,&#32;**options):
<anchor xml:id="_vaccination_8py_source_1l00186"/>00186 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;d&#32;<emphasis role="keywordflow">is</emphasis>&#32;<emphasis role="keywordtype">None</emphasis>:
<anchor xml:id="_vaccination_8py_source_1l00187"/>00187 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;d&#32;=&#32;{}&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00188"/>00188 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;key,&#32;val&#32;<emphasis role="keywordflow">in</emphasis>&#32;options.items():
<anchor xml:id="_vaccination_8py_source_1l00189"/>00189 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;d.setdefault(key,&#32;val)
<anchor xml:id="_vaccination_8py_source_1l00190"/>00190 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;d
<anchor xml:id="_vaccination_8py_source_1l00191"/>00191 
<anchor xml:id="_vaccination_8py_source_1l00192"/>00192 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>decorate(**options):
<anchor xml:id="_vaccination_8py_source_1l00193"/>00193 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax&#32;=&#32;plt.gca()
<anchor xml:id="_vaccination_8py_source_1l00194"/>00194 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax.set(**options)
<anchor xml:id="_vaccination_8py_source_1l00195"/>00195 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;handles,&#32;labels&#32;=&#32;ax.get_legend_handles_labels()
<anchor xml:id="_vaccination_8py_source_1l00196"/>00196 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;handles:
<anchor xml:id="_vaccination_8py_source_1l00197"/>00197 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ax.legend(handles,&#32;labels)
<anchor xml:id="_vaccination_8py_source_1l00198"/>00198 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;plt.tight_layout()
<anchor xml:id="_vaccination_8py_source_1l00199"/>00199 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00200"/>00200 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>linrange(start,&#32;stop=None,&#32;step=1,&#32;**options):
<anchor xml:id="_vaccination_8py_source_1l00201"/>00201 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;stop&#32;<emphasis role="keywordflow">is</emphasis>&#32;<emphasis role="keywordtype">None</emphasis>:
<anchor xml:id="_vaccination_8py_source_1l00202"/>00202 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;stop&#32;=&#32;start
<anchor xml:id="_vaccination_8py_source_1l00203"/>00203 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;start&#32;=&#32;0
<anchor xml:id="_vaccination_8py_source_1l00204"/>00204 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;n&#32;=&#32;int(round((stop-start)&#32;/&#32;step))
<anchor xml:id="_vaccination_8py_source_1l00205"/>00205 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;linspace(start,&#32;stop,&#32;n+1,&#32;**options)
<anchor xml:id="_vaccination_8py_source_1l00206"/>00206 
<anchor xml:id="_vaccination_8py_source_1l00207"/>00207 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>TimeFrame(*args,&#32;**kwargs):
<anchor xml:id="_vaccination_8py_source_1l00208"/>00208 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;underride(kwargs,&#32;dtype=float)
<anchor xml:id="_vaccination_8py_source_1l00209"/>00209 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;pd.DataFrame(*args,&#32;**kwargs)
<anchor xml:id="_vaccination_8py_source_1l00210"/>00210 
<anchor xml:id="_vaccination_8py_source_1l00211"/>00211 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>make_system(beta,&#32;gamma):
<anchor xml:id="_vaccination_8py_source_1l00212"/>00212 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;init&#32;=&#32;State(s=89,&#32;i=1,&#32;r=0)
<anchor xml:id="_vaccination_8py_source_1l00213"/>00213 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;init&#32;/=&#32;init.sum()
<anchor xml:id="_vaccination_8py_source_1l00214"/>00214 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;System(init=init,&#32;t_end=7*14,
<anchor xml:id="_vaccination_8py_source_1l00215"/>00215 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;beta=beta,&#32;gamma=gamma)
<anchor xml:id="_vaccination_8py_source_1l00216"/>00216 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00217"/>00217 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>update_func(t,&#32;state,&#32;system):
<anchor xml:id="_vaccination_8py_source_1l00218"/>00218 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s,&#32;i,&#32;r&#32;=&#32;state.s,&#32;state.i,&#32;state.r
<anchor xml:id="_vaccination_8py_source_1l00219"/>00219 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;infected&#32;=&#32;system.beta&#32;*&#32;i&#32;*&#32;s&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00220"/>00220 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;recovered&#32;=&#32;system.gamma&#32;*&#32;i
<anchor xml:id="_vaccination_8py_source_1l00221"/>00221 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s&#32;-=&#32;infected
<anchor xml:id="_vaccination_8py_source_1l00222"/>00222 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;i&#32;+=&#32;infected&#32;-&#32;recovered
<anchor xml:id="_vaccination_8py_source_1l00223"/>00223 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;r&#32;+=&#32;recovered&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00224"/>00224 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;State(s=s,&#32;i=i,&#32;r=r)
<anchor xml:id="_vaccination_8py_source_1l00225"/>00225 
<anchor xml:id="_vaccination_8py_source_1l00226"/>00226 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>plot_results(S,&#32;I,&#32;R):
<anchor xml:id="_vaccination_8py_source_1l00227"/>00227 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;S.plot(style=<emphasis role="stringliteral">&apos;--&apos;</emphasis>,&#32;label=<emphasis role="stringliteral">&apos;Susceptible&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00228"/>00228 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;I.plot(style=<emphasis role="stringliteral">&apos;-&apos;</emphasis>,&#32;label=<emphasis role="stringliteral">&apos;Infected&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00229"/>00229 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;R.plot(style=<emphasis role="stringliteral">&apos;:&apos;</emphasis>,&#32;label=<emphasis role="stringliteral">&apos;Resistant&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00230"/>00230 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;decorate(xlabel=<emphasis role="stringliteral">&apos;Time&#32;(days)&apos;</emphasis>,
<anchor xml:id="_vaccination_8py_source_1l00231"/>00231 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;ylabel=<emphasis role="stringliteral">&apos;Fraction&#32;of&#32;population&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00232"/>00232 
<anchor xml:id="_vaccination_8py_source_1l00233"/>00233 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>run_simulation(system,&#32;update_func):
<anchor xml:id="_vaccination_8py_source_1l00234"/>00234 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;frame&#32;=&#32;TimeFrame(columns=system.init.index)
<anchor xml:id="_vaccination_8py_source_1l00235"/>00235 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;frame.loc[0]&#32;=&#32;state&#32;=&#32;system.init
<anchor xml:id="_vaccination_8py_source_1l00236"/>00236 
<anchor xml:id="_vaccination_8py_source_1l00237"/>00237 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;original&#32;version</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00238"/>00238 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;for&#32;t&#32;in&#32;range(0,&#32;system.t_end):</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00239"/>00239 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;&#32;&#32;&#32;&#32;frame.loc[t+1]&#32;=&#32;update_func(t,&#32;frame.loc[t],&#32;system)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00240"/>00240 
<anchor xml:id="_vaccination_8py_source_1l00241"/>00241 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;numba&#32;based&#32;version</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00242"/>00242 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s,&#32;i,&#32;r&#32;=&#32;<link linkend="_namespaceexamples_1_1vaccination_1ac2534a94f3c4080fcb6f39b4abcfb86e">fast_simulate_last</link>(state.s,&#32;state.i,&#32;state.r,&#32;
<anchor xml:id="_vaccination_8py_source_1l00243"/>00243 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;system.t_end,&#32;system.beta,&#32;system.gamma)
<anchor xml:id="_vaccination_8py_source_1l00244"/>00244 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;frame.loc[system.t_end]&#32;=&#32;State(s=s,&#32;i=i,&#32;r=r)
<anchor xml:id="_vaccination_8py_source_1l00245"/>00245 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00246"/>00246 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;frame&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00247"/>00247 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00248"/>00248 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>add_immunization(system,&#32;fraction):
<anchor xml:id="_vaccination_8py_source_1l00249"/>00249 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;system.init.s&#32;-=&#32;fraction
<anchor xml:id="_vaccination_8py_source_1l00250"/>00250 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;system.init.r&#32;+=&#32;fraction
<anchor xml:id="_vaccination_8py_source_1l00251"/>00251 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00252"/>00252 &#32;&#32;&#32;&#32;tc&#32;=&#32;3&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;time&#32;between&#32;contacts&#32;in&#32;days&#32;</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00253"/>00253 &#32;&#32;&#32;&#32;tr&#32;=&#32;4&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;recovery&#32;time&#32;in&#32;days</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00254"/>00254 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00255"/>00255 &#32;&#32;&#32;&#32;beta&#32;=&#32;1&#32;/&#32;tc&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;contact&#32;rate&#32;in&#32;per&#32;day</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00256"/>00256 &#32;&#32;&#32;&#32;gamma&#32;=&#32;1&#32;/&#32;tr&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;recovery&#32;rate&#32;in&#32;per&#32;day</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00257"/>00257 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00258"/>00258 &#32;&#32;&#32;&#32;system&#32;=&#32;make_system(beta,&#32;gamma)
<anchor xml:id="_vaccination_8py_source_1l00259"/>00259 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00260"/>00260 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>calc_total_infected(results,&#32;system):
<anchor xml:id="_vaccination_8py_source_1l00261"/>00261 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_0&#32;=&#32;results.s[0]
<anchor xml:id="_vaccination_8py_source_1l00262"/>00262 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;s_end&#32;=&#32;results.s[system.t_end]
<anchor xml:id="_vaccination_8py_source_1l00263"/>00263 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;s_0&#32;-&#32;s_end
<anchor xml:id="_vaccination_8py_source_1l00264"/>00264 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00265"/>00265 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>logistic(x,&#32;A=0,&#32;B=1,&#32;C=1,&#32;M=0,&#32;K=1,&#32;Q=1,&#32;nu=1):
<anchor xml:id="_vaccination_8py_source_1l00266"/>00266 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;exponent&#32;=&#32;-B&#32;*&#32;(x&#32;-&#32;M)
<anchor xml:id="_vaccination_8py_source_1l00267"/>00267 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;denom&#32;=&#32;C&#32;+&#32;Q&#32;*&#32;exp(exponent)
<anchor xml:id="_vaccination_8py_source_1l00268"/>00268 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;A&#32;+&#32;(K-A)&#32;/&#32;denom&#32;**&#32;(1/nu)
<anchor xml:id="_vaccination_8py_source_1l00269"/>00269 
<anchor xml:id="_vaccination_8py_source_1l00270"/>00270 &#32;&#32;&#32;&#32;spending&#32;=&#32;linspace(0,&#32;1200,&#32;21)
<anchor xml:id="_vaccination_8py_source_1l00271"/>00271 
<anchor xml:id="_vaccination_8py_source_1l00272"/>00272 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>compute_factor(spending):
<anchor xml:id="_vaccination_8py_source_1l00273"/>00273 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;logistic(spending,&#32;M=500,&#32;K=0.2,&#32;B=0.01)
<anchor xml:id="_vaccination_8py_source_1l00274"/>00274 
<anchor xml:id="_vaccination_8py_source_1l00275"/>00275 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>add_hand_washing(system,&#32;spending):
<anchor xml:id="_vaccination_8py_source_1l00276"/>00276 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;factor&#32;=&#32;compute_factor(spending)
<anchor xml:id="_vaccination_8py_source_1l00277"/>00277 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;system.beta&#32;*=&#32;(1&#32;-&#32;factor)
<anchor xml:id="_vaccination_8py_source_1l00278"/>00278 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00279"/>00279 &#32;&#32;&#32;&#32;num_students&#32;=&#32;90
<anchor xml:id="_vaccination_8py_source_1l00280"/>00280 &#32;&#32;&#32;&#32;budget&#32;=&#32;1200
<anchor xml:id="_vaccination_8py_source_1l00281"/>00281 &#32;&#32;&#32;&#32;price_per_dose&#32;=&#32;100
<anchor xml:id="_vaccination_8py_source_1l00282"/>00282 &#32;&#32;&#32;&#32;max_doses&#32;=&#32;int(budget&#32;/&#32;price_per_dose)
<anchor xml:id="_vaccination_8py_source_1l00283"/>00283 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00284"/>00284 &#32;&#32;&#32;&#32;dose_array&#32;=&#32;linrange(max_doses)
<anchor xml:id="_vaccination_8py_source_1l00285"/>00285 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00286"/>00286 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>sweep_doses(dose_array):
<anchor xml:id="_vaccination_8py_source_1l00287"/>00287 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;sweep&#32;=&#32;SweepSeries()
<anchor xml:id="_vaccination_8py_source_1l00288"/>00288 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00289"/>00289 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">for</emphasis>&#32;doses&#32;<emphasis role="keywordflow">in</emphasis>&#32;dose_array:
<anchor xml:id="_vaccination_8py_source_1l00290"/>00290 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fraction&#32;=&#32;doses&#32;/&#32;num_students
<anchor xml:id="_vaccination_8py_source_1l00291"/>00291 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;spending&#32;=&#32;budget&#32;-&#32;doses&#32;*&#32;price_per_dose
<anchor xml:id="_vaccination_8py_source_1l00292"/>00292 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00293"/>00293 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;system&#32;=&#32;make_system(beta,&#32;gamma)
<anchor xml:id="_vaccination_8py_source_1l00294"/>00294 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;add_immunization(system,&#32;fraction)
<anchor xml:id="_vaccination_8py_source_1l00295"/>00295 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;add_hand_washing(system,&#32;spending)
<anchor xml:id="_vaccination_8py_source_1l00296"/>00296 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00297"/>00297 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;results&#32;=&#32;run_simulation(system,&#32;update_func)
<anchor xml:id="_vaccination_8py_source_1l00298"/>00298 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;sweep[doses]&#32;=&#32;calc_total_infected(results,&#32;system)
<anchor xml:id="_vaccination_8py_source_1l00299"/>00299 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00300"/>00300 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;sweep
<anchor xml:id="_vaccination_8py_source_1l00301"/>00301 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00302"/>00302 &#32;&#32;&#32;&#32;<emphasis role="keyword">from</emphasis>&#32;<link linkend="_namespacefcmaes_1_1optimizer">fcmaes.optimizer</link>&#32;<emphasis role="keyword">import</emphasis>&#32;Bite_cpp,&#32;De_cpp,&#32;Cma_cpp,&#32;Crfmnes_cpp,&#32;de_cma,&#32;wrapper
<anchor xml:id="_vaccination_8py_source_1l00303"/>00303 &#32;&#32;&#32;&#32;<emphasis role="keyword">from</emphasis>&#32;fcmaes&#32;<emphasis role="keyword">import</emphasis>&#32;retry,&#32;mode,&#32;modecpp,&#32;de,&#32;bitecpp,&#32;decpp,&#32;crfmnes,&#32;crfmnescpp,&#32;cmaes,&#32;moretry
<anchor xml:id="_vaccination_8py_source_1l00304"/>00304 &#32;&#32;&#32;&#32;<emphasis role="keyword">from</emphasis>&#32;scipy.optimize&#32;<emphasis role="keyword">import</emphasis>&#32;Bounds
<anchor xml:id="_vaccination_8py_source_1l00305"/>00305 
<anchor xml:id="_vaccination_8py_source_1l00306"/>00306 &#32;&#32;&#32;&#32;<emphasis role="keyword">class&#32;</emphasis>fcmaes_problem():
<anchor xml:id="_vaccination_8py_source_1l00307"/>00307 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00308"/>00308 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>__init__(self):
<anchor xml:id="_vaccination_8py_source_1l00309"/><link linkend="_namespaceexamples_1_1vaccination_1a22cb35962db3ca5f8b9aa5b4f9d13641">00309</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.dim&#32;=&#32;2
<anchor xml:id="_vaccination_8py_source_1l00310"/><link linkend="_namespaceexamples_1_1vaccination_1a9166dbe518bd48257977c93979d27379">00310</link> &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;self.bounds&#32;=&#32;Bounds([0]*self.dim,&#32;[budget]*self.dim)&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00311"/>00311 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00312"/>00312 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>simulate(self,&#32;budged_doses,&#32;spending):&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00313"/>00313 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;doses&#32;=&#32;budged_doses&#32;/&#32;price_per_dose
<anchor xml:id="_vaccination_8py_source_1l00314"/>00314 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fraction&#32;=&#32;doses&#32;/&#32;num_students&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00315"/>00315 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;system&#32;=&#32;make_system(beta,&#32;gamma)
<anchor xml:id="_vaccination_8py_source_1l00316"/>00316 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;add_immunization(system,&#32;fraction)
<anchor xml:id="_vaccination_8py_source_1l00317"/>00317 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;add_hand_washing(system,&#32;spending)&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00318"/>00318 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;results&#32;=&#32;run_simulation(system,&#32;update_func)
<anchor xml:id="_vaccination_8py_source_1l00319"/>00319 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;calc_total_infected(results,&#32;system)
<anchor xml:id="_vaccination_8py_source_1l00320"/>00320 
<anchor xml:id="_vaccination_8py_source_1l00321"/>00321 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>fitness2(self,&#32;x):
<anchor xml:id="_vaccination_8py_source_1l00322"/>00322 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;budged_doses&#32;=&#32;x[0]
<anchor xml:id="_vaccination_8py_source_1l00323"/>00323 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;spending&#32;=&#32;x[1]&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00324"/>00324 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;infected&#32;=&#32;self.simulate(budged_doses,&#32;spending)
<anchor xml:id="_vaccination_8py_source_1l00325"/>00325 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;[infected,&#32;budged_doses&#32;+&#32;spending]
<anchor xml:id="_vaccination_8py_source_1l00326"/>00326 
<anchor xml:id="_vaccination_8py_source_1l00327"/>00327 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>fitness3(self,&#32;x):
<anchor xml:id="_vaccination_8py_source_1l00328"/>00328 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;budged_doses&#32;=&#32;x[0]
<anchor xml:id="_vaccination_8py_source_1l00329"/>00329 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;spending&#32;=&#32;x[1]&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00330"/>00330 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;infected&#32;=&#32;self.simulate(budged_doses,&#32;spending)
<anchor xml:id="_vaccination_8py_source_1l00331"/>00331 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;[infected,&#32;budged_doses,&#32;spending]
<anchor xml:id="_vaccination_8py_source_1l00332"/>00332 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00333"/>00333 &#32;&#32;&#32;&#32;problem&#32;=&#32;fcmaes_problem()&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00334"/>00334 &#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00335"/>00335 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;task&#32;==&#32;<emphasis role="stringliteral">&apos;vaccine2dmode&apos;</emphasis>:
<anchor xml:id="_vaccination_8py_source_1l00336"/>00336 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;xs,&#32;ys&#32;=&#32;mode.minimize(mode.wrapper(problem.fitness2,&#32;2,&#32;interval=1000),&#32;2,&#32;
<anchor xml:id="_vaccination_8py_source_1l00337"/>00337 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;problem.bounds,&#32;popsize&#32;=&#32;256,&#32;max_evaluations&#32;=&#32;25600,&#32;
<anchor xml:id="_vaccination_8py_source_1l00338"/>00338 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;nsga_update=<emphasis role="keyword">False</emphasis>,&#32;workers=8)
<anchor xml:id="_vaccination_8py_source_1l00339"/>00339 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;xs,&#32;ys&#32;=&#32;moretry.pareto(xs,&#32;ys)
<anchor xml:id="_vaccination_8py_source_1l00340"/>00340 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1vaccination_1a04a9f847b51fc09ecae12cb503754524">plot2d</link>(xs,&#32;ys,&#32;task)
<anchor xml:id="_vaccination_8py_source_1l00341"/>00341 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">elif</emphasis>&#32;task&#32;==&#32;<emphasis role="stringliteral">&apos;vaccine2dretry&apos;</emphasis>:
<anchor xml:id="_vaccination_8py_source_1l00342"/>00342 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;xs,&#32;ys&#32;=&#32;modecpp.retry(mode.wrapper(problem.fitness2,&#32;2,&#32;interval=1000),&#32;2,&#32;
<anchor xml:id="_vaccination_8py_source_1l00343"/>00343 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;problem.bounds,&#32;popsize&#32;=&#32;128,&#32;max_evaluations&#32;=&#32;12800,&#32;
<anchor xml:id="_vaccination_8py_source_1l00344"/>00344 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;nsga_update=<emphasis role="keyword">False</emphasis>,&#32;num_retries&#32;=&#32;64,&#32;workers=32)
<anchor xml:id="_vaccination_8py_source_1l00345"/>00345 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1vaccination_1a04a9f847b51fc09ecae12cb503754524">plot2d</link>(xs,&#32;ys,&#32;task)
<anchor xml:id="_vaccination_8py_source_1l00346"/>00346 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">elif</emphasis>&#32;task&#32;==&#32;<emphasis role="stringliteral">&apos;vaccine3dmode&apos;</emphasis>:
<anchor xml:id="_vaccination_8py_source_1l00347"/>00347 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;xs,&#32;ys&#32;=&#32;mode.minimize(mode.wrapper(problem.fitness3,&#32;3,&#32;interval=1000),&#32;3,&#32;
<anchor xml:id="_vaccination_8py_source_1l00348"/>00348 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;problem.bounds,&#32;popsize&#32;=&#32;512,&#32;max_evaluations&#32;=&#32;25600,&#32;
<anchor xml:id="_vaccination_8py_source_1l00349"/>00349 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;nsga_update=<emphasis role="keyword">False</emphasis>,&#32;workers=8)
<anchor xml:id="_vaccination_8py_source_1l00350"/>00350 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;xs,&#32;ys&#32;=&#32;moretry.pareto(xs,&#32;ys)
<anchor xml:id="_vaccination_8py_source_1l00351"/>00351 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1vaccination_1abfaa852a18035e621672746cdeb09aac">plot3d</link>(xs,&#32;ys,&#32;task)
<anchor xml:id="_vaccination_8py_source_1l00352"/>00352 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">elif</emphasis>&#32;task&#32;==&#32;<emphasis role="stringliteral">&apos;vaccine3dretry&apos;</emphasis>:&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00353"/>00353 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;xs,&#32;ys&#32;=&#32;modecpp.retry(mode.wrapper(problem.fitness3,&#32;3,&#32;interval=1000),&#32;3,&#32;
<anchor xml:id="_vaccination_8py_source_1l00354"/>00354 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;0,&#32;problem.bounds,&#32;popsize&#32;=&#32;256,&#32;max_evaluations&#32;=&#32;25600,&#32;
<anchor xml:id="_vaccination_8py_source_1l00355"/>00355 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;nsga_update=<emphasis role="keyword">False</emphasis>,&#32;workers=32)
<anchor xml:id="_vaccination_8py_source_1l00356"/>00356 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1vaccination_1abfaa852a18035e621672746cdeb09aac">plot3d</link>(xs,&#32;ys,&#32;task)
<anchor xml:id="_vaccination_8py_source_1l00357"/>00357 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;
<anchor xml:id="_vaccination_8py_source_1l00358"/>00358 <emphasis role="keywordflow">if</emphasis>&#32;__name__&#32;==&#32;<emphasis role="stringliteral">&apos;__main__&apos;</emphasis>:
<anchor xml:id="_vaccination_8py_source_1l00359"/>00359 &#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;execute(&apos;vaccine2dmode&apos;)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00360"/>00360 &#32;&#32;&#32;&#32;<emphasis role="comment">#execute(&apos;vaccine2dretry&apos;)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00361"/>00361 &#32;&#32;&#32;&#32;<link linkend="_namespaceexamples_1_1vaccination_1af4244c8872144d2e8cf4265b60f90b34">execute</link>(<emphasis role="stringliteral">&apos;vaccine3dmode&apos;</emphasis>)
<anchor xml:id="_vaccination_8py_source_1l00362"/>00362 &#32;&#32;&#32;&#32;<emphasis role="comment">#execute(&apos;vaccine3dretry&apos;)</emphasis>
<anchor xml:id="_vaccination_8py_source_1l00363"/>00363 
<anchor xml:id="_vaccination_8py_source_1l00364"/>00364 
</programlisting></section>

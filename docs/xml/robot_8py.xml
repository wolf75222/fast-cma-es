<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="robot_8py" kind="file" language="Python">
    <compoundname>robot.py</compoundname>
    <innerclass refid="classexamples_1_1robot_1_1gui_world" prot="public">examples::robot::guiWorld</innerclass>
    <innerclass refid="classexamples_1_1robot_1_1b2_world_interface" prot="public">examples::robot::b2WorldInterface</innerclass>
    <innerclass refid="classexamples_1_1robot_1_1end__effector" prot="public">examples::robot::end_effector</innerclass>
    <innerclass refid="classexamples_1_1robot_1_1_push_reward" prot="public">examples::robot::PushReward</innerclass>
    <innernamespace refid="namespaceexamples">examples</innernamespace>
    <innernamespace refid="namespaceexamples_1_1robot">examples::robot</innernamespace>
    <innernamespace refid="namespace_box2_d">Box2D</innernamespace>
    <innernamespace refid="namespace_box2_d_1_1b2">Box2D::b2</innernamespace>
    <sectiondef kind="func">
      <memberdef kind="function" id="namespaceexamples_1_1robot_1a252c38079aadabb2799d5085b5eb4a48" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>examples.robot.create_body</definition>
        <argsstring>(base, b2world_interface, body_shape, body_size, body_friction, body_density, obj_loc)</argsstring>
        <name>create_body</name>
        <qualifiedname>examples.robot.create_body</qualifiedname>
        <param>
          <type>base</type>
          <defname>base</defname>
        </param>
        <param>
          <type>b2world_interface</type>
          <defname>b2world_interface</defname>
        </param>
        <param>
          <type>body_shape</type>
          <defname>body_shape</defname>
        </param>
        <param>
          <type>body_size</type>
          <defname>body_size</defname>
        </param>
        <param>
          <type>body_friction</type>
          <defname>body_friction</defname>
        </param>
        <param>
          <type>body_density</type>
          <defname>body_density</defname>
        </param>
        <param>
          <type>obj_loc</type>
          <defname>obj_loc</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="examples/robot.py" line="161" column="1" bodyfile="examples/robot.py" bodystart="161" bodyend="188"/>
        <referencedby refid="classexamples_1_1robot_1_1_push_reward_1a12fdbdc7cace400a133572e73d6cc7d2" compoundref="robot_8py" startline="272" endline="308">examples.robot.PushReward.__call__</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespaceexamples_1_1robot_1ac017cc6df6c6717fcc3f1bb730354cde" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>examples.robot.make_base</definition>
        <argsstring>(table_width, table_length, b2world_interface)</argsstring>
        <name>make_base</name>
        <qualifiedname>examples.robot.make_base</qualifiedname>
        <param>
          <type>table_width</type>
          <defname>table_width</defname>
        </param>
        <param>
          <type>table_length</type>
          <defname>table_length</defname>
        </param>
        <param>
          <type>b2world_interface</type>
          <defname>b2world_interface</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="examples/robot.py" line="189" column="1" bodyfile="examples/robot.py" bodystart="189" bodyend="198"/>
        <referencedby refid="classexamples_1_1robot_1_1_push_reward_1a12fdbdc7cace400a133572e73d6cc7d2" compoundref="robot_8py" startline="272" endline="308">examples.robot.PushReward.__call__</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespaceexamples_1_1robot_1ae951566f2aafee72e88b7889b7249481" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>examples.robot.add_obstacles</definition>
        <argsstring>(b2world_interface, obsverts)</argsstring>
        <name>add_obstacles</name>
        <qualifiedname>examples.robot.add_obstacles</qualifiedname>
        <param>
          <type>b2world_interface</type>
          <defname>b2world_interface</defname>
        </param>
        <param>
          <type>obsverts</type>
          <defname>obsverts</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="examples/robot.py" line="199" column="1" bodyfile="examples/robot.py" bodystart="199" bodyend="222"/>
      </memberdef>
      <memberdef kind="function" id="namespaceexamples_1_1robot_1aa5b8f7a38272096913298ba3f11b72d8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>examples.robot.run_simulation</definition>
        <argsstring>(world, body, body2, robot, robot2, xvel, yvel, xvel2, yvel2, rtor, rtor2, simulation_steps, simulation_steps2)</argsstring>
        <name>run_simulation</name>
        <qualifiedname>examples.robot.run_simulation</qualifiedname>
        <param>
          <type>world</type>
          <defname>world</defname>
        </param>
        <param>
          <type>body</type>
          <defname>body</defname>
        </param>
        <param>
          <type>body2</type>
          <defname>body2</defname>
        </param>
        <param>
          <type>robot</type>
          <defname>robot</defname>
        </param>
        <param>
          <type>robot2</type>
          <defname>robot2</defname>
        </param>
        <param>
          <type>xvel</type>
          <defname>xvel</defname>
        </param>
        <param>
          <type>yvel</type>
          <defname>yvel</defname>
        </param>
        <param>
          <type>xvel2</type>
          <defname>xvel2</defname>
        </param>
        <param>
          <type>yvel2</type>
          <defname>yvel2</defname>
        </param>
        <param>
          <type>rtor</type>
          <defname>rtor</defname>
        </param>
        <param>
          <type>rtor2</type>
          <defname>rtor2</defname>
        </param>
        <param>
          <type>simulation_steps</type>
          <defname>simulation_steps</defname>
        </param>
        <param>
          <type>simulation_steps2</type>
          <defname>simulation_steps2</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="examples/robot.py" line="223" column="1" bodyfile="examples/robot.py" bodystart="225" bodyend="242"/>
        <referencedby refid="classexamples_1_1robot_1_1_push_reward_1a12fdbdc7cace400a133572e73d6cc7d2" compoundref="robot_8py" startline="272" endline="308">examples.robot.PushReward.__call__</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespaceexamples_1_1robot_1ad7e10efd4ee195ca3e30475bbef6b25b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>examples.robot.main</definition>
        <argsstring>()</argsstring>
        <name>main</name>
        <qualifiedname>examples.robot.main</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="examples/robot.py" line="313" column="1" bodyfile="examples/robot.py" bodystart="313" bodyend="324"/>
        <references refid="namespaceexamples_1_1robot_1ad7e10efd4ee195ca3e30475bbef6b25b" compoundref="robot_8py" startline="313" endline="324">examples.robot.main</references>
        <referencedby refid="namespaceexamples_1_1robot_1ad7e10efd4ee195ca3e30475bbef6b25b" compoundref="robot_8py" startline="313" endline="324">examples.robot.main</referencedby>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespaceexamples_1_1robot" refkind="compound"><highlight class="comment">#<sp/>Adapted<sp/>from<sp/>https://github.com/zi-w/Ensemble-Bayesian-Optimization/tree/master/test_functions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">#<sp/>See<sp/>https://arxiv.org/pdf/1706.01445.pdf</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">#<sp/>See<sp/>https://github.com/dietmarwo/fast-cma-es/blob/master/tutorials/RobotRover.adoc<sp/>for<sp/>a<sp/>detailed<sp/>description.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Install<sp/>dependencies:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">#<sp/>pip<sp/>install<sp/>more-itertools</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="comment">#<sp/>pip<sp/>install<sp/>pygame</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="comment">#<sp/>mamba<sp/>install<sp/>swig</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">#<sp/>mamba<sp/>install<sp/>box2d-py</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Tested<sp/>using<sp/>https://docs.conda.io/en/main/miniconda.html<sp/>on<sp/>Linux<sp/>Mint<sp/>21.2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>numpy<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>np</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pygame</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>Box2D<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespace_box2_d_1_1b2" kindref="compound">Box2D.b2</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20" refid="classexamples_1_1robot_1_1gui_world" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1gui_world" kindref="compound">guiWorld</ref>:</highlight></codeline>
<codeline lineno="21" refid="classexamples_1_1robot_1_1gui_world_1a2a72190b0879ff50cdeebe3cf3213d7d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1gui_world_1a2a72190b0879ff50cdeebe3cf3213d7d" kindref="member">__init__</ref>(self,<sp/>fps):</highlight></codeline>
<codeline lineno="22" refid="classexamples_1_1robot_1_1gui_world_1a03d57f981170d79d51d9033c04292594" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1ad22538df02066ff8e529fdefde7a11ef" kindref="member">SCREEN_WIDTH</ref>,<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a03d57f981170d79d51d9033c04292594" kindref="member">SCREEN_HEIGHT</ref><sp/>=<sp/>1000,<sp/>1000</highlight></codeline>
<codeline lineno="23" refid="classexamples_1_1robot_1_1gui_world_1a97e18c60d7c158fb93505ff1062f4215" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a97e18c60d7c158fb93505ff1062f4215" kindref="member">TARGET_FPS</ref><sp/>=<sp/>fps</highlight></codeline>
<codeline lineno="24" refid="classexamples_1_1robot_1_1gui_world_1ad6cabbaff2dd91875d324a223955033d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1ad6cabbaff2dd91875d324a223955033d" kindref="member">PPM</ref><sp/>=<sp/>10.0<sp/><sp/></highlight><highlight class="comment">#<sp/>pixels<sp/>per<sp/>meter</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25" refid="classexamples_1_1robot_1_1gui_world_1a4e6d908e38fe9362abbf8d42061d56ed" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a4e6d908e38fe9362abbf8d42061d56ed" kindref="member">screen</ref><sp/>=<sp/>pygame.display.set_mode((self.<ref refid="classexamples_1_1robot_1_1gui_world_1ad22538df02066ff8e529fdefde7a11ef" kindref="member">SCREEN_WIDTH</ref>,<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a03d57f981170d79d51d9033c04292594" kindref="member">SCREEN_HEIGHT</ref>),<sp/>0,<sp/>32)</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pygame.display.set_caption(</highlight><highlight class="stringliteral">&apos;push<sp/>simulator&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="27" refid="classexamples_1_1robot_1_1gui_world_1af98ec11c04c1ba0765d4475cf383f29e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1af98ec11c04c1ba0765d4475cf383f29e" kindref="member">clock</ref><sp/>=<sp/>pygame.time.Clock()</highlight></codeline>
<codeline lineno="28" refid="classexamples_1_1robot_1_1gui_world_1af1fded6ed1528b22f0517f72bbad19f2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1af1fded6ed1528b22f0517f72bbad19f2" kindref="member">screen_origin</ref><sp/>=<sp/>b2Vec2(self.<ref refid="classexamples_1_1robot_1_1gui_world_1ad22538df02066ff8e529fdefde7a11ef" kindref="member">SCREEN_WIDTH</ref><sp/>/<sp/>(2<sp/>*<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1ad6cabbaff2dd91875d324a223955033d" kindref="member">PPM</ref>),<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a03d57f981170d79d51d9033c04292594" kindref="member">SCREEN_HEIGHT</ref><sp/>/<sp/>(self.<ref refid="classexamples_1_1robot_1_1gui_world_1ad6cabbaff2dd91875d324a223955033d" kindref="member">PPM</ref><sp/>*<sp/>2))</highlight></codeline>
<codeline lineno="29" refid="classexamples_1_1robot_1_1gui_world_1a25335c34ece85a6399269d8c972ba1dd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a25335c34ece85a6399269d8c972ba1dd" kindref="member">colors</ref><sp/>=<sp/>{</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b2_staticBody:<sp/>(255,<sp/>255,<sp/>255,<sp/>255),</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b2_dynamicBody:<sp/>(163,<sp/>209,<sp/>224,<sp/>255)</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="classexamples_1_1robot_1_1gui_world_1adab98b24ef2879406211e7c2325addd2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1gui_world_1adab98b24ef2879406211e7c2325addd2" kindref="member">draw</ref>(self,<sp/>bodies,<sp/>bg_color=(64,<sp/>64,<sp/>64,<sp/>0)):</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">my_draw_polygon(polygon,<sp/>body,<sp/>fixture):</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertices<sp/>=<sp/>[(self.<ref refid="classexamples_1_1robot_1_1gui_world_1af1fded6ed1528b22f0517f72bbad19f2" kindref="member">screen_origin</ref><sp/>+<sp/>body.transform<sp/>*<sp/>v)<sp/>*<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1ad6cabbaff2dd91875d324a223955033d" kindref="member">PPM</ref><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>v<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>polygon.vertices]</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertices<sp/>=<sp/>[(v[0],<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a03d57f981170d79d51d9033c04292594" kindref="member">SCREEN_HEIGHT</ref><sp/>-<sp/>v[1])<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>v<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>vertices]</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>color<sp/>=<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a25335c34ece85a6399269d8c972ba1dd" kindref="member">colors</ref>[body.type]</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>body.userData<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;obs&quot;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>color<sp/>=<sp/>(123,<sp/>128,<sp/>120,<sp/>0)</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>body.userData<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;hand&quot;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>color<sp/>=<sp/>(174,<sp/>136,<sp/>218,<sp/>0)</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pygame.draw.polygon(self.<ref refid="classexamples_1_1robot_1_1gui_world_1a4e6d908e38fe9362abbf8d42061d56ed" kindref="member">screen</ref>,<sp/>color,<sp/>vertices)</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">my_draw_circle(circle,<sp/>body,<sp/>fixture):</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position<sp/>=<sp/>(self.<ref refid="classexamples_1_1robot_1_1gui_world_1af1fded6ed1528b22f0517f72bbad19f2" kindref="member">screen_origin</ref><sp/>+<sp/>body.transform<sp/>*<sp/>circle.pos)<sp/>*<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1ad6cabbaff2dd91875d324a223955033d" kindref="member">PPM</ref></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position<sp/>=<sp/>(position[0],<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a03d57f981170d79d51d9033c04292594" kindref="member">SCREEN_HEIGHT</ref><sp/>-<sp/>position[1])</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>color<sp/>=<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a25335c34ece85a6399269d8c972ba1dd" kindref="member">colors</ref>[body.type]</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>body.userData<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;hand&quot;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>color<sp/>=<sp/>(174,<sp/>136,<sp/>218,<sp/>0)</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pygame.draw.circle(self.<ref refid="classexamples_1_1robot_1_1gui_world_1a4e6d908e38fe9362abbf8d42061d56ed" kindref="member">screen</ref>,<sp/>color,<sp/>[int(x)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position],<sp/>int(circle.radius<sp/>*<sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1ad6cabbaff2dd91875d324a223955033d" kindref="member">PPM</ref>))</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b2PolygonShape.draw<sp/>=<sp/>my_draw_polygon</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b2CircleShape.draw<sp/>=<sp/>my_draw_circle</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>draw<sp/>the<sp/>world</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1a4e6d908e38fe9362abbf8d42061d56ed" kindref="member">screen</ref>.fill(bg_color)</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1gui_world_1af98ec11c04c1ba0765d4475cf383f29e" kindref="member">clock</ref>.tick(self.<ref refid="classexamples_1_1robot_1_1gui_world_1a97e18c60d7c158fb93505ff1062f4215" kindref="member">TARGET_FPS</ref>)</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>body<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>bodies:</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>fixture<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>body.fixtures:</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fixture.shape.draw(body,<sp/>fixture)</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pygame.display.flip()</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="comment">#<sp/>this<sp/>is<sp/>the<sp/>interface<sp/>to<sp/>pybox2d</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66" refid="classexamples_1_1robot_1_1b2_world_interface" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1b2_world_interface" kindref="compound">b2WorldInterface</ref>:</highlight></codeline>
<codeline lineno="67" refid="classexamples_1_1robot_1_1b2_world_interface_1a7092d6fe5d6e4a96ed9f28dbb8cec53d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1b2_world_interface_1a7092d6fe5d6e4a96ed9f28dbb8cec53d" kindref="member">__init__</ref>(self,<sp/>do_gui=True):</highlight></codeline>
<codeline lineno="68" refid="classexamples_1_1robot_1_1b2_world_interface_1ac80a9c52b51a2e8ac79bd1cc846d9fe4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1ac80a9c52b51a2e8ac79bd1cc846d9fe4" kindref="member">world</ref><sp/>=<sp/>b2World(gravity=(0.0,<sp/>0.0),<sp/>doSleep=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="69" refid="classexamples_1_1robot_1_1b2_world_interface_1a0297622078dd63ff335b12d8e2f01e96" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a0297622078dd63ff335b12d8e2f01e96" kindref="member">do_gui</ref><sp/>=<sp/>do_gui</highlight></codeline>
<codeline lineno="70" refid="classexamples_1_1robot_1_1b2_world_interface_1a3068c28bda902f1197a0ad8518ac6520" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a3068c28bda902f1197a0ad8518ac6520" kindref="member">TARGET_FPS</ref><sp/>=<sp/>100</highlight></codeline>
<codeline lineno="71" refid="classexamples_1_1robot_1_1b2_world_interface_1a3088f5f6eaed3eb11b77536cf4986d54" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a3088f5f6eaed3eb11b77536cf4986d54" kindref="member">TIME_STEP</ref><sp/>=<sp/>1.0<sp/>/<sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a3068c28bda902f1197a0ad8518ac6520" kindref="member">TARGET_FPS</ref></highlight></codeline>
<codeline lineno="72" refid="classexamples_1_1robot_1_1b2_world_interface_1a9924b1e1dbbc852bd2e11ecb10b136d9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1afc4889322670a65a8e3ea069ecd9d40e" kindref="member">VEL_ITERS</ref>,<sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a9924b1e1dbbc852bd2e11ecb10b136d9" kindref="member">POS_ITERS</ref><sp/>=<sp/>10,<sp/>10</highlight></codeline>
<codeline lineno="73" refid="classexamples_1_1robot_1_1b2_world_interface_1a70a4c4e2f6a76b4b0cf12bc0a2393d79" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a70a4c4e2f6a76b4b0cf12bc0a2393d79" kindref="member">bodies</ref><sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>do_gui:</highlight></codeline>
<codeline lineno="76" refid="classexamples_1_1robot_1_1b2_world_interface_1a1e9b1f3344f161776e40174c1e7ee75d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a1e9b1f3344f161776e40174c1e7ee75d" kindref="member">gui_world</ref><sp/>=<sp/><ref refid="classexamples_1_1robot_1_1gui_world" kindref="compound">guiWorld</ref>(self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a3068c28bda902f1197a0ad8518ac6520" kindref="member">TARGET_FPS</ref>)</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>raw_input()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a1e9b1f3344f161776e40174c1e7ee75d" kindref="member">gui_world</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="classexamples_1_1robot_1_1b2_world_interface_1a6a5b5a5e68fd32c55812e70e80ebead7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1b2_world_interface_1a6a5b5a5e68fd32c55812e70e80ebead7" kindref="member">initialize_gui</ref>(self):</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a1e9b1f3344f161776e40174c1e7ee75d" kindref="member">gui_world</ref><sp/>==<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a1e9b1f3344f161776e40174c1e7ee75d" kindref="member">gui_world</ref><sp/>=<sp/><ref refid="classexamples_1_1robot_1_1gui_world" kindref="compound">guiWorld</ref>(self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a3068c28bda902f1197a0ad8518ac6520" kindref="member">TARGET_FPS</ref>)</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a0297622078dd63ff335b12d8e2f01e96" kindref="member">do_gui</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86" refid="classexamples_1_1robot_1_1b2_world_interface_1a0f7a068ef4e840459a91d93f107a667b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1b2_world_interface_1a0f7a068ef4e840459a91d93f107a667b" kindref="member">stop_gui</ref>(self):</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a0297622078dd63ff335b12d8e2f01e96" kindref="member">do_gui</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1b2_world_interface_1a34cf4ae4836ed555b32a1486642ce275" kindref="member">add_bodies</ref>(self,<sp/>new_bodies):</highlight></codeline>
<codeline lineno="90" refid="classexamples_1_1robot_1_1b2_world_interface_1a34cf4ae4836ed555b32a1486642ce275" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;<sp/>add<sp/>a<sp/>single<sp/>b2Body<sp/>or<sp/>list<sp/>of<sp/>b2Bodies<sp/>to<sp/>the<sp/>world&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>type(new_bodies)<sp/>==<sp/>list:</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a70a4c4e2f6a76b4b0cf12bc0a2393d79" kindref="member">bodies</ref><sp/>+=<sp/>new_bodies</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a70a4c4e2f6a76b4b0cf12bc0a2393d79" kindref="member">bodies</ref>.append(new_bodies)</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="classexamples_1_1robot_1_1b2_world_interface_1ab0ef17ea8a92dd7d0d28f2defc51540c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1b2_world_interface_1ab0ef17ea8a92dd7d0d28f2defc51540c" kindref="member">step</ref>(self,<sp/>show_display=True,<sp/>idx=0):</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1ac80a9c52b51a2e8ac79bd1cc846d9fe4" kindref="member">world</ref>.Step(self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a3088f5f6eaed3eb11b77536cf4986d54" kindref="member">TIME_STEP</ref>,<sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1afc4889322670a65a8e3ea069ecd9d40e" kindref="member">VEL_ITERS</ref>,<sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a9924b1e1dbbc852bd2e11ecb10b136d9" kindref="member">POS_ITERS</ref>)</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>show_display<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a0297622078dd63ff335b12d8e2f01e96" kindref="member">do_gui</ref>:</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a1e9b1f3344f161776e40174c1e7ee75d" kindref="member">gui_world</ref>.draw(self.<ref refid="classexamples_1_1robot_1_1b2_world_interface_1a70a4c4e2f6a76b4b0cf12bc0a2393d79" kindref="member">bodies</ref>)</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="classexamples_1_1robot_1_1end__effector" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1end__effector" kindref="compound">end_effector</ref>:</highlight></codeline>
<codeline lineno="102" refid="classexamples_1_1robot_1_1end__effector_1a0de4d854fd164f2e08f91f9eefada154" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1end__effector_1a0de4d854fd164f2e08f91f9eefada154" kindref="member">__init__</ref>(self,<sp/>b2world_interface,<sp/>init_pos,<sp/>base,<sp/>init_angle,<sp/>hand_shape=&apos;rectangle&apos;,<sp/>hand_size=(0.3,<sp/>1)):</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>world<sp/>=<sp/>b2world_interface.world</highlight></codeline>
<codeline lineno="104" refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref><sp/>=<sp/>world.CreateDynamicBody(position=init_pos,<sp/>angle=init_angle)</highlight></codeline>
<codeline lineno="105" refid="classexamples_1_1robot_1_1end__effector_1a72964828d20b8c4332f27f8e8852b7e7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a72964828d20b8c4332f27f8e8852b7e7" kindref="member">hand_shape</ref><sp/>=<sp/>hand_shape</highlight></codeline>
<codeline lineno="106" refid="classexamples_1_1robot_1_1end__effector_1ac0b2cde5536ed4a0c2fbb1b14fe39dee" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1ac0b2cde5536ed4a0c2fbb1b14fe39dee" kindref="member">hand_size</ref><sp/>=<sp/>hand_size</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>forceunit<sp/>for<sp/>circle<sp/>and<sp/>rect</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>hand_shape<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;rectangle&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rshape<sp/>=<sp/>b2PolygonShape(box=hand_size)</highlight></codeline>
<codeline lineno="110" refid="classexamples_1_1robot_1_1end__effector_1a93141201773012f21fa30a2a27be5f21" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a93141201773012f21fa30a2a27be5f21" kindref="member">forceunit</ref><sp/>=<sp/>30.0</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>hand_shape<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;circle&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rshape<sp/>=<sp/>b2CircleShape(radius=hand_size)</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a93141201773012f21fa30a2a27be5f21" kindref="member">forceunit</ref><sp/>=<sp/>100.0</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>hand_shape<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;polygon&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rshape<sp/>=<sp/>b2PolygonShape(vertices=hand_size)</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&quot;%s<sp/>is<sp/>not<sp/>a<sp/>correct<sp/>shape&quot;</highlight><highlight class="normal"><sp/>%<sp/>hand_shape)</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.CreateFixture(</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>shape=rshape,</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>density=.1,</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>friction=.1</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.userData<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;hand&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>friction_joint<sp/>=<sp/>world.CreateFrictionJoint(</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bodyA=base,</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bodyB=self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>,</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxForce=2,</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxTorque=2,</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b2world_interface.add_bodies(self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>)</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134" refid="classexamples_1_1robot_1_1end__effector_1a2c76b9613ca2ddad07bf118ebcaaa4e4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1end__effector_1a2c76b9613ca2ddad07bf118ebcaaa4e4" kindref="member">set_pos</ref>(self,<sp/>pos,<sp/>angle):</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.position<sp/>=<sp/>pos</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.angle<sp/>=<sp/>angle</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138" refid="classexamples_1_1robot_1_1end__effector_1a254df906f14175a25460e69206232c6d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1end__effector_1a254df906f14175a25460e69206232c6d" kindref="member">apply_wrench</ref>(self,<sp/>rlvel=(0,<sp/>0),<sp/>ravel=0):</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>avel<sp/>=<sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.angularVelocity</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delta_avel<sp/>=<sp/>ravel<sp/>-<sp/>avel</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>torque<sp/>=<sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.mass<sp/>*<sp/>delta_avel<sp/>*<sp/>30.0</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.ApplyTorque(torque,<sp/>wake=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lvel<sp/>=<sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.linearVelocity</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delta_lvel<sp/>=<sp/>b2Vec2(rlvel)<sp/>-<sp/>b2Vec2(lvel)</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>force<sp/>=<sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.mass<sp/>*<sp/>delta_lvel<sp/>*<sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a93141201773012f21fa30a2a27be5f21" kindref="member">forceunit</ref></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.ApplyForce(force,<sp/>self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.position,<sp/>wake=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight></codeline>
<codeline lineno="150" refid="classexamples_1_1robot_1_1end__effector_1a06b2e91a5ef8b9898b0fccfed7e0d562" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1end__effector_1a06b2e91a5ef8b9898b0fccfed7e0d562" kindref="member">get_state</ref>(self,<sp/>verbose=False):</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>=<sp/>list(self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.position)<sp/>+<sp/>[self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.angle]<sp/>+<sp/>\</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>list(self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.linearVelocity)<sp/>+<sp/>[self.<ref refid="classexamples_1_1robot_1_1end__effector_1a797dad778a18e493f3792c8469b2e9c6" kindref="member">hand</ref>.angularVelocity]</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>verbose:</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print_state<sp/>=<sp/>[</highlight><highlight class="stringliteral">&quot;%.3f&quot;</highlight><highlight class="normal"><sp/>%<sp/>x<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>state]</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">print</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;position,<sp/>velocity:<sp/>(%s),<sp/>(%s)<sp/>&quot;</highlight><highlight class="normal"><sp/>%<sp/>\</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((</highlight><highlight class="stringliteral">&quot;,<sp/>&quot;</highlight><highlight class="normal">).join(print_state[:3]),<sp/>(</highlight><highlight class="stringliteral">&quot;,<sp/>&quot;</highlight><highlight class="normal">).join(print_state[3:]))</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>state</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161" refid="namespaceexamples_1_1robot_1a252c38079aadabb2799d5085b5eb4a48" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespaceexamples_1_1robot_1a252c38079aadabb2799d5085b5eb4a48" kindref="member">create_body</ref>(base,<sp/>b2world_interface,<sp/>body_shape,<sp/>body_size,<sp/>body_friction,<sp/>body_density,<sp/>obj_loc):</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/>world<sp/>=<sp/>b2world_interface.world</highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>link<sp/>=<sp/>world.CreateDynamicBody(position=obj_loc)</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>body_shape<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;rectangle&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>linkshape<sp/>=<sp/>b2PolygonShape(box=body_size)</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>body_shape<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;circle&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>linkshape<sp/>=<sp/>b2CircleShape(radius=body_size)</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>body_shape<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;polygon&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>linkshape<sp/>=<sp/>b2PolygonShape(vertices=body_size)</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&quot;%s<sp/>is<sp/>not<sp/>a<sp/>correct<sp/>shape&quot;</highlight><highlight class="normal"><sp/>%<sp/>body_shape)</highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>link.CreateFixture(</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>shape=linkshape,</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>density=body_density,</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>friction=body_friction,</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/>friction_joint<sp/>=<sp/>world.CreateFrictionJoint(</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bodyA=base,</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bodyB=link,</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxForce=5,</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxTorque=2,</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/>b2world_interface.add_bodies([link])</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>link</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189" refid="namespaceexamples_1_1robot_1ac017cc6df6c6717fcc3f1bb730354cde" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespaceexamples_1_1robot_1ac017cc6df6c6717fcc3f1bb730354cde" kindref="member">make_base</ref>(table_width,<sp/>table_length,<sp/>b2world_interface):</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/>world<sp/>=<sp/>b2world_interface.world</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/>base<sp/>=<sp/>world.CreateStaticBody(</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position=(0,<sp/>0),</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>shapes=b2PolygonShape(box=(table_length,<sp/>table_width)),</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/>b2world_interface.add_bodies([base])</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>base</highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight></codeline>
<codeline lineno="199" refid="namespaceexamples_1_1robot_1ae951566f2aafee72e88b7889b7249481" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespaceexamples_1_1robot_1ae951566f2aafee72e88b7889b7249481" kindref="member">add_obstacles</ref>(b2world_interface,<sp/>obsverts):</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>world<sp/>=<sp/>b2world_interface.world</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/>obs<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>verts<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>obsverts:</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>world.CreateStaticBody(</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position=(0,<sp/>0),</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>shapes=b2PolygonShape(vertices=verts),</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp.userData<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;obs&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obs.append(tmp)</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>add<sp/>boundaries</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/>x,<sp/>y<sp/>=<sp/>sm.wbpolygon.exterior.xy</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/>minx,<sp/>maxx,<sp/>miny,<sp/>maxy<sp/>=<sp/>np.min(x),<sp/>np.max(x),<sp/>np.min(y),<sp/>np.max(y)</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/>centers<sp/>=<sp/>[(0,<sp/>miny<sp/>-<sp/>1),<sp/>(0,<sp/>maxy<sp/>+<sp/>1),<sp/>(minx<sp/>-<sp/>1,<sp/>0),<sp/>(maxx<sp/>+<sp/>1,<sp/>0)]</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/>boxlen<sp/>=<sp/>[(maxx<sp/>-<sp/>minx,<sp/>0.5),<sp/>(maxx<sp/>-<sp/>minx,<sp/>0.5),<sp/>(0.5,<sp/>maxy<sp/>-<sp/>miny),<sp/>(0.5,<sp/>maxy<sp/>-<sp/>miny)]</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(pos,<sp/>blen)<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>zip(centers,<sp/>boxlen):</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>world.CreateStaticBody(</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position=pos,</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>shapes=b2PolygonShape(box=blen),</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obs.append(tmp)</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/>b2world_interface.add_bodies(obs)</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223" refid="namespaceexamples_1_1robot_1aa5b8f7a38272096913298ba3f11b72d8" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespaceexamples_1_1robot_1aa5b8f7a38272096913298ba3f11b72d8" kindref="member">run_simulation</ref>(world,<sp/>body,<sp/>body2,<sp/>robot,<sp/>robot2,<sp/>xvel,<sp/>yvel,<sp/>\</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xvel2,<sp/>yvel2,<sp/>rtor,<sp/>rtor2,<sp/>simulation_steps,</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>simulation_steps2):</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>simulating<sp/>push<sp/>with<sp/>fixed<sp/>direction<sp/>pointing<sp/>from<sp/>robot<sp/>location<sp/>to<sp/>body<sp/>location</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/>desired_vel<sp/>=<sp/>np.array([xvel,<sp/>yvel])</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/>rvel<sp/>=<sp/>b2Vec2(desired_vel[0]<sp/>+<sp/>np.random.normal(0,<sp/>0.01),<sp/>desired_vel[1]<sp/>+<sp/>np.random.normal(0,<sp/>0.01))</highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>desired_vel2<sp/>=<sp/>np.array([xvel2,<sp/>yvel2])</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/>rvel2<sp/>=<sp/>b2Vec2(desired_vel2[0]<sp/>+<sp/>np.random.normal(0,<sp/>0.01),<sp/>desired_vel2[1]<sp/>+<sp/>np.random.normal(0,<sp/>0.01))</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/>tmax<sp/>=<sp/>np.max([simulation_steps,<sp/>simulation_steps2])</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>t<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(tmax<sp/>+<sp/>100):</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>t<sp/>&lt;<sp/>simulation_steps:</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>robot.apply_wrench(rvel,<sp/>rtor)</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>t<sp/>&lt;<sp/>simulation_steps2:</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>robot2.apply_wrench(rvel2,<sp/>rtor2)</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>world.step()</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(list(body.position),<sp/>list(body2.position))</highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight></codeline>
<codeline lineno="243" refid="classexamples_1_1robot_1_1_push_reward" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1_push_reward" kindref="compound">PushReward</ref>:</highlight></codeline>
<codeline lineno="244" refid="classexamples_1_1robot_1_1_push_reward_1a79391c66d4c7e5d3579fa0ef864999c4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1_push_reward_1a79391c66d4c7e5d3579fa0ef864999c4" kindref="member">__init__</ref>(self,<sp/>do_gui=False):</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>domain<sp/>of<sp/>this<sp/>function</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247" refid="classexamples_1_1robot_1_1_push_reward_1a12d01d1a6bda486ebef6fdf58bb16959" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1a12d01d1a6bda486ebef6fdf58bb16959" kindref="member">xmin</ref><sp/>=<sp/>[-5.,<sp/>-5.,<sp/>-10.,<sp/>-10.,<sp/>2.,<sp/>0.,<sp/>-5.,<sp/>-5.,<sp/>-10.,<sp/>-10.,<sp/>2.,<sp/>0.,<sp/>-5.,<sp/>-5.]</highlight></codeline>
<codeline lineno="248" refid="classexamples_1_1robot_1_1_push_reward_1a8bcba3852110328e20e0b9c8890bd498" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1a8bcba3852110328e20e0b9c8890bd498" kindref="member">xmax</ref><sp/>=<sp/>[5.,<sp/>5.,<sp/>10.,<sp/>10.,<sp/>30.,<sp/>2.*np.pi,<sp/>5.,<sp/>5.,<sp/>10.,<sp/>10.,<sp/>30.,<sp/>2.*np.pi,<sp/>5.,<sp/>5.]</highlight></codeline>
<codeline lineno="249"><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>starting<sp/>xy<sp/>locations<sp/>for<sp/>the<sp/>two<sp/>objects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="251" refid="classexamples_1_1robot_1_1_push_reward_1ac1d9afbd054c2f7332a4bbd9f139d2ca" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1ac1d9afbd054c2f7332a4bbd9f139d2ca" kindref="member">sxy</ref><sp/>=<sp/>(0,<sp/>2)</highlight></codeline>
<codeline lineno="252" refid="classexamples_1_1robot_1_1_push_reward_1a089bb19e4fbc8bbfa0e69686f1a07a74" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1a089bb19e4fbc8bbfa0e69686f1a07a74" kindref="member">sxy2</ref><sp/>=<sp/>(0,<sp/>-2)</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>goal<sp/>xy<sp/>locations<sp/>for<sp/>the<sp/>two<sp/>objects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254" refid="classexamples_1_1robot_1_1_push_reward_1ac56d4765930f5f39be5ef19a42b4ebe7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1ac56d4765930f5f39be5ef19a42b4ebe7" kindref="member">gxy</ref><sp/>=<sp/>[4,<sp/>3.5]</highlight></codeline>
<codeline lineno="255" refid="classexamples_1_1robot_1_1_push_reward_1abc433b7d5ac069d7ac9b2ee60b168d43" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1abc433b7d5ac069d7ac9b2ee60b168d43" kindref="member">gxy2</ref><sp/>=<sp/>[-4,<sp/>3.5]</highlight></codeline>
<codeline lineno="256" refid="classexamples_1_1robot_1_1_push_reward_1aa92457b63fd7c895077365c0ff63b5cf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1aa92457b63fd7c895077365c0ff63b5cf" kindref="member">do_gui</ref><sp/>=<sp/>do_gui</highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@property</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="259" refid="classexamples_1_1robot_1_1_push_reward_1a6e1df9cc36056fea745db2d21136b0b7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1_push_reward_1a6e1df9cc36056fea745db2d21136b0b7" kindref="member">f_max</ref>(self):</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>maximum<sp/>value<sp/>of<sp/>this<sp/>function</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="261" refid="classexamples_1_1robot_1_1_push_reward_1ada3f0c35266a5467ac22b6b0c80a3ea9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>np.linalg.norm(np.array(self.<ref refid="classexamples_1_1robot_1_1_push_reward_1ac56d4765930f5f39be5ef19a42b4ebe7" kindref="member">gxy</ref>)<sp/>-<sp/>np.array(self.<ref refid="classexamples_1_1robot_1_1_push_reward_1ac1d9afbd054c2f7332a4bbd9f139d2ca" kindref="member">sxy</ref>))<sp/>\</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>np.linalg.norm(np.array(self.<ref refid="classexamples_1_1robot_1_1_push_reward_1abc433b7d5ac069d7ac9b2ee60b168d43" kindref="member">gxy2</ref>)<sp/>-<sp/>np.array(self.<ref refid="classexamples_1_1robot_1_1_push_reward_1a089bb19e4fbc8bbfa0e69686f1a07a74" kindref="member">sxy2</ref>))</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@property</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1_push_reward_1a833013c53995102c560bfc6fe37b89d0" kindref="member">dx</ref>(self):</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>dimension<sp/>of<sp/>the<sp/>input</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="266" refid="classexamples_1_1robot_1_1_push_reward_1a833013c53995102c560bfc6fe37b89d0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self._dx</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="268" refid="classexamples_1_1robot_1_1_push_reward_1a1d2daca54b1e449ab25ff769faedba81" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classexamples_1_1robot_1_1_push_reward_1a12fdbdc7cace400a133572e73d6cc7d2" kindref="member">__call__</ref>(self,<sp/>argv):</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>returns<sp/>the<sp/>reward<sp/>of<sp/>pushing<sp/>two<sp/>objects<sp/>with<sp/>two<sp/>robots</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rx<sp/>=<sp/>float(argv[0])</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ry<sp/>=<sp/>float(argv[1])</highlight></codeline>
<codeline lineno="272" refid="classexamples_1_1robot_1_1_push_reward_1a12fdbdc7cace400a133572e73d6cc7d2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xvel<sp/>=<sp/>float(argv[2])</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>yvel<sp/>=<sp/>float(argv[3])</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>simu_steps<sp/>=<sp/>int(float(argv[4])<sp/>*<sp/>10)</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>init_angle<sp/>=<sp/>float(argv[5])</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rx2<sp/>=<sp/>float(argv[6])</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ry2<sp/>=<sp/>float(argv[7])</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xvel2<sp/>=<sp/>float(argv[8])</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>yvel2<sp/>=<sp/>float(argv[9])</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>simu_steps2<sp/>=<sp/>int(float(argv[10])<sp/>*<sp/>10)</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>init_angle2<sp/>=<sp/>float(argv[11])</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rtor<sp/>=<sp/>float(argv[12])</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rtor2<sp/>=<sp/>float(argv[13])</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initial_dist<sp/>=<sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1a6e1df9cc36056fea745db2d21136b0b7" kindref="member">f_max</ref></highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>world<sp/>=<sp/><ref refid="classexamples_1_1robot_1_1b2_world_interface" kindref="compound">b2WorldInterface</ref>(self.<ref refid="classexamples_1_1robot_1_1_push_reward_1aa92457b63fd7c895077365c0ff63b5cf" kindref="member">do_gui</ref>)</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>oshape,<sp/>osize,<sp/>ofriction,<sp/>odensity,<sp/>bfriction,<sp/>hand_shape,<sp/>hand_size<sp/>=<sp/>\</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;circle&apos;</highlight><highlight class="normal">,<sp/>1,<sp/>0.01,<sp/>0.05,<sp/>0.01,<sp/></highlight><highlight class="stringliteral">&apos;rectangle&apos;</highlight><highlight class="normal">,<sp/>(1,<sp/>0.3)</highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base<sp/>=<sp/><ref refid="namespaceexamples_1_1robot_1ac017cc6df6c6717fcc3f1bb730354cde" kindref="member">make_base</ref>(500,<sp/>500,<sp/>world)</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>body<sp/>=<sp/><ref refid="namespaceexamples_1_1robot_1a252c38079aadabb2799d5085b5eb4a48" kindref="member">create_body</ref>(base,<sp/>world,<sp/></highlight><highlight class="stringliteral">&apos;rectangle&apos;</highlight><highlight class="normal">,<sp/>(0.5,<sp/>0.5),<sp/>ofriction,<sp/>odensity,<sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1ac1d9afbd054c2f7332a4bbd9f139d2ca" kindref="member">sxy</ref>)</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>body2<sp/>=<sp/><ref refid="namespaceexamples_1_1robot_1a252c38079aadabb2799d5085b5eb4a48" kindref="member">create_body</ref>(base,<sp/>world,<sp/></highlight><highlight class="stringliteral">&apos;circle&apos;</highlight><highlight class="normal">,<sp/>1,<sp/>ofriction,<sp/>odensity,<sp/>self.<ref refid="classexamples_1_1robot_1_1_push_reward_1a089bb19e4fbc8bbfa0e69686f1a07a74" kindref="member">sxy2</ref>)</highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>robot<sp/>=<sp/><ref refid="classexamples_1_1robot_1_1end__effector" kindref="compound">end_effector</ref>(world,<sp/>(rx,ry),<sp/>base,<sp/>init_angle,<sp/>hand_shape,<sp/>hand_size)</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>robot2<sp/>=<sp/><ref refid="classexamples_1_1robot_1_1end__effector" kindref="compound">end_effector</ref>(world,<sp/>(rx2,ry2),<sp/>base,<sp/>init_angle2,<sp/>hand_shape,<sp/>hand_size)</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ret1,<sp/>ret2)<sp/>=<sp/><ref refid="namespaceexamples_1_1robot_1aa5b8f7a38272096913298ba3f11b72d8" kindref="member">run_simulation</ref>(world,<sp/>body,<sp/>body2,<sp/>robot,<sp/>robot2,<sp/>xvel,<sp/>yvel,<sp/>\</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xvel2,<sp/>yvel2,<sp/>rtor,<sp/>rtor2,<sp/>simu_steps,<sp/>simu_steps2)</highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret1<sp/>=<sp/>np.linalg.norm(np.array(self.<ref refid="classexamples_1_1robot_1_1_push_reward_1ac56d4765930f5f39be5ef19a42b4ebe7" kindref="member">gxy</ref>)<sp/>-<sp/>ret1)</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret2<sp/>=<sp/>np.linalg.norm(np.array(self.<ref refid="classexamples_1_1robot_1_1_push_reward_1abc433b7d5ac069d7ac9b2ee60b168d43" kindref="member">gxy2</ref>)<sp/>-<sp/>ret2)</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-(initial_dist<sp/>-<sp/>ret1<sp/>-<sp/>ret2)<sp/></highlight><highlight class="comment">#<sp/>negated<sp/>because<sp/>we<sp/>minimize<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"></highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacefcmaes_1_1optimizer" kindref="compound">fcmaes.optimizer</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>De_cpp,<sp/>Bite_cpp,<sp/>wrapper,<sp/>logger</highlight></codeline>
<codeline lineno="306"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>fcmaes<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>retry</highlight></codeline>
<codeline lineno="307"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>scipy.optimize<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Bounds</highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespaceexamples_1_1robot_1ad7e10efd4ee195ca3e30475bbef6b25b" kindref="member">main</ref>():</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/>f<sp/>=<sp/><ref refid="classexamples_1_1robot_1_1_push_reward" kindref="compound">PushReward</ref>()</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/>bounds<sp/>=<sp/>Bounds(f.xmin,<sp/>f.xmax)<sp/></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="313" refid="namespaceexamples_1_1robot_1ad7e10efd4ee195ca3e30475bbef6b25b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&quot;push<sp/>retry.minimize(wrap(f,<sp/>dim),<sp/>bounds,<sp/>De_cpp(10000),<sp/>num_retries=32)&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(20):</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry.minimize(<ref refid="classfcmaes_1_1optimizer_1_1wrapper" kindref="compound">wrapper</ref>(f),<sp/>bounds,<sp/>optimizer=<ref refid="classfcmaes_1_1optimizer_1_1_de__cpp" kindref="compound">De_cpp</ref>(10000),<sp/>num_retries=32)</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&quot;push<sp/>retry.minimize(wrap(f,<sp/>dim),<sp/>bounds,<sp/>Bite_cpp(10000),<sp/>num_retries=32)&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(20):</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retry.minimize(<ref refid="classfcmaes_1_1optimizer_1_1wrapper" kindref="compound">wrapper</ref>(f),<sp/>bounds,<sp/>optimizer=<ref refid="classfcmaes_1_1optimizer_1_1_bite__cpp" kindref="compound">Bite_cpp</ref>(10000),<sp/>num_retries=32)</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>__name__<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;__main__&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespaceexamples_1_1robot_1ad7e10efd4ee195ca3e30475bbef6b25b" kindref="member">main</ref>()</highlight></codeline>
    </programlisting>
    <location file="examples/robot.py"/>
  </compounddef>
</doxygen>

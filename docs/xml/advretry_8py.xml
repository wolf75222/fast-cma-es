<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="advretry_8py" kind="file" language="Python">
    <compoundname>advretry.py</compoundname>
    <innerclass refid="classfcmaes_1_1advretry_1_1_store" prot="public">fcmaes::advretry::Store</innerclass>
    <innernamespace refid="namespacefcmaes">fcmaes</innernamespace>
    <innernamespace refid="namespacefcmaes_1_1advretry">fcmaes::advretry</innernamespace>
    <sectiondef kind="func">
      <memberdef kind="function" id="namespacefcmaes_1_1advretry_1ac919a7d43929d78301af60b182a99f24" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>OptimizeResult</type>
        <definition> OptimizeResult fcmaes.advretry.minimize</definition>
        <argsstring>(Callable[[ArrayLike], float] fun, Bounds bounds, Optional[float] value_limit=np.inf, Optional[int] num_retries=5000, Optional[int] workers=mp.cpu_count(), Optional[int] popsize=31, Optional[int] min_evaluations=1500, Optional[int] max_eval_fac=None, Optional[int] check_interval=100, Optional[int] capacity=500, Optional[float] stop_fitness=-np.inf, Optional[Optimizer] optimizer=None, Optional[int] statistic_num=0, Optional[str] datafile=None)</argsstring>
        <name>minimize</name>
        <qualifiedname>fcmaes.advretry.minimize</qualifiedname>
        <param>
          <type>Callable</type>
          <defname>fun</defname>
          <array>[[ArrayLike]</array>
        </param>
        <param>
          <type>float]</type>
          <declname>fun</declname>
          <defname>bounds</defname>
        </param>
        <param>
          <type>Bounds</type>
          <declname>bounds</declname>
          <defname>value_limit</defname>
        </param>
        <param>
          <type>Optional</type>
          <declname>value_limit</declname>
          <defname>num_retries</defname>
          <array>[float]</array>
          <defval>np.inf</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>num_retries</declname>
          <defname>workers</defname>
          <array>[int]</array>
          <defval>5000</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>workers</declname>
          <defname>popsize</defname>
          <array>[int]</array>
          <defval>mp.cpu_count()</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>popsize</declname>
          <defname>min_evaluations</defname>
          <array>[int]</array>
          <defval>31</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>min_evaluations</declname>
          <defname>max_eval_fac</defname>
          <array>[int]</array>
          <defval>1500</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>max_eval_fac</declname>
          <defname>check_interval</defname>
          <array>[int]</array>
          <defval>None</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>check_interval</declname>
          <defname>capacity</defname>
          <array>[int]</array>
          <defval>100</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>capacity</declname>
          <defname>stop_fitness</defname>
          <array>[int]</array>
          <defval>500</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>stop_fitness</declname>
          <defname>optimizer</defname>
          <array>[float]</array>
          <defval>-np.inf</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>optimizer</declname>
          <defname>statistic_num</defname>
          <array>[Optimizer]</array>
          <defval>None</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>statistic_num</declname>
          <defname>datafile</defname>
          <array>[int]</array>
          <defval>0</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>datafile</declname>
          <array>[str]</array>
          <defval>None</defval>
        </param>
        <briefdescription>
<para>Minimizes an objective function using a specified optimizer with options for retrying and parallel evaluations, storing intermediate and final results. </para>
        </briefdescription>
        <detaileddescription>
<para><verbatim>   fun (Callable[[ArrayLike], float]): The objective function to be minimized.
       It should accept a single argument as an array-like structure and return
       a float value representing the function evaluation.
</verbatim> <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>The bounds of the search space for the optimization problem. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>value_limit</parametername>
</parameternamelist>
<parameterdescription>
<para>The optional threshold for the objective function value. If exceeded, the optimization process will terminate. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>num_retries</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of retries allowed for optimization attempts. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>workers</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of workers available for parallel computation. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>popsize</parametername>
</parameternamelist>
<parameterdescription>
<para>The size of the population in the optimization algorithm. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>min_evaluations</parametername>
</parameternamelist>
<parameterdescription>
<para>The minimum number of function evaluations to perform before considering termination. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_eval_fac</parametername>
</parameternamelist>
<parameterdescription>
<para>The maximum number of evaluation factors allowed. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>check_interval</parametername>
</parameternamelist>
<parameterdescription>
<para>The interval at which evaluations are checked during </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>retries.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>capacity</parametername>
</parameternamelist>
<parameterdescription>
<para>The capacity of the storage to hold records and data during optimization. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>stop_fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>The stopping criteria for fitness. Optimization halts if this value is achieved or surpassed. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>optimizer</parametername>
</parameternamelist>
<parameterdescription>
<para>The optimization algorithm to be used. If None is provided, a default optimizer is created. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>statistic_num</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of statistical records to maintain if required. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>datafile</parametername>
</parameternamelist>
<parameterdescription>
<para>The path to the file used to store or load intermediate optimization data.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para></para>
</simplesect>
<simplesect kind="return"><para>OptimizeResult The result of the optimization process, which includes details like the best-found solution, its fitness value, and related metadata about the optimization process. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/advretry.py" line="103" column="1" bodyfile="fcmaes/advretry.py" bodystart="117" bodyend="131"/>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1advretry_1afa7f53840d446eae71b0a9d7a01077e4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>OptimizeResult</type>
        <definition> OptimizeResult fcmaes.advretry.retry</definition>
        <argsstring>(Store store, Callable optimize, Optional[float] value_limit=np.inf, workers=mp.cpu_count(), stop_fitness=-np.inf)</argsstring>
        <name>retry</name>
        <qualifiedname>fcmaes.advretry.retry</qualifiedname>
        <param>
          <type>Store</type>
          <declname>store</declname>
        </param>
        <param>
          <type>Callable</type>
          <declname>optimize</declname>
        </param>
        <param>
          <type>Optional</type>
          <declname>value_limit</declname>
          <array>[float]</array>
          <defval>np.inf</defval>
        </param>
        <param>
          <type>workers</type>
          <defname>workers</defname>
          <defval>mp.cpu_count()</defval>
        </param>
        <param>
          <type>stop_fitness</type>
          <defname>stop_fitness</defname>
          <defval>-np.inf</defval>
        </param>
        <briefdescription>
<para>Retries the optimization process using multiple worker processes and random number generators. </para>
        </briefdescription>
        <detaileddescription>
<para>This function parallelizes the optimization task, applies a stopping criterion based on the provided fitness value, and selects the best result from the optimization attempts.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>store</parametername>
</parameternamelist>
<parameterdescription>
<para>Stores results of optimization during the process. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>optimize</parametername>
</parameternamelist>
<parameterdescription>
<para>The optimization function to be applied. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>value_limit</parametername>
</parameternamelist>
<parameterdescription>
<para>The upper limit for the function value considered in optimization. Defaults to positive infinity (np.inf). </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>workers</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of parallel workers to allocate for the process. Defaults to the total number of CPU cores available. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>stop_fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>The stopping fitness criterion for the optimization process. The optimization stops when this value is reached. Defaults to negative infinity (-np.inf).</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para></para>
</simplesect>
<simplesect kind="return"><para>OptimizeResult The result of the optimization process containing the best solution found (x), the fitness of this solution (fun), the number of function evaluations (nfev), and a success flag (success). </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/advretry.py" line="154" column="1" bodyfile="fcmaes/advretry.py" bodystart="158" bodyend="169"/>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1advretry_1a5e2cd1f8c09ad3861f3e9fec0c5d8ea0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>OptimizeResult</type>
        <definition> OptimizeResult fcmaes.advretry.minimize_plot</definition>
        <argsstring>(str name, Optimizer optimizer, Callable[[ArrayLike], float] fun, Bounds bounds, Optional[float] value_limit=np.inf, Optional[float] plot_limit=np.inf, Optional[int] num_retries=1024, Optional[int] workers=mp.cpu_count(), Optional[float] stop_fitness=-np.inf, Optional[int] statistic_num=5000)</argsstring>
        <name>minimize_plot</name>
        <qualifiedname>fcmaes.advretry.minimize_plot</qualifiedname>
        <param>
          <type>str</type>
          <declname>name</declname>
        </param>
        <param>
          <type>Optimizer</type>
          <declname>optimizer</declname>
        </param>
        <param>
          <type>Callable</type>
          <defname>fun</defname>
          <array>[[ArrayLike]</array>
        </param>
        <param>
          <type>float]</type>
          <declname>fun</declname>
          <defname>bounds</defname>
        </param>
        <param>
          <type>Bounds</type>
          <declname>bounds</declname>
          <defname>value_limit</defname>
        </param>
        <param>
          <type>Optional</type>
          <declname>value_limit</declname>
          <defname>plot_limit</defname>
          <array>[float]</array>
          <defval>np.inf</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>plot_limit</declname>
          <defname>num_retries</defname>
          <array>[float]</array>
          <defval>np.inf</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>num_retries</declname>
          <defname>workers</defname>
          <array>[int]</array>
          <defval>1024</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>workers</declname>
          <defname>stop_fitness</defname>
          <array>[int]</array>
          <defval>mp.cpu_count()</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>stop_fitness</declname>
          <defname>statistic_num</defname>
          <array>[float]</array>
          <defval>-np.inf</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>statistic_num</declname>
          <array>[int]</array>
          <defval>5000</defval>
        </param>
        <briefdescription>
<para>Minimizes an objective function using a specified optimizer and plots the optimization progress. </para>
        </briefdescription>
        <detaileddescription>
<para>The function performs multiple retries, applies value and plot limits, and saves the optimization improvements for further analysis.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>name</parametername>
</parameternamelist>
<parameterdescription>
<para>The base name for the optimization run, used in logs and output file names. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>optimizer</parametername>
</parameternamelist>
<parameterdescription>
<para>The optimization algorithm instance to be used. fun (Callable[[ArrayLike], float]): The objective function to minimize. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>Bounds for the input space of the optimization. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>value_limit</parametername>
</parameternamelist>
<parameterdescription>
<para>The threshold for the function value beyond which the results are not considered. Defaults to infinity. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>plot_limit</parametername>
</parameternamelist>
<parameterdescription>
<para>The limit for the maximum function value to include in the plot. Defaults to infinity. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>num_retries</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of optimization retries allowed. Defaults to 1024. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>workers</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of parallel workers to use during optimization. Defaults to the number of CPU cores available. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>stop_fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>The fitness threshold to stop the optimization early if reached. Defaults to negative infinity. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>statistic_num</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of stored samples for statistical analysis during optimization. Defaults to 5000.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para></para>
</simplesect>
<simplesect kind="return"><para>OptimizeResult The results of the optimization, which include details on the best solution found, its fitness, and other metrics. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/advretry.py" line="198" column="1" bodyfile="fcmaes/advretry.py" bodystart="207" bodyend="222"/>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1advretry_1a2e67b1339ce1e546807f7cba0a45d8c9" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>fcmaes.advretry._retry_loop</definition>
        <argsstring>(pid, rgs, store, optimize, value_limit, stop_fitness=-np.inf)</argsstring>
        <name>_retry_loop</name>
        <qualifiedname>fcmaes.advretry._retry_loop</qualifiedname>
        <param>
          <type>pid</type>
          <defname>pid</defname>
        </param>
        <param>
          <type>rgs</type>
          <defname>rgs</defname>
        </param>
        <param>
          <type>store</type>
          <defname>store</defname>
        </param>
        <param>
          <type>optimize</type>
          <defname>optimize</defname>
        </param>
        <param>
          <type>value_limit</type>
          <defname>value_limit</defname>
        </param>
        <param>
          <type>stop_fitness</type>
          <defname>stop_fitness</defname>
          <defval>-np.inf</defval>
        </param>
        <briefdescription>
<para>Retries a loop for optimization until stopping criteria are met. </para>
        </briefdescription>
        <detaileddescription>
<para>The function performs optimization processes in a loop, sampling solutions and evaluating their fitness to improve a defined objective within bounds. It also incorporates handling parallel executions for optimization using private random generator and thread limits.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>pid</parametername>
</parameternamelist>
<parameterdescription>
<para>The process or thread identifier for parallel computation. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rgs</parametername>
</parameternamelist>
<parameterdescription>
<para>A list of random generator states that control the stochastic behavior of each process or thread. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>store</parametername>
</parameternamelist>
<parameterdescription>
<para>The shared data store, containing optimization inherent details like lower and upper bounds, number of retries, best fitness achieved, and statistical configurations. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>optimize</parametername>
</parameternamelist>
<parameterdescription>
<para>The optimization function responsible for processing sample solutions and measuring fitness outcomes. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>value_limit</parametername>
</parameternamelist>
<parameterdescription>
<para>The maximum value allowed for a solution, restricting unacceptable outliers in the results. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>stop_fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>The fitness threshold at which the optimization ceases if exceeded by best achieved fitness. Defaults to negative infinity. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/advretry.py" line="886" column="1" bodyfile="fcmaes/advretry.py" bodystart="886" bodyend="900"/>
        <references refid="namespacefcmaes_1_1advretry_1a6c3c42e1fa5ab01ff7ba59710578ebb5" compoundref="advretry_8py" startline="922" endline="935">fcmaes.advretry._crossover</references>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1advretry_1a6c3c42e1fa5ab01ff7ba59710578ebb5" prot="protected" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>fcmaes.advretry._crossover</definition>
        <argsstring>(fun, store, optimize, rg)</argsstring>
        <name>_crossover</name>
        <qualifiedname>fcmaes.advretry._crossover</qualifiedname>
        <param>
          <type>fun</type>
          <defname>fun</defname>
        </param>
        <param>
          <type>store</type>
          <defname>store</defname>
        </param>
        <param>
          <type>optimize</type>
          <defname>optimize</defname>
        </param>
        <param>
          <type>rg</type>
          <defname>rg</defname>
        </param>
        <briefdescription>
<para>Performs a crossover operation to optimize a function. </para>
        </briefdescription>
        <detaileddescription>
<para>This function attempts to optimize a given function using an optimization strategy by utilizing the provided parameters and probabilistic logic to decide whether crossover should be performed. It uses the specified random generator and optimization function, and updates the solution store upon successful optimization completion.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>fun</parametername>
</parameternamelist>
<parameterdescription>
<para>The objective function to be optimized. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>store</parametername>
</parameternamelist>
<parameterdescription>
<para>An object that stores limits, results, and other related data. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>optimize</parametername>
</parameternamelist>
<parameterdescription>
<para>A callable function used to perform the optimization. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rg</parametername>
</parameternamelist>
<parameterdescription>
<para>A random generator for probabilistic decisions and randomness during the optimization process.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para></para>
</simplesect>
<simplesect kind="return"><para>bool True if the optimization process completes successfully; False otherwise. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/advretry.py" line="922" column="1" bodyfile="fcmaes/advretry.py" bodystart="922" bodyend="935"/>
        <referencedby refid="namespacefcmaes_1_1advretry_1a2e67b1339ce1e546807f7cba0a45d8c9" compoundref="advretry_8py" startline="886" endline="900">fcmaes.advretry._retry_loop</referencedby>
      </memberdef>
    </sectiondef>
    <briefdescription>
<para>============================================================================= </para>
    </briefdescription>
    <detaileddescription>
<para>Fast version 1.6.11</para>
<para>(c) 2025 – Dietmar Wolz (c) 2025 – Latitude</para>
<para>License MIT</para>
<para><itemizedlist>
<listitem><para><ref refid="advretry_8py" kindref="compound">advretry.py</ref></para>
</listitem></itemizedlist>
</para>
<para><simplesect kind="par"><title>Description</title><para><itemizedlist>
<listitem><para>This module implements an advanced retry mechanism for optimization tasks using the Fast CMA-ES algorithm. It provides functionality for parallel evaluations, statistical tracking, and result persistence.</para>
</listitem><listitem><para>The retry mechanism allows for multiple attempts to optimize a function while managing resources efficiently. It supports parallel processing and statistical analysis of the optimization process.</para>
</listitem></itemizedlist>
</para>
</simplesect>
<simplesect kind="author"><para>:<itemizedlist>
<listitem><para>Dietmar Wolz <programlisting><codeline><highlight class="normal">-<sp/>romain.despoullains</highlight><highlight class="preprocessor">@latitude.eu</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">-<sp/>corentin.generet</highlight><highlight class="preprocessor">@latitude.eu</highlight></codeline>
</programlisting></para>
</listitem></itemizedlist>
</para>
</simplesect>
<simplesect kind="par"><title>References</title><para><itemizedlist>
<listitem><para>[1] <ulink url="https://github.com/dietmarwo/fast-cma-es">https://github.com/dietmarwo/fast-cma-es</ulink></para>
</listitem></itemizedlist>
</para>
</simplesect>
<simplesect kind="par"><title>Documentation</title><para><itemizedlist>
<listitem></listitem></itemizedlist>
</para>
</simplesect>
<hruler/>
 </para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacefcmaes_1_1advretry" refkind="compound"><highlight class="comment">#<sp/>-*-<sp/>coding:<sp/>utf-8<sp/>-*-</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="3"><highlight class="stringliteral">=============================================================================</highlight></codeline>
<codeline lineno="4"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="5"><highlight class="stringliteral"><sp/>Fast<sp/>CMA-ES<sp/>-<sp/>version<sp/>1.6.11</highlight></codeline>
<codeline lineno="6"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="7"><highlight class="stringliteral"><sp/>(c)<sp/>2025<sp/>–<sp/>Dietmar<sp/>Wolz</highlight></codeline>
<codeline lineno="8"><highlight class="stringliteral"><sp/>(c)<sp/>2025<sp/>–<sp/>Latitude</highlight></codeline>
<codeline lineno="9"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="10"><highlight class="stringliteral"><sp/>License:<sp/>MIT</highlight></codeline>
<codeline lineno="11"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="12"><highlight class="stringliteral"><sp/>File:</highlight></codeline>
<codeline lineno="13"><highlight class="stringliteral"><sp/><sp/>-<sp/>advretry.py</highlight></codeline>
<codeline lineno="14"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="15"><highlight class="stringliteral"><sp/>Description:</highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral"><sp/><sp/>-<sp/>This<sp/>module<sp/>implements<sp/>an<sp/>advanced<sp/>retry<sp/>mechanism<sp/>for<sp/>optimization<sp/>tasks</highlight></codeline>
<codeline lineno="17"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>using<sp/>the<sp/>Fast<sp/>CMA-ES<sp/>algorithm.<sp/>It<sp/>provides<sp/>functionality<sp/>for<sp/>parallel</highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>evaluations,<sp/>statistical<sp/>tracking,<sp/>and<sp/>result<sp/>persistence.</highlight></codeline>
<codeline lineno="19"><highlight class="stringliteral"><sp/><sp/>-<sp/>The<sp/>retry<sp/>mechanism<sp/>allows<sp/>for<sp/>multiple<sp/>attempts<sp/>to<sp/>optimize<sp/>a<sp/>function</highlight></codeline>
<codeline lineno="20"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>while<sp/>managing<sp/>resources<sp/>efficiently.<sp/>It<sp/>supports<sp/>parallel<sp/>processing<sp/>and</highlight></codeline>
<codeline lineno="21"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>statistical<sp/>analysis<sp/>of<sp/>the<sp/>optimization<sp/>process.</highlight></codeline>
<codeline lineno="22"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral"><sp/>Authors:</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"><sp/><sp/>-<sp/>Dietmar<sp/>Wolz</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"><sp/><sp/>-<sp/>romain.despoullains@latitude.eu</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"><sp/><sp/>-<sp/>corentin.generet@latitude.eu</highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral"><sp/>References:</highlight></codeline>
<codeline lineno="29"><highlight class="stringliteral"><sp/><sp/>-<sp/>[1]<sp/>https://github.com/dietmarwo/fast-cma-es</highlight></codeline>
<codeline lineno="30"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="31"><highlight class="stringliteral"><sp/>Documentation:</highlight></codeline>
<codeline lineno="32"><highlight class="stringliteral"><sp/><sp/>-</highlight></codeline>
<codeline lineno="33"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="34"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="35"><highlight class="stringliteral">=============================================================================</highlight></codeline>
<codeline lineno="36"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>__future__<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>annotations</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>time</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>os</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>math</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>threadpoolctl</highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>_pickle<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>cPickle</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>bz2</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ctypes<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>ct</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>numpy<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>np</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>numpy.linalg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>norm</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>random</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>multiprocessing<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>mp</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>multiprocessing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Process</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>numpy.random<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Generator,<sp/>PCG64DXSM,<sp/>SeedSequence</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>scipy.optimize<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>OptimizeResult,<sp/>Bounds</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>loguru<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>logger</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacefcmaes_1_1retry" kindref="compound">fcmaes.retry</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>_convertBounds,<sp/>plot,<sp/>Shared2d</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacefcmaes_1_1optimizer" kindref="compound">fcmaes.optimizer</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Optimizer,<sp/>dtime,<sp/>fitting,<sp/>de_cma</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Optional,<sp/>Callable,<sp/>List,<sp/>Tuple</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>numpy.typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ArrayLike</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal">os.environ[</highlight><highlight class="stringliteral">&apos;MKL_DEBUG_CPU_TYPE&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;5&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal">os.environ[</highlight><highlight class="stringliteral">&apos;MKL_NUM_THREADS&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;1&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal">os.environ[</highlight><highlight class="stringliteral">&apos;OPENBLAS_NUM_THREADS&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;1&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1advretry_1ac919a7d43929d78301af60b182a99f24" kindref="member">minimize</ref>(fun:<sp/>Callable[[ArrayLike],<sp/>float],<sp/></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Bounds,</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_limit:<sp/>Optional[float]<sp/>=<sp/>np.inf,</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries:<sp/>Optional[int]<sp/>=<sp/>5000,</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers:<sp/>Optional[int]<sp/>=<sp/>mp.cpu_count(),</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>popsize:<sp/>Optional[int]<sp/>=<sp/>31,</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_evaluations:<sp/>Optional[int]<sp/>=<sp/>1500,</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac:<sp/>Optional[int]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>check_interval:<sp/>Optional[int]<sp/>=<sp/>100,</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>capacity:<sp/>Optional[int]<sp/>=<sp/>500,</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stop_fitness:<sp/>Optional[float]<sp/>=<sp/>-np.inf,</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimizer:<sp/>Optional[Optimizer]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>statistic_num:<sp/>Optional[int]<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>datafile:<sp/>Optional[str]<sp/><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>-&gt;<sp/>OptimizeResult:</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="83"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Minimizes<sp/>an<sp/>objective<sp/>function<sp/>using<sp/>a<sp/>specified<sp/>optimizer<sp/>with<sp/>options<sp/>for<sp/>retrying</highlight></codeline>
<codeline lineno="84"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>and<sp/>parallel<sp/>evaluations,<sp/>storing<sp/>intermediate<sp/>and<sp/>final<sp/>results.</highlight></codeline>
<codeline lineno="85"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="86"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="87"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fun<sp/>(Callable[[ArrayLike],<sp/>float]):<sp/>The<sp/>objective<sp/>function<sp/>to<sp/>be<sp/>minimized.</highlight></codeline>
<codeline lineno="88"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>It<sp/>should<sp/>accept<sp/>a<sp/>single<sp/>argument<sp/>as<sp/>an<sp/>array-like<sp/>structure<sp/>and<sp/>return</highlight></codeline>
<codeline lineno="89"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a<sp/>float<sp/>value<sp/>representing<sp/>the<sp/>function<sp/>evaluation.</highlight></codeline>
<codeline lineno="90"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds<sp/>(Bounds):<sp/>The<sp/>bounds<sp/>of<sp/>the<sp/>search<sp/>space<sp/>for<sp/>the<sp/>optimization<sp/>problem.</highlight></codeline>
<codeline lineno="91"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_limit<sp/>(Optional[float]):<sp/>The<sp/>optional<sp/>threshold<sp/>for<sp/>the<sp/>objective<sp/>function<sp/>value.</highlight></codeline>
<codeline lineno="92"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>exceeded,<sp/>the<sp/>optimization<sp/>process<sp/>will<sp/>terminate.</highlight></codeline>
<codeline lineno="93"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries<sp/>(Optional[int]):<sp/>The<sp/>number<sp/>of<sp/>retries<sp/>allowed<sp/>for<sp/>optimization<sp/>attempts.</highlight></codeline>
<codeline lineno="94"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers<sp/>(Optional[int]):<sp/>The<sp/>number<sp/>of<sp/>workers<sp/>available<sp/>for<sp/>parallel<sp/>computation.</highlight></codeline>
<codeline lineno="95"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>popsize<sp/>(Optional[int]):<sp/>The<sp/>size<sp/>of<sp/>the<sp/>population<sp/>in<sp/>the<sp/>optimization<sp/>algorithm.</highlight></codeline>
<codeline lineno="96"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_evaluations<sp/>(Optional[int]):<sp/>The<sp/>minimum<sp/>number<sp/>of<sp/>function<sp/>evaluations<sp/>to<sp/>perform</highlight></codeline>
<codeline lineno="97"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>before<sp/>considering<sp/>termination.</highlight></codeline>
<codeline lineno="98"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac<sp/>(Optional[int]):<sp/>The<sp/>maximum<sp/>number<sp/>of<sp/>evaluation<sp/>factors<sp/>allowed.</highlight></codeline>
<codeline lineno="99"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>check_interval<sp/>(Optional[int]):<sp/>The<sp/>interval<sp/>at<sp/>which<sp/>evaluations<sp/>are<sp/>checked<sp/>during</highlight></codeline>
<codeline lineno="100"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retries.</highlight></codeline>
<codeline lineno="101"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>capacity<sp/>(Optional[int]):<sp/>The<sp/>capacity<sp/>of<sp/>the<sp/>storage<sp/>to<sp/>hold<sp/>records<sp/>and<sp/>data</highlight></codeline>
<codeline lineno="102"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>during<sp/>optimization.</highlight></codeline>
<codeline lineno="103" refid="namespacefcmaes_1_1advretry_1ac919a7d43929d78301af60b182a99f24" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stop_fitness<sp/>(Optional[float]):<sp/>The<sp/>stopping<sp/>criteria<sp/>for<sp/>fitness.<sp/>Optimization<sp/>halts</highlight></codeline>
<codeline lineno="104"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>this<sp/>value<sp/>is<sp/>achieved<sp/>or<sp/>surpassed.</highlight></codeline>
<codeline lineno="105"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimizer<sp/>(Optional[Optimizer]):<sp/>The<sp/>optimization<sp/>algorithm<sp/>to<sp/>be<sp/>used.<sp/>If<sp/>None<sp/>is</highlight></codeline>
<codeline lineno="106"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>provided,<sp/>a<sp/>default<sp/>optimizer<sp/>is<sp/>created.</highlight></codeline>
<codeline lineno="107"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>statistic_num<sp/>(Optional[int]):<sp/>The<sp/>number<sp/>of<sp/>statistical<sp/>records<sp/>to<sp/>maintain<sp/>if<sp/>required.</highlight></codeline>
<codeline lineno="108"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>datafile<sp/>(Optional[str]):<sp/>The<sp/>path<sp/>to<sp/>the<sp/>file<sp/>used<sp/>to<sp/>store<sp/>or<sp/>load<sp/>intermediate</highlight></codeline>
<codeline lineno="109"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimization<sp/>data.</highlight></codeline>
<codeline lineno="110"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="111"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="112"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OptimizeResult:<sp/>The<sp/>result<sp/>of<sp/>the<sp/>optimization<sp/>process,<sp/>which<sp/>includes<sp/>details<sp/>like</highlight></codeline>
<codeline lineno="113"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>best-found<sp/>solution,<sp/>its<sp/>fitness<sp/>value,<sp/>and<sp/>related<sp/>metadata<sp/>about<sp/>the</highlight></codeline>
<codeline lineno="114"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimization<sp/>process.</highlight></codeline>
<codeline lineno="115"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>optimizer<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimizer<sp/>=<sp/>de_cma(min_evaluations,<sp/>popsize,<sp/>stop_fitness)<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>max_eval_fac<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac<sp/>=<sp/>int(min(50,<sp/>1<sp/>+<sp/>num_retries<sp/>//<sp/>check_interval))</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/>store<sp/>=<sp/><ref refid="classfcmaes_1_1advretry_1_1_store" kindref="compound">Store</ref>(fun,<sp/>bounds,<sp/>max_eval_fac,<sp/>check_interval,<sp/>capacity,<sp/>num_retries,<sp/></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>statistic_num,<sp/>datafile)</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>datafile<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>store.load(datafile)</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>retry(store,<sp/>optimizer.minimize,<sp/>value_limit,<sp/>workers,<sp/>stop_fitness)</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">retry(store:<sp/>Store,<sp/></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimize:<sp/>Callable,<sp/></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_limit:Optional[float]<sp/>=<sp/>np.inf,<sp/></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers=mp.cpu_count(),<sp/></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stop_fitness<sp/>=<sp/>-np.inf)<sp/>-&gt;<sp/>OptimizeResult:</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="136"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Retries<sp/>the<sp/>optimization<sp/>process<sp/>using<sp/>multiple<sp/>worker<sp/>processes<sp/>and<sp/>random</highlight></codeline>
<codeline lineno="137"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>number<sp/>generators.<sp/>This<sp/>function<sp/>parallelizes<sp/>the<sp/>optimization<sp/>task,<sp/>applies</highlight></codeline>
<codeline lineno="138"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>a<sp/>stopping<sp/>criterion<sp/>based<sp/>on<sp/>the<sp/>provided<sp/>fitness<sp/>value,<sp/>and<sp/>selects<sp/>the<sp/>best</highlight></codeline>
<codeline lineno="139"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>result<sp/>from<sp/>the<sp/>optimization<sp/>attempts.</highlight></codeline>
<codeline lineno="140"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="141"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="142"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>store<sp/>(Store):<sp/>Stores<sp/>results<sp/>of<sp/>optimization<sp/>during<sp/>the<sp/>process.</highlight></codeline>
<codeline lineno="143"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimize<sp/>(Callable):<sp/>The<sp/>optimization<sp/>function<sp/>to<sp/>be<sp/>applied.</highlight></codeline>
<codeline lineno="144"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_limit<sp/>(Optional[float]):<sp/>The<sp/>upper<sp/>limit<sp/>for<sp/>the<sp/>function<sp/>value</highlight></codeline>
<codeline lineno="145"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>considered<sp/>in<sp/>optimization.<sp/>Defaults<sp/>to<sp/>positive<sp/>infinity<sp/>(np.inf).</highlight></codeline>
<codeline lineno="146"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers<sp/>(int):<sp/>The<sp/>number<sp/>of<sp/>parallel<sp/>workers<sp/>to<sp/>allocate<sp/>for<sp/>the<sp/>process.</highlight></codeline>
<codeline lineno="147"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Defaults<sp/>to<sp/>the<sp/>total<sp/>number<sp/>of<sp/>CPU<sp/>cores<sp/>available.</highlight></codeline>
<codeline lineno="148"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stop_fitness<sp/>(float):<sp/>The<sp/>stopping<sp/>fitness<sp/>criterion<sp/>for<sp/>the<sp/>optimization</highlight></codeline>
<codeline lineno="149"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.<sp/>The<sp/>optimization<sp/>stops<sp/>when<sp/>this<sp/>value<sp/>is<sp/>reached.<sp/>Defaults</highlight></codeline>
<codeline lineno="150"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>to<sp/>negative<sp/>infinity<sp/>(-np.inf).</highlight></codeline>
<codeline lineno="151"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="152"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="153"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OptimizeResult:<sp/>The<sp/>result<sp/>of<sp/>the<sp/>optimization<sp/>process<sp/>containing<sp/>the<sp/>best</highlight></codeline>
<codeline lineno="154" refid="namespacefcmaes_1_1advretry_1afa7f53840d446eae71b0a9d7a01077e4" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>solution<sp/>found<sp/>(x),<sp/>the<sp/>fitness<sp/>of<sp/>this<sp/>solution<sp/>(fun),<sp/>the<sp/>number<sp/>of</highlight></codeline>
<codeline lineno="155"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>function<sp/>evaluations<sp/>(nfev),<sp/>and<sp/>a<sp/>success<sp/>flag<sp/>(success).</highlight></codeline>
<codeline lineno="156"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/>sg<sp/>=<sp/>SeedSequence()</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>rgs<sp/>=<sp/>[Generator(PCG64DXSM(s))<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>s<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>sg.spawn(workers)]</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>proc=[Process(target=_retry_loop,</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>args=(pid,<sp/>rgs,<sp/>store,<sp/>optimize,<sp/>value_limit,<sp/>stop_fitness))<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>pid<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(workers)]</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/>[p.start()<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>p<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>proc]</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/>[p.join()<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>p<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>proc]</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/>store.sort()</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>store.dump()</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>OptimizeResult(x=store.get_x_best(),<sp/>fun=store.get_y_best(),<sp/></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nfev=store.get_count_evals(),<sp/>success=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1advretry_1a5e2cd1f8c09ad3861f3e9fec0c5d8ea0" kindref="member">minimize_plot</ref>(name:<sp/>str,<sp/></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimizer:<sp/>Optimizer,<sp/></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fun:<sp/>Callable[[ArrayLike],<sp/>float],<sp/></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Bounds,<sp/></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_limit:<sp/>Optional[float]<sp/>=<sp/>np.inf,<sp/></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>plot_limit:<sp/>Optional[float]<sp/>=<sp/>np.inf,<sp/></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries:<sp/>Optional[int]<sp/>=<sp/>1024,<sp/></highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers:<sp/>Optional[int]<sp/>=<sp/>mp.cpu_count(),<sp/></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stop_fitness:<sp/>Optional[float]<sp/>=<sp/>-np.inf,<sp/></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>statistic_num:<sp/>Optional[int]<sp/>=<sp/>5000)<sp/>-&gt;<sp/>OptimizeResult:</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="179"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Minimizes<sp/>an<sp/>objective<sp/>function<sp/>using<sp/>a<sp/>specified<sp/>optimizer<sp/>and<sp/>plots<sp/>the<sp/>optimization</highlight></codeline>
<codeline lineno="180"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>progress.<sp/>The<sp/>function<sp/>performs<sp/>multiple<sp/>retries,<sp/>applies<sp/>value<sp/>and<sp/>plot<sp/>limits,</highlight></codeline>
<codeline lineno="181"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>and<sp/>saves<sp/>the<sp/>optimization<sp/>improvements<sp/>for<sp/>further<sp/>analysis.</highlight></codeline>
<codeline lineno="182"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="183"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="184"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>(str):<sp/>The<sp/>base<sp/>name<sp/>for<sp/>the<sp/>optimization<sp/>run,<sp/>used<sp/>in<sp/>logs<sp/>and</highlight></codeline>
<codeline lineno="185"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>output<sp/>file<sp/>names.</highlight></codeline>
<codeline lineno="186"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimizer<sp/>(Optimizer):<sp/>The<sp/>optimization<sp/>algorithm<sp/>instance<sp/>to<sp/>be<sp/>used.</highlight></codeline>
<codeline lineno="187"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fun<sp/>(Callable[[ArrayLike],<sp/>float]):<sp/>The<sp/>objective<sp/>function<sp/>to<sp/>minimize.</highlight></codeline>
<codeline lineno="188"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds<sp/>(Bounds):<sp/>Bounds<sp/>for<sp/>the<sp/>input<sp/>space<sp/>of<sp/>the<sp/>optimization.</highlight></codeline>
<codeline lineno="189"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_limit<sp/>(Optional[float]):<sp/>The<sp/>threshold<sp/>for<sp/>the<sp/>function<sp/>value<sp/>beyond</highlight></codeline>
<codeline lineno="190"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>which<sp/>the<sp/>results<sp/>are<sp/>not<sp/>considered.<sp/>Defaults<sp/>to<sp/>infinity.</highlight></codeline>
<codeline lineno="191"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>plot_limit<sp/>(Optional[float]):<sp/>The<sp/>limit<sp/>for<sp/>the<sp/>maximum<sp/>function<sp/>value<sp/>to</highlight></codeline>
<codeline lineno="192"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>include<sp/>in<sp/>the<sp/>plot.<sp/>Defaults<sp/>to<sp/>infinity.</highlight></codeline>
<codeline lineno="193"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries<sp/>(Optional[int]):<sp/>The<sp/>number<sp/>of<sp/>optimization<sp/>retries<sp/>allowed.</highlight></codeline>
<codeline lineno="194"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Defaults<sp/>to<sp/>1024.</highlight></codeline>
<codeline lineno="195"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers<sp/>(Optional[int]):<sp/>The<sp/>number<sp/>of<sp/>parallel<sp/>workers<sp/>to<sp/>use<sp/>during</highlight></codeline>
<codeline lineno="196"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimization.<sp/>Defaults<sp/>to<sp/>the<sp/>number<sp/>of<sp/>CPU<sp/>cores<sp/>available.</highlight></codeline>
<codeline lineno="197"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stop_fitness<sp/>(Optional[float]):<sp/>The<sp/>fitness<sp/>threshold<sp/>to<sp/>stop<sp/>the</highlight></codeline>
<codeline lineno="198" refid="namespacefcmaes_1_1advretry_1a5e2cd1f8c09ad3861f3e9fec0c5d8ea0" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimization<sp/>early<sp/>if<sp/>reached.<sp/>Defaults<sp/>to<sp/>negative<sp/>infinity.</highlight></codeline>
<codeline lineno="199"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>statistic_num<sp/>(Optional[int]):<sp/>The<sp/>number<sp/>of<sp/>stored<sp/>samples<sp/>for<sp/>statistical</highlight></codeline>
<codeline lineno="200"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>analysis<sp/>during<sp/>optimization.<sp/>Defaults<sp/>to<sp/>5000.</highlight></codeline>
<codeline lineno="201"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="202"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="203"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OptimizeResult:<sp/>The<sp/>results<sp/>of<sp/>the<sp/>optimization,<sp/>which<sp/>include<sp/>details<sp/>on</highlight></codeline>
<codeline lineno="204"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>best<sp/>solution<sp/>found,<sp/>its<sp/>fitness,<sp/>and<sp/>other<sp/>metrics.</highlight></codeline>
<codeline lineno="205"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/>time0<sp/>=<sp/>time.perf_counter()<sp/></highlight><highlight class="comment">#<sp/>optimization<sp/>start<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/>name<sp/>+=<sp/></highlight><highlight class="stringliteral">&apos;_&apos;</highlight><highlight class="normal"><sp/>+<sp/>optimizer.name</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&apos;optimize<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/>name)<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/>store<sp/>=<sp/><ref refid="classfcmaes_1_1advretry_1_1_store" kindref="compound">Store</ref>(fun,<sp/>bounds,<sp/>capacity<sp/>=<sp/>500,<sp/>statistic_num<sp/>=<sp/>statistic_num,<sp/></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries=num_retries)</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>retry(store,<sp/>optimizer.minimize,<sp/>value_limit,<sp/>workers,<sp/>stop_fitness)</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/>impr<sp/>=<sp/>store.get_improvements()</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/>np.savez_compressed(name,<sp/>ys=impr)</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/>filtered<sp/>=<sp/>np.array([imp<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>imp<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>impr<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>imp[1]<sp/>&lt;<sp/>plot_limit])</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(filtered)<sp/>&gt;<sp/>0:<sp/>impr<sp/>=<sp/>filtered</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/>logger.info(name<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;<sp/>time<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/>str(dtime(time0)))<sp/></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/>plot(impr,<sp/></highlight><highlight class="stringliteral">&apos;progress_aret.&apos;</highlight><highlight class="normal"><sp/>+<sp/>name<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;.png&apos;</highlight><highlight class="normal">,<sp/>label<sp/>=<sp/>name,<sp/></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xlabel<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;time<sp/>in<sp/>sec&apos;</highlight><highlight class="normal">,<sp/>ylabel<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;$f$&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store" kindref="compound">Store</ref>(object):</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="223"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Manages<sp/>the<sp/>storing,<sp/>evaluation,<sp/>and<sp/>tracking<sp/>of<sp/>data<sp/>in<sp/>an<sp/>optimization<sp/>problem.</highlight></codeline>
<codeline lineno="224"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="225"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>The<sp/>class<sp/>enables<sp/>handling<sp/>function<sp/>evaluations<sp/>and<sp/>implements<sp/>tools<sp/>for<sp/>statistics</highlight></codeline>
<codeline lineno="226"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>tracking,<sp/>result<sp/>persistence,<sp/>and<sp/>multiprocessing<sp/>compatibility.<sp/>It<sp/>facilitates<sp/>managing</highlight></codeline>
<codeline lineno="227"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>optimization<sp/>tasks<sp/>with<sp/>specific<sp/>bounds,<sp/>ensuring<sp/>efficient<sp/>computational<sp/>resource<sp/>usage</highlight></codeline>
<codeline lineno="228"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>and<sp/>tracking<sp/>statistical<sp/>progress<sp/>over<sp/>iterations.</highlight></codeline>
<codeline lineno="229"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="230"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Attributes:</highlight></codeline>
<codeline lineno="231"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fun<sp/>(Callable[[ArrayLike],<sp/>float]):<sp/>The<sp/>fitness<sp/>function<sp/>to<sp/>be<sp/>optimized.</highlight></codeline>
<codeline lineno="232"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lower<sp/>(ArrayLike):<sp/>The<sp/>lower<sp/>bounds<sp/>for<sp/>the<sp/>optimization<sp/>problem.</highlight></codeline>
<codeline lineno="233"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>upper<sp/>(ArrayLike):<sp/>The<sp/>upper<sp/>bounds<sp/>for<sp/>the<sp/>optimization<sp/>problem.</highlight></codeline>
<codeline lineno="234" refid="classfcmaes_1_1advretry_1_1_store" refkind="compound"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delta<sp/>(ArrayLike):<sp/>The<sp/>difference<sp/>between<sp/>upper<sp/>and<sp/>lower<sp/>bounds.</highlight></codeline>
<codeline lineno="235"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>capacity<sp/>(int):<sp/>Maximum<sp/>storage<sp/>capacity<sp/>for<sp/>evaluated<sp/>results.</highlight></codeline>
<codeline lineno="236"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries<sp/>(int):<sp/>Maximum<sp/>number<sp/>of<sp/>retries<sp/>during<sp/>the<sp/>optimization<sp/>process.</highlight></codeline>
<codeline lineno="237"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eval_fac_incr<sp/>(float):<sp/>Increment<sp/>factor<sp/>for<sp/>evaluation<sp/>adjustments.</highlight></codeline>
<codeline lineno="238"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac<sp/>(int):<sp/>Maximum<sp/>evaluation<sp/>factor<sp/>throughout<sp/>the<sp/>retries.</highlight></codeline>
<codeline lineno="239"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>check_interval<sp/>(int):<sp/>Interval<sp/>for<sp/>sorting<sp/>the<sp/>evaluation<sp/>store.</highlight></codeline>
<codeline lineno="240"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dim<sp/>(int):<sp/>Dimension<sp/>of<sp/>the<sp/>optimization<sp/>problem<sp/>based<sp/>on<sp/>bounds.</highlight></codeline>
<codeline lineno="241"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t0<sp/>(float):<sp/>Timestamp<sp/>indicating<sp/>the<sp/>start<sp/>of<sp/>evaluations<sp/>(used<sp/>for<sp/>timing<sp/>statistics).</highlight></codeline>
<codeline lineno="242"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>statistic_num<sp/>(int):<sp/>Number<sp/>of<sp/>statistical<sp/>points<sp/>maintained<sp/>for<sp/>tracking.</highlight></codeline>
<codeline lineno="243"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>datafile<sp/>(Optional[str]):<sp/>Path<sp/>to<sp/>file<sp/>for<sp/>saving<sp/>and<sp/>loading<sp/>data.</highlight></codeline>
<codeline lineno="244"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a1dfb9b034380f6ca44583ab26014d0ba" kindref="member">__init__</ref>(self,<sp/></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fun:<sp/>Callable[[ArrayLike],<sp/>float],<sp/></highlight><highlight class="comment">#<sp/>fitness<sp/>function</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Bounds,<sp/></highlight><highlight class="comment">#<sp/>bounds<sp/>of<sp/>the<sp/>objective<sp/>function<sp/>arguments</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac:<sp/>Optional[int]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="comment">#<sp/>maximal<sp/>number<sp/>of<sp/>evaluations<sp/>factor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>check_interval:<sp/>Optional[int]<sp/>=<sp/>100,<sp/></highlight><highlight class="comment">#<sp/>sort<sp/>evaluation<sp/>store<sp/>after<sp/>check_interval<sp/>iterations</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>capacity:<sp/>Optional[int]<sp/>=<sp/>500,<sp/></highlight><highlight class="comment">#<sp/>capacity<sp/>of<sp/>the<sp/>evaluation<sp/>store</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries:<sp/>Optional[int]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>statistic_num:<sp/>Optional[int]<sp/>=<sp/>0,</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>datafile:<sp/>Optional[str]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>):</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="257"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Initializes<sp/>an<sp/>instance<sp/>of<sp/>the<sp/>class<sp/>with<sp/>parameters<sp/>and<sp/>attributes<sp/>required<sp/>for</highlight></codeline>
<codeline lineno="258"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>managing<sp/>function<sp/>optimization<sp/>within<sp/>specified<sp/>bounds<sp/>using<sp/>shared<sp/>multiprocessing</highlight></codeline>
<codeline lineno="259"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>resources.<sp/>Sets<sp/>up<sp/>the<sp/>evaluation<sp/>store,<sp/>statistic<sp/>tracking,<sp/>and<sp/>random<sp/>generator.</highlight></codeline>
<codeline lineno="260"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="261"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="262"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fun:<sp/>A<sp/>fitness<sp/>function<sp/>to<sp/>be<sp/>optimized.<sp/>It<sp/>takes<sp/>an<sp/>array-like<sp/>input<sp/>and<sp/>returns</highlight></codeline>
<codeline lineno="263"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a<sp/>float<sp/>value.</highlight></codeline>
<codeline lineno="264"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Bounds<sp/>of<sp/>the<sp/>objective<sp/>function<sp/>arguments<sp/>defined<sp/>as<sp/>an<sp/>instance<sp/>of<sp/>the</highlight></codeline>
<codeline lineno="265"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Bounds<sp/>class.</highlight></codeline>
<codeline lineno="266"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac:<sp/>Optional;<sp/>Maximum<sp/>number<sp/>of<sp/>evaluations<sp/>factor.<sp/>Defaults<sp/>to<sp/>None.<sp/>If</highlight></codeline>
<codeline lineno="267"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None,<sp/>it<sp/>is<sp/>calculated<sp/>based<sp/>on<sp/>`num_retries`<sp/>and<sp/>`check_interval`.</highlight></codeline>
<codeline lineno="268"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>check_interval:<sp/>Optional;<sp/>Number<sp/>of<sp/>iterations<sp/>after<sp/>which<sp/>the<sp/>evaluation<sp/>store<sp/>is</highlight></codeline>
<codeline lineno="269"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sorted.<sp/>Defaults<sp/>to<sp/>100.</highlight></codeline>
<codeline lineno="270"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>capacity:<sp/>Optional;<sp/>Capacity<sp/>of<sp/>the<sp/>evaluation<sp/>store.<sp/>Defaults<sp/>to<sp/>500.</highlight></codeline>
<codeline lineno="271"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries:<sp/>Optional;<sp/>Maximum<sp/>number<sp/>of<sp/>retries<sp/>allowed.<sp/>If<sp/>None,<sp/>it<sp/>is<sp/>calculated</highlight></codeline>
<codeline lineno="272"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>based<sp/>on<sp/>`max_eval_fac`<sp/>and<sp/>`check_interval`.<sp/>Defaults<sp/>to<sp/>None.</highlight></codeline>
<codeline lineno="273"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>statistic_num:<sp/>Optional;<sp/>Number<sp/>of<sp/>statistics<sp/>points<sp/>to<sp/>be<sp/>maintained<sp/>for<sp/>tracking.</highlight></codeline>
<codeline lineno="274"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Set<sp/>to<sp/>0<sp/>to<sp/>disable<sp/>statistics.<sp/>Defaults<sp/>to<sp/>0.</highlight></codeline>
<codeline lineno="275"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>datafile:<sp/>Optional;<sp/>Path<sp/>to<sp/>a<sp/>file<sp/>for<sp/>saving/loading<sp/>relevant<sp/>data.<sp/>Defaults<sp/>to<sp/>None.</highlight></codeline>
<codeline lineno="276"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a9421450cd349123b0c703029528418f5" kindref="member">fun</ref><sp/>=<sp/>fun</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a69725da93edb777480fc90c959d45678" kindref="member">lower</ref>,<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a8d112bb91cc58f032a0bb929c236fd8e" kindref="member">upper</ref><sp/>=<sp/>_convertBounds(bounds)</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ad2d1513e8146883a75bab3f55fb4be95" kindref="member">delta</ref><sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a8d112bb91cc58f032a0bb929c236fd8e" kindref="member">upper</ref><sp/>-<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a69725da93edb777480fc90c959d45678" kindref="member">lower</ref><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ac02358030591fcfa40acde3b27f6ee30" kindref="member">capacity</ref><sp/>=<sp/>capacity</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>max_eval_fac<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>num_retries<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac<sp/>=<sp/>50</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac<sp/>=<sp/>int(min(50,<sp/>1<sp/>+<sp/>num_retries<sp/>//<sp/>check_interval))</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>num_retries<sp/>==<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries<sp/>=<sp/>max_eval_fac<sp/>*<sp/>check_interval</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a4c08da826f59305eaa14d6bbdbaa6b1d" kindref="member">num_retries</ref><sp/>=<sp/>num_retries</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>increment<sp/>eval_fac<sp/>so<sp/>that<sp/>max_eval_fac<sp/>is<sp/>reached<sp/>at<sp/>last<sp/>retry</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aebbd407d5af1334e38fbdc5a8ba36d3f" kindref="member">eval_fac_incr</ref><sp/>=<sp/>max_eval_fac<sp/>/<sp/>(num_retries/check_interval)</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a943e1c9111fc75a8c7aad94b9feb5538" kindref="member">max_eval_fac</ref><sp/>=<sp/>max_eval_fac</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3dc00b6f12a508d7e3537e4869bae3ae" kindref="member">check_interval</ref><sp/>=<sp/>check_interval<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="293" refid="classfcmaes_1_1advretry_1_1_store_1a1dfb9b034380f6ca44583ab26014d0ba" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1abe787e76d4993d0280a389dabc8c3fe9" kindref="member">dim</ref><sp/>=<sp/>len(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a69725da93edb777480fc90c959d45678" kindref="member">lower</ref>)</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3353add8a5c4d01dd02a8a56890c1036" kindref="member">t0</ref><sp/>=<sp/>time.perf_counter()</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ae5d9ac54fe3531077bedd2945298073f" kindref="member">statistic_num</ref><sp/>=<sp/>statistic_num</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a4a5af1d8a29594eff250c931f481d146" kindref="member">datafile</ref><sp/>=<sp/>datafile</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af869a404006e773c0f7fd0744d3733f8" kindref="member">rg</ref><sp/>=<sp/>random.Random()</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#self.rg<sp/>=<sp/>Generator(PCG64DXSM()))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#self.rg<sp/>=<sp/>Generator(PCG64DXSM(random.randint(0,<sp/>2**63<sp/>-<sp/>1)))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#shared<sp/>between<sp/>processes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ae73944a21ee51902dfdc93403dadc8ce" kindref="member">add_mutex</ref><sp/>=<sp/>mp.Lock()<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="303" refid="classfcmaes_1_1advretry_1_1_store_1a9421450cd349123b0c703029528418f5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a784de4dd2241f0d45a199379be53532d" kindref="member">check_mutex</ref><sp/>=<sp/>mp.Lock()<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="304" refid="classfcmaes_1_1advretry_1_1_store_1a69725da93edb777480fc90c959d45678" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1adcc4bcd2b2d9dd72a7d315ac273def89" kindref="member">xs</ref><sp/>=<sp/>mp.RawArray(ct.c_double,<sp/>capacity<sp/>*<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1abe787e76d4993d0280a389dabc8c3fe9" kindref="member">dim</ref>)</highlight></codeline>
<codeline lineno="305" refid="classfcmaes_1_1advretry_1_1_store_1ad2d1513e8146883a75bab3f55fb4be95" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ac058ac776acb3ce2891ddb0fe7a15100" kindref="member">ys</ref><sp/>=<sp/>mp.RawArray(ct.c_double,<sp/>capacity)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="306" refid="classfcmaes_1_1advretry_1_1_store_1ac02358030591fcfa40acde3b27f6ee30" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aca1758cb0a6f2a0033b311b9cc89684c" kindref="member">eval_fac</ref><sp/>=<sp/>mp.RawValue(ct.c_double,<sp/>1)</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af0db304f4763604809335265782f7d98" kindref="member">count_evals</ref><sp/>=<sp/>mp.RawValue(ct.c_long,<sp/>0)<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a073e21184da6081e7a868fb615bfa55f" kindref="member">count_runs</ref><sp/>=<sp/>mp.RawValue(ct.c_int,<sp/>0)<sp/></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref><sp/>=<sp/>mp.RawValue(ct.c_int,<sp/>0)<sp/><sp/></highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a597ae039b1fe0bd28ed9afc8e270075a" kindref="member">best_y</ref><sp/>=<sp/>mp.RawValue(ct.c_double,<sp/>np.inf)<sp/></highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1afefa9194fbf5ada1b23dcd45ed3e48f3" kindref="member">worst_y</ref><sp/>=<sp/>mp.RawValue(ct.c_double,<sp/>np.inf)<sp/><sp/></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aeb660ff644cb19f40c20494360cebb57" kindref="member">best_x</ref><sp/>=<sp/>mp.RawArray(ct.c_double,<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1abe787e76d4993d0280a389dabc8c3fe9" kindref="member">dim</ref>)</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="314" refid="classfcmaes_1_1advretry_1_1_store_1a4c08da826f59305eaa14d6bbdbaa6b1d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>statistic_num<sp/>&gt;<sp/>0:<sp/><sp/></highlight><highlight class="comment">#<sp/>enable<sp/>statistics<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ae5d9ac54fe3531077bedd2945298073f" kindref="member">statistic_num</ref><sp/>=<sp/>statistic_num</highlight></codeline>
<codeline lineno="316" refid="classfcmaes_1_1advretry_1_1_store_1aebbd407d5af1334e38fbdc5a8ba36d3f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a9f708b7ec4308e915d2600f357ae7a1d" kindref="member">time</ref><sp/>=<sp/>mp.RawArray(ct.c_double,<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ae5d9ac54fe3531077bedd2945298073f" kindref="member">statistic_num</ref>)</highlight></codeline>
<codeline lineno="317" refid="classfcmaes_1_1advretry_1_1_store_1a943e1c9111fc75a8c7aad94b9feb5538" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a72b4b6c231e9e44a77a30dec5c731db2" kindref="member">val</ref><sp/>=<sp/>mp.RawArray(ct.c_double,<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ae5d9ac54fe3531077bedd2945298073f" kindref="member">statistic_num</ref>)</highlight></codeline>
<codeline lineno="318" refid="classfcmaes_1_1advretry_1_1_store_1a3dc00b6f12a508d7e3537e4869bae3ae" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3d944cda44a59bf02cef0cd0b68cc4c4" kindref="member">si</ref><sp/>=<sp/>mp.RawValue(ct.c_int,<sp/>0)</highlight></codeline>
<codeline lineno="319" refid="classfcmaes_1_1advretry_1_1_store_1abe787e76d4993d0280a389dabc8c3fe9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ab1505fe94e716ee8645e7e694f69efbc" kindref="member">sevals</ref><sp/>=<sp/>mp.RawValue(ct.c_long,<sp/>0)</highlight></codeline>
<codeline lineno="320" refid="classfcmaes_1_1advretry_1_1_store_1a3353add8a5c4d01dd02a8a56890c1036" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a44fe2e19ed26797a80dd27ee7c1a6b50" kindref="member">bval</ref><sp/>=<sp/>mp.RawValue(ct.c_double,<sp/>np.inf)</highlight></codeline>
<codeline lineno="321" refid="classfcmaes_1_1advretry_1_1_store_1ae5d9ac54fe3531077bedd2945298073f" refkind="member"><highlight class="normal"></highlight></codeline>
<codeline lineno="322" refid="classfcmaes_1_1advretry_1_1_store_1a4a5af1d8a29594eff250c931f481d146" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>register<sp/>improvement<sp/>-<sp/>time<sp/>and<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="323" refid="classfcmaes_1_1advretry_1_1_store_1af869a404006e773c0f7fd0744d3733f8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1abd78c63348eaf496e00df2bc0d3711aa" kindref="member">wrapper</ref>(self,<sp/>x:<sp/>ArrayLike)<sp/>-&gt;<sp/>float:</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="325"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wrapper<sp/>function<sp/>to<sp/>evaluate<sp/>a<sp/>given<sp/>function,<sp/>update<sp/>statistics,<sp/>and<sp/>log<sp/>the</highlight></codeline>
<codeline lineno="326"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>results.<sp/>It<sp/>is<sp/>typically<sp/>used<sp/>in<sp/>optimization<sp/>procedures<sp/>to<sp/>monitor<sp/>evaluations</highlight></codeline>
<codeline lineno="327"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>track<sp/>progress<sp/>over<sp/>iterations.</highlight></codeline>
<codeline lineno="328" refid="classfcmaes_1_1advretry_1_1_store_1ae73944a21ee51902dfdc93403dadc8ce" refkind="member"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="329" refid="classfcmaes_1_1advretry_1_1_store_1a784de4dd2241f0d45a199379be53532d" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="330" refid="classfcmaes_1_1advretry_1_1_store_1adcc4bcd2b2d9dd72a7d315ac273def89" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>(ArrayLike):<sp/>The<sp/>input<sp/>array<sp/>to<sp/>evaluate<sp/>the<sp/>function.</highlight></codeline>
<codeline lineno="331" refid="classfcmaes_1_1advretry_1_1_store_1ac058ac776acb3ce2891ddb0fe7a15100" refkind="member"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="332" refid="classfcmaes_1_1advretry_1_1_store_1aca1758cb0a6f2a0033b311b9cc89684c" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="333" refid="classfcmaes_1_1advretry_1_1_store_1af0db304f4763604809335265782f7d98" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float:<sp/>The<sp/>evaluated<sp/>function<sp/>output<sp/>for<sp/>the<sp/>given<sp/>input<sp/>array.</highlight></codeline>
<codeline lineno="334" refid="classfcmaes_1_1advretry_1_1_store_1a073e21184da6081e7a868fb615bfa55f" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="335" refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a9421450cd349123b0c703029528418f5" kindref="member">fun</ref>(x)</highlight></codeline>
<codeline lineno="336" refid="classfcmaes_1_1advretry_1_1_store_1a597ae039b1fe0bd28ed9afc8e270075a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ab1505fe94e716ee8645e7e694f69efbc" kindref="member">sevals</ref>.value<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="337" refid="classfcmaes_1_1advretry_1_1_store_1afefa9194fbf5ada1b23dcd45ed3e48f3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>y<sp/>&lt;<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a44fe2e19ed26797a80dd27ee7c1a6b50" kindref="member">bval</ref>.value:</highlight></codeline>
<codeline lineno="338" refid="classfcmaes_1_1advretry_1_1_store_1aeb660ff644cb19f40c20494360cebb57" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a44fe2e19ed26797a80dd27ee7c1a6b50" kindref="member">bval</ref>.value<sp/>=<sp/>y</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>si<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3d944cda44a59bf02cef0cd0b68cc4c4" kindref="member">si</ref>.value</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>si<sp/>&lt;<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ae5d9ac54fe3531077bedd2945298073f" kindref="member">statistic_num</ref><sp/>-<sp/>1:</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3d944cda44a59bf02cef0cd0b68cc4c4" kindref="member">si</ref>.value<sp/>=<sp/>si<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="342" refid="classfcmaes_1_1advretry_1_1_store_1a9f708b7ec4308e915d2600f357ae7a1d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a9f708b7ec4308e915d2600f357ae7a1d" kindref="member">time</ref>[si]<sp/>=<sp/>dtime(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3353add8a5c4d01dd02a8a56890c1036" kindref="member">t0</ref>)</highlight></codeline>
<codeline lineno="343" refid="classfcmaes_1_1advretry_1_1_store_1a72b4b6c231e9e44a77a30dec5c731db2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a72b4b6c231e9e44a77a30dec5c731db2" kindref="member">val</ref>[si]<sp/>=<sp/>y<sp/><sp/></highlight></codeline>
<codeline lineno="344" refid="classfcmaes_1_1advretry_1_1_store_1a3d944cda44a59bf02cef0cd0b68cc4c4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(str(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a9f708b7ec4308e915d2600f357ae7a1d" kindref="member">time</ref>[si])<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal"><sp/><sp/>+<sp/></highlight></codeline>
<codeline lineno="345" refid="classfcmaes_1_1advretry_1_1_store_1ab1505fe94e716ee8645e7e694f69efbc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ab1505fe94e716ee8645e7e694f69efbc" kindref="member">sevals</ref>.value)<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/></highlight></codeline>
<codeline lineno="346" refid="classfcmaes_1_1advretry_1_1_store_1a44fe2e19ed26797a80dd27ee7c1a6b50" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str(y)<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/></highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str(list(x)))</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>y</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>persist<sp/>store</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a19b9d6c0787fb06a2b00e595f487bf37" kindref="member">save</ref>(self,<sp/>name:<sp/>str):</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="353"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Saves<sp/>the<sp/>current<sp/>data<sp/>of<sp/>the<sp/>instance<sp/>to<sp/>a<sp/>compressed<sp/>file<sp/>using<sp/>bz2<sp/>and<sp/>cPickle<sp/>modules.</highlight></codeline>
<codeline lineno="354"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="355"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>method<sp/>compresses<sp/>and<sp/>serializes<sp/>the<sp/>data<sp/>obtained<sp/>from<sp/>`get_data`<sp/>and<sp/>saves</highlight></codeline>
<codeline lineno="356"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>it<sp/>to<sp/>a<sp/>file<sp/>with<sp/>the<sp/>specified<sp/>name<sp/>appended<sp/>by<sp/>the<sp/>&apos;.pbz2&apos;<sp/>extension.</highlight></codeline>
<codeline lineno="357"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="358"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="359"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>(str):<sp/>The<sp/>desired<sp/>name<sp/>for<sp/>the<sp/>output<sp/>file,<sp/>excluding<sp/>the<sp/>extension.</highlight></codeline>
<codeline lineno="360" refid="classfcmaes_1_1advretry_1_1_store_1abd78c63348eaf496e00df2bc0d3711aa" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>bz2.BZ2File(name<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;.pbz2&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;w&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>f:</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cPickle.dump(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aabe26248085adae1ad80a9b17202e5b7" kindref="member">get_data</ref>(),<sp/>f)</highlight></codeline>
<codeline lineno="363"><highlight class="normal"></highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1adc9b28c43aee9110aef2fad53f30a077" kindref="member">load</ref>(self,<sp/>name:<sp/>str):</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Loads<sp/>and<sp/>processes<sp/>data<sp/>from<sp/>a<sp/>compressed<sp/>file.</highlight></codeline>
<codeline lineno="366"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="367"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>allows<sp/>loading<sp/>data<sp/>from<sp/>a<sp/>file<sp/>compressed<sp/>with<sp/>BZ2<sp/>and<sp/>serialized</highlight></codeline>
<codeline lineno="368"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>cPickle.<sp/>After<sp/>loading,<sp/>the<sp/>data<sp/>is<sp/>processed<sp/>or<sp/>assigned<sp/>using<sp/>the</highlight></codeline>
<codeline lineno="369"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>`set_data`<sp/>method<sp/>of<sp/>the<sp/>instance.</highlight></codeline>
<codeline lineno="370"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="371"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="372"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>(str):<sp/>The<sp/>name<sp/>of<sp/>the<sp/>file<sp/>(without<sp/>extension)<sp/>to<sp/>load<sp/>data<sp/>from.</highlight></codeline>
<codeline lineno="373"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>cPickle.load(bz2.BZ2File(name<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;.pbz2&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;rb&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1acff238ba31618eab7787f5204b5676f3" kindref="member">set_data</ref>(data)</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1aabe26248085adae1ad80a9b17202e5b7" kindref="member">get_data</ref>(self)<sp/>-&gt;<sp/>List:</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="379"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Retrieves<sp/>and<sp/>aggregates<sp/>data<sp/>from<sp/>various<sp/>attributes<sp/>and<sp/>methods.</highlight></codeline>
<codeline lineno="380"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="381"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>gathers<sp/>data<sp/>by<sp/>calling<sp/>several<sp/>other<sp/>methods<sp/>and<sp/>accessing<sp/>a<sp/>specific</highlight></codeline>
<codeline lineno="382"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attribute.<sp/>It<sp/>consolidates<sp/>these<sp/>pieces<sp/>of<sp/>data<sp/>into<sp/>a<sp/>single<sp/>list<sp/>and<sp/>returns<sp/>it.</highlight></codeline>
<codeline lineno="383"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="384"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="385"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List:<sp/>A<sp/>list<sp/>containing<sp/>data<sp/>from<sp/>`get_xs()`,<sp/>`get_ys()`,<sp/>`get_x_best()`,</highlight></codeline>
<codeline lineno="386" refid="classfcmaes_1_1advretry_1_1_store_1a19b9d6c0787fb06a2b00e595f487bf37" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>`get_y_best()`<sp/>methods,<sp/>and<sp/>the<sp/>`num_stored.value`<sp/>attribute.</highlight></codeline>
<codeline lineno="387"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data.append(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a2df2e37a5663c3e12c22c4b97f2549a2" kindref="member">get_xs</ref>())</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data.append(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3cc073975313c4893de761cfc9771d77" kindref="member">get_ys</ref>())</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data.append(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a95e2b65e516214df91625c67e4ebe558" kindref="member">get_x_best</ref>())</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data.append(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a801f488c7741c549ab3212f5ce52803a" kindref="member">get_y_best</ref>())</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data.append(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value)</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>data</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1acff238ba31618eab7787f5204b5676f3" kindref="member">set_data</ref>(self,<sp/>data:<sp/>ArrayLike):</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="398"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Sets<sp/>the<sp/>data<sp/>for<sp/>an<sp/>internal<sp/>storage<sp/>structure<sp/>and<sp/>processes<sp/>it.</highlight></codeline>
<codeline lineno="399" refid="classfcmaes_1_1advretry_1_1_store_1adc9b28c43aee9110aef2fad53f30a077" refkind="member"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="400"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="401"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>(ArrayLike):<sp/>A<sp/>multi-dimensional<sp/>array-like<sp/>structure<sp/>containing:</highlight></codeline>
<codeline lineno="402"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>data[0]:<sp/>The<sp/>x-coordinates.</highlight></codeline>
<codeline lineno="403"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>data[1]:<sp/>The<sp/>y-coordinates.</highlight></codeline>
<codeline lineno="404"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>data[2]:<sp/>A<sp/>subset<sp/>of<sp/>best<sp/>x-coordinates.</highlight></codeline>
<codeline lineno="405"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>data[3]:<sp/>The<sp/>best<sp/>y-coordinate.</highlight></codeline>
<codeline lineno="406"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>data[4]:<sp/>The<sp/>total<sp/>count<sp/>of<sp/>stored<sp/>elements.</highlight></codeline>
<codeline lineno="407"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="408"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs<sp/>=<sp/>data[0]</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys<sp/>=<sp/>data[1]</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(ys)):</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a0ae90f35f58deb629c18747fbf9b1cc9" kindref="member">replace</ref>(i,<sp/>ys[i],<sp/>xs[i])</highlight></codeline>
<codeline lineno="413" refid="classfcmaes_1_1advretry_1_1_store_1aabe26248085adae1ad80a9b17202e5b7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aeb660ff644cb19f40c20494360cebb57" kindref="member">best_x</ref>[:]<sp/>=<sp/>data[2][:]</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a597ae039b1fe0bd28ed9afc8e270075a" kindref="member">best_y</ref>.value<sp/>=<sp/>data[3]</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value<sp/>=<sp/>data[4]</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aa5c9f7209b6bfb5bf079ad940a84eea4" kindref="member">sort</ref>()</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1afda8cdd53cf9e0c3160f59bb623becba" kindref="member">get_improvements</ref>(self)<sp/>-&gt;<sp/>np.ndarray:</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="420"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Calculates<sp/>and<sp/>returns<sp/>an<sp/>array<sp/>of<sp/>improvements<sp/>based<sp/>on<sp/>stored<sp/>time<sp/>and<sp/>value<sp/>data.</highlight></codeline>
<codeline lineno="421"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="422"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>method<sp/>processes<sp/>the<sp/>time<sp/>and<sp/>value<sp/>attributes<sp/>up<sp/>to<sp/>the<sp/>index<sp/>defined<sp/>by<sp/>`si.value`</highlight></codeline>
<codeline lineno="423"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>combines<sp/>them<sp/>into<sp/>a<sp/>structured<sp/>NumPy<sp/>array.<sp/>It<sp/>allows<sp/>extracting<sp/>the<sp/>corresponding</highlight></codeline>
<codeline lineno="424"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>values<sp/>and<sp/>improvements<sp/>over<sp/>the<sp/>determined<sp/>slice<sp/>of<sp/>the<sp/>data.</highlight></codeline>
<codeline lineno="425"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="426"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="427"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>np.ndarray:<sp/>A<sp/>NumPy<sp/>array<sp/>containing<sp/>pairs<sp/>of<sp/>time<sp/>and<sp/>value<sp/>up<sp/>to<sp/>`si.value`.</highlight></codeline>
<codeline lineno="428"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>np.array(list(zip(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a9f708b7ec4308e915d2600f357ae7a1d" kindref="member">time</ref>[:self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3d944cda44a59bf02cef0cd0b68cc4c4" kindref="member">si</ref>.value],<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a72b4b6c231e9e44a77a30dec5c731db2" kindref="member">val</ref>[:self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3d944cda44a59bf02cef0cd0b68cc4c4" kindref="member">si</ref>.value])))</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>get<sp/>num<sp/>best<sp/>values<sp/>at<sp/>evenly<sp/>distributed<sp/>times</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a6ccfce173196171f999e4a3c4531f01f" kindref="member">get_statistics</ref>(self,<sp/>num:<sp/>int)<sp/>-&gt;<sp/>List:</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="434" refid="classfcmaes_1_1advretry_1_1_store_1acff238ba31618eab7787f5204b5676f3" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Calculates<sp/>and<sp/>returns<sp/>a<sp/>list<sp/>of<sp/>statistics<sp/>determined<sp/>by<sp/>evenly<sp/>dividing<sp/>the<sp/>provided</highlight></codeline>
<codeline lineno="435"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>time<sp/>series<sp/>data<sp/>into<sp/>a<sp/>specified<sp/>number<sp/>of<sp/>segments.</highlight></codeline>
<codeline lineno="436"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="437"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>function<sp/>processes<sp/>time<sp/>series<sp/>and<sp/>value<sp/>arrays<sp/>to<sp/>calculate<sp/>specific<sp/>statistics</highlight></codeline>
<codeline lineno="438"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>based<sp/>on<sp/>the<sp/>distribution<sp/>of<sp/>data<sp/>over<sp/>a<sp/>fixed<sp/>number<sp/>of<sp/>intervals.<sp/>It<sp/>uses<sp/>the<sp/>time</highlight></codeline>
<codeline lineno="439"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>array<sp/>to<sp/>sample<sp/>the<sp/>values<sp/>array<sp/>at<sp/>designated<sp/>points,<sp/>ensuring<sp/>that<sp/>the<sp/>result<sp/>represents</highlight></codeline>
<codeline lineno="440"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>distributed<sp/>across<sp/>the<sp/>defined<sp/>segments.</highlight></codeline>
<codeline lineno="441"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="442"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="443"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num<sp/>(int):<sp/>The<sp/>number<sp/>of<sp/>segments<sp/>into<sp/>which<sp/>the<sp/>time<sp/>series<sp/>data<sp/>will<sp/>be<sp/>divided.</highlight></codeline>
<codeline lineno="444"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="445"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="446"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List:<sp/>A<sp/>list<sp/>containing<sp/>the<sp/>computed<sp/>statistics<sp/>based<sp/>on<sp/>the<sp/>segmented<sp/>intervals<sp/>of</highlight></codeline>
<codeline lineno="447"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>time<sp/>series<sp/>data.</highlight></codeline>
<codeline lineno="448"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="449"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises:</highlight></codeline>
<codeline lineno="450"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>IndexError:<sp/>If<sp/>the<sp/>number<sp/>of<sp/>segments<sp/>exceeds<sp/>the<sp/>number<sp/>of<sp/>available<sp/>data<sp/>points.</highlight></codeline>
<codeline lineno="451"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ts<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a9f708b7ec4308e915d2600f357ae7a1d" kindref="member">time</ref>[:self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3d944cda44a59bf02cef0cd0b68cc4c4" kindref="member">si</ref>.value]</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vs<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a72b4b6c231e9e44a77a30dec5c731db2" kindref="member">val</ref>[:self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3d944cda44a59bf02cef0cd0b68cc4c4" kindref="member">si</ref>.value]</highlight></codeline>
<codeline lineno="454" refid="classfcmaes_1_1advretry_1_1_store_1afda8cdd53cf9e0c3160f59bb623becba" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mt<sp/>=<sp/>ts[-1]</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt<sp/>=<sp/>0.9999999<sp/>*<sp/>mt<sp/>/<sp/>num</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stats<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ti<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/>vs[0]</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(num):</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>ts[ti]<sp/>&lt;<sp/>(i+1)<sp/>*<sp/>dt:</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ti<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/>vs[ti]</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stats.append(val)</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stats</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1acb6d9b590c7c36a83fa8b764d6e15f7e" kindref="member">eval_num</ref>(self,<sp/>max_evals:<sp/>int)<sp/>-&gt;<sp/>int:</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="468"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Calculates<sp/>the<sp/>evaluation<sp/>number<sp/>based<sp/>on<sp/>a<sp/>multiplier<sp/>and<sp/>maximum<sp/>evaluations.</highlight></codeline>
<codeline lineno="469"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="470"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>computes<sp/>the<sp/>product<sp/>of<sp/>a<sp/>multiplier<sp/>(`eval_fac.value`)<sp/>and<sp/>the</highlight></codeline>
<codeline lineno="471"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>provided<sp/>maximum<sp/>evaluations<sp/>(`max_evals`).<sp/>The<sp/>result<sp/>is<sp/>cast<sp/>to<sp/>an<sp/>integer</highlight></codeline>
<codeline lineno="472"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>returned.</highlight></codeline>
<codeline lineno="473"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="474"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="475"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals<sp/>(int):<sp/>The<sp/>maximum<sp/>number<sp/>of<sp/>evaluations.</highlight></codeline>
<codeline lineno="476"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="477" refid="classfcmaes_1_1advretry_1_1_store_1a6ccfce173196171f999e4a3c4531f01f" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="478"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int:<sp/>The<sp/>calculated<sp/>evaluation<sp/>number.</highlight></codeline>
<codeline lineno="479"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>int(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aca1758cb0a6f2a0033b311b9cc89684c" kindref="member">eval_fac</ref>.value<sp/>*<sp/>max_evals)</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1ab543494f5cc2e6a7f877ca8cb0e35591" kindref="member">limits</ref>(self)<sp/>-&gt;<sp/>Tuple[float,<sp/>np.ndarray,<sp/>np.ndarray,<sp/>np.ndarray,<sp/>np.ndarray]:</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="484"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns<sp/>the<sp/>limits<sp/>and<sp/>other<sp/>related<sp/>calculations<sp/>used<sp/>for<sp/>determining<sp/>bounds</highlight></codeline>
<codeline lineno="485"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>during<sp/>operations<sp/>like<sp/>crossover<sp/>and<sp/>mutation.<sp/>The<sp/>function<sp/>calculates<sp/>adjusted</highlight></codeline>
<codeline lineno="486"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds,<sp/>scaled<sp/>deviations,<sp/>and<sp/>other<sp/>factors<sp/>based<sp/>on<sp/>the<sp/>input<sp/>variables,<sp/>making</highlight></codeline>
<codeline lineno="487"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>use<sp/>of<sp/>random<sp/>factors<sp/>and<sp/>mutex<sp/>locks<sp/>for<sp/>thread<sp/>safety.</highlight></codeline>
<codeline lineno="488"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="489"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="490"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="491"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="492"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="493"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Tuple[float,<sp/>numpy.ndarray,<sp/>numpy.ndarray,<sp/>numpy.ndarray,<sp/>numpy.ndarray]:</highlight></codeline>
<codeline lineno="494"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>A<sp/>tuple<sp/>containing<sp/>the<sp/>following<sp/>elements:</highlight></codeline>
<codeline lineno="495"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>A<sp/>float<sp/>value<sp/>representing<sp/>the<sp/>initial<sp/>target<sp/>point<sp/>y0.</highlight></codeline>
<codeline lineno="496"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>A<sp/>NumPy<sp/>array<sp/>representing<sp/>the<sp/>point<sp/>x1<sp/>selected<sp/>for<sp/>crossover.</highlight></codeline>
<codeline lineno="497"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>A<sp/>NumPy<sp/>array<sp/>representing<sp/>the<sp/>calculated<sp/>lower<sp/>bounds<sp/>for<sp/>crossover.</highlight></codeline>
<codeline lineno="498"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>A<sp/>NumPy<sp/>array<sp/>representing<sp/>the<sp/>calculated<sp/>upper<sp/>bounds<sp/>for<sp/>crossover.</highlight></codeline>
<codeline lineno="499"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>A<sp/>NumPy<sp/>array<sp/>representing<sp/>the<sp/>scaled<sp/>standard<sp/>deviations<sp/>for<sp/>crossover.</highlight></codeline>
<codeline lineno="500"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="501"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises:</highlight></codeline>
<codeline lineno="502"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="503"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>diff_fac<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af869a404006e773c0f7fd0744d3733f8" kindref="member">rg</ref>.<ref refid="evaluator_8h_1ad408c1ac0c479863b2d1291c483c5593" kindref="member">uniform</ref>(0.5,<sp/>1.0)</highlight></codeline>
<codeline lineno="505" refid="classfcmaes_1_1advretry_1_1_store_1acb6d9b590c7c36a83fa8b764d6e15f7e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lim_fac<sp/>=<sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af869a404006e773c0f7fd0744d3733f8" kindref="member">rg</ref>.<ref refid="evaluator_8h_1ad408c1ac0c479863b2d1291c483c5593" kindref="member">uniform</ref>(2.0,<sp/>4.0)<sp/>*<sp/>diff_fac</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ae73944a21ee51902dfdc93403dadc8ce" kindref="member">add_mutex</ref>:</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i,<sp/>j<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a879e1014d958865e37c48d5d271c8dc6" kindref="member">crossover</ref>()</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>i<sp/>&lt;<sp/>0:</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>math.inf,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x0<sp/>=<sp/>np.asarray(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a97e407315b2e0c802b9d5b4414f3f91b" kindref="member">get_x</ref>(i))</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x1<sp/>=<sp/>np.asarray(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a97e407315b2e0c802b9d5b4414f3f91b" kindref="member">get_x</ref>(j))</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y0<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a907617cde0def7276f1f609d7690335f" kindref="member">get_y</ref>(i)</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deltax<sp/>=<sp/>np.abs(x1<sp/>-<sp/>x0)</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delta_bound<sp/>=<sp/>np.maximum(0.0001,<sp/>lim_fac<sp/>*<sp/>deltax)</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lower<sp/>=<sp/>np.maximum(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a69725da93edb777480fc90c959d45678" kindref="member">lower</ref>,<sp/>x0<sp/>-<sp/>delta_bound)</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>upper<sp/>=<sp/>np.minimum(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a8d112bb91cc58f032a0bb929c236fd8e" kindref="member">upper</ref>,<sp/>x0<sp/>+<sp/>delta_bound)</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sdev<sp/>=<sp/>np.clip(diff_fac<sp/>*<sp/>deltax<sp/>/<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ad2d1513e8146883a75bab3f55fb4be95" kindref="member">delta</ref>,<sp/>0.001,<sp/>0.5)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>y0,<sp/>x1,<sp/>lower,<sp/>upper,<sp/>sdev</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a00ab052ea8b184b7344875122481b623" kindref="member">distance</ref>(self,<sp/>xprev:<sp/>np.ndarray,<sp/>x:<sp/>np.ndarray)<sp/>-&gt;<sp/>float:</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="523"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Calculates<sp/>the<sp/>normalized<sp/>distance<sp/>between<sp/>two<sp/>points<sp/>in<sp/>a<sp/>Euclidean<sp/>space.</highlight></codeline>
<codeline lineno="524"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="525"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>distance<sp/>is<sp/>normalized<sp/>based<sp/>on<sp/>the<sp/>difference<sp/>between<sp/>two<sp/>points,<sp/>scaled</highlight></codeline>
<codeline lineno="526"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>by<sp/>a<sp/>pre-defined<sp/>parameter<sp/>`delta`,<sp/>and<sp/>divided<sp/>by<sp/>the<sp/>square<sp/>root<sp/>of<sp/>the</highlight></codeline>
<codeline lineno="527"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>number<sp/>of<sp/>dimensions<sp/>(`dim`).</highlight></codeline>
<codeline lineno="528"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="529" refid="classfcmaes_1_1advretry_1_1_store_1ab543494f5cc2e6a7f877ca8cb0e35591" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="530"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xprev<sp/>(np.ndarray):<sp/>A<sp/>numpy<sp/>array<sp/>representing<sp/>the<sp/>previous<sp/>point.</highlight></codeline>
<codeline lineno="531"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>(np.ndarray):<sp/>A<sp/>numpy<sp/>array<sp/>representing<sp/>the<sp/>current<sp/>point.</highlight></codeline>
<codeline lineno="532"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="533"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="534"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float:<sp/>The<sp/>normalized<sp/>distance<sp/>between<sp/>`xprev`<sp/>and<sp/>`x`.</highlight></codeline>
<codeline lineno="535"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>norm((x<sp/>-<sp/>xprev)<sp/>/<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ad2d1513e8146883a75bab3f55fb4be95" kindref="member">delta</ref>)<sp/>/<sp/>math.sqrt(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1abe787e76d4993d0280a389dabc8c3fe9" kindref="member">dim</ref>)</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a0ae90f35f58deb629c18747fbf9b1cc9" kindref="member">replace</ref>(self,<sp/>i:<sp/>int,<sp/>y:<sp/>float,<sp/>x:<sp/>np.ndarray):</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="540"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Replaces<sp/>the<sp/>y<sp/>and<sp/>x<sp/>values<sp/>at<sp/>a<sp/>specified<sp/>index.</highlight></codeline>
<codeline lineno="541"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="542"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>updates<sp/>the<sp/>y<sp/>and<sp/>x<sp/>values<sp/>in<sp/>the<sp/>object&apos;s<sp/>internal<sp/>data<sp/>structure<sp/>at<sp/>the<sp/>index</highlight></codeline>
<codeline lineno="543"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>provided<sp/>by<sp/>the<sp/>user.</highlight></codeline>
<codeline lineno="544"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="545"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="546"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>(int):<sp/>Index<sp/>at<sp/>which<sp/>to<sp/>set<sp/>the<sp/>new<sp/>y<sp/>and<sp/>x<sp/>values.</highlight></codeline>
<codeline lineno="547"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>(float):<sp/>The<sp/>new<sp/>value<sp/>for<sp/>y<sp/>to<sp/>be<sp/>set<sp/>at<sp/>the<sp/>specified<sp/>index.</highlight></codeline>
<codeline lineno="548"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>(np.ndarray):<sp/>The<sp/>new<sp/>value<sp/>for<sp/>x<sp/>to<sp/>be<sp/>set<sp/>at<sp/>the<sp/>specified<sp/>index.</highlight></codeline>
<codeline lineno="549"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a12d96e54629b449293d2aabf5542ddc1" kindref="member">set_y</ref>(i,<sp/>y)</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a732636cd5ab3c40b878ef2e0274b1d1b" kindref="member">set_x</ref>(i,<sp/>x)</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a879e1014d958865e37c48d5d271c8dc6" kindref="member">crossover</ref>(self)<sp/>-&gt;<sp/>Tuple[int,int]:<sp/></highlight><highlight class="comment">#<sp/>Choose<sp/>two<sp/>good<sp/>entries<sp/>for<sp/>recombination</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="555"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Selects<sp/>two<sp/>good<sp/>entries<sp/>for<sp/>recombination<sp/>based<sp/>on<sp/>a<sp/>probabilistic<sp/>threshold.</highlight></codeline>
<codeline lineno="556"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="557"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>attempts<sp/>to<sp/>choose<sp/>two<sp/>distinct<sp/>indices<sp/>from<sp/>a<sp/>pool<sp/>based<sp/>on<sp/>a</highlight></codeline>
<codeline lineno="558"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>random<sp/>limit<sp/>derived<sp/>from<sp/>the<sp/>current<sp/>number<sp/>of<sp/>stored<sp/>entries.<sp/>The<sp/>method</highlight></codeline>
<codeline lineno="559"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>performs<sp/>several<sp/>attempts<sp/>to<sp/>identify<sp/>these<sp/>indices<sp/>under<sp/>the<sp/>defined<sp/>constraints.</highlight></codeline>
<codeline lineno="560"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>successful,<sp/>it<sp/>returns<sp/>the<sp/>selected<sp/>indices;<sp/>otherwise,<sp/>it<sp/>returns<sp/>default</highlight></codeline>
<codeline lineno="561" refid="classfcmaes_1_1advretry_1_1_store_1a00ab052ea8b184b7344875122481b623" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>values<sp/>indicating<sp/>no<sp/>valid<sp/>selection.</highlight></codeline>
<codeline lineno="562"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="563"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="564"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Tuple[int,<sp/>int]:<sp/>A<sp/>tuple<sp/>containing<sp/>two<sp/>indices<sp/>selected<sp/>for<sp/>recombination.</highlight></codeline>
<codeline lineno="565"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>the<sp/>selection<sp/>fails,<sp/>returns<sp/>(-1,<sp/>-1).</highlight></codeline>
<codeline lineno="566"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>n<sp/>&lt;<sp/>2:</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1,<sp/>-1</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lim<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af869a404006e773c0f7fd0744d3733f8" kindref="member">rg</ref>.<ref refid="evaluator_8h_1ad408c1ac0c479863b2d1291c483c5593" kindref="member">uniform</ref>(min(0.1*n,<sp/>1),<sp/>0.2*n)/n</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>_<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(100):</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i1<sp/>=<sp/>-1</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i2<sp/>=<sp/>-1</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>j<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(n):</highlight></codeline>
<codeline lineno="575" refid="classfcmaes_1_1advretry_1_1_store_1a0ae90f35f58deb629c18747fbf9b1cc9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af869a404006e773c0f7fd0744d3733f8" kindref="member">rg</ref>.random()<sp/>&lt;<sp/>lim:</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>i1<sp/>&lt;<sp/>0:</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i1<sp/>=<sp/>j</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i2<sp/>=<sp/>j</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>i1,<sp/>i2</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1,<sp/>-1</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1aa5c9f7209b6bfb5bf079ad940a84eea4" kindref="member">sort</ref>(self)<sp/>-&gt;<sp/>int:</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="585"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Sorts<sp/>and<sp/>updates<sp/>stored<sp/>data<sp/>based<sp/>on<sp/>the<sp/>given<sp/>criteria.</highlight></codeline>
<codeline lineno="586"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="587"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>method<sp/>sorts<sp/>the<sp/>stored<sp/>data<sp/>`ys`<sp/>in<sp/>ascending<sp/>order<sp/>of<sp/>their<sp/>values.<sp/>It<sp/>ensures</highlight></codeline>
<codeline lineno="588"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>diversity<sp/>by<sp/>selecting<sp/>specific<sp/>data<sp/>points<sp/>that<sp/>meet<sp/>the<sp/>distance<sp/>threshold<sp/>from<sp/>the</highlight></codeline>
<codeline lineno="589"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>two<sp/>most<sp/>recently<sp/>added<sp/>elements.<sp/>It<sp/>then<sp/>updates<sp/>the<sp/>stored<sp/>data<sp/>to<sp/>retain<sp/>only<sp/>the</highlight></codeline>
<codeline lineno="590"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best<sp/>90%<sp/>of<sp/>the<sp/>sorted<sp/>elements<sp/>up<sp/>to<sp/>the<sp/>storage<sp/>capacity.</highlight></codeline>
<codeline lineno="591"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="592" refid="classfcmaes_1_1advretry_1_1_store_1a879e1014d958865e37c48d5d271c8dc6" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="593"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int:<sp/>The<sp/>updated<sp/>number<sp/>of<sp/>stored<sp/>elements.</highlight></codeline>
<codeline lineno="594"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="595"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises:</highlight></codeline>
<codeline lineno="596"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ValueError:<sp/>If<sp/>the<sp/>number<sp/>of<sp/>stored<sp/>elements<sp/>is<sp/>less<sp/>than<sp/>2.</highlight></codeline>
<codeline lineno="597"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ns<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>ns<sp/>&lt;<sp/>2:</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="601"><highlight class="normal"></highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys<sp/>=<sp/>np.asarray(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ac058ac776acb3ce2891ddb0fe7a15100" kindref="member">ys</ref>[:ns])</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>yi<sp/>=<sp/>ys.argsort()</highlight></codeline>
<codeline lineno="604"><highlight class="normal"></highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys2<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs2<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(ns):</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>=<sp/>ys[yi[i]]</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>=<sp/>np.asarray(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a97e407315b2e0c802b9d5b4414f3f91b" kindref="member">get_x</ref>(yi[i]))<sp/><sp/></highlight><highlight class="comment">#<sp/>preserve<sp/>diversity</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>np.all([self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a00ab052ea8b184b7344875122481b623" kindref="member">distance</ref>(xp,<sp/>x)<sp/>&gt;<sp/>0.15<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>xp<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>xs2[-2:]]):<sp/></highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys2.append(y)</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs2.append(x)</highlight></codeline>
<codeline lineno="613"><highlight class="normal"></highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ns<sp/>=<sp/>min(len(ys2),int(0.9*self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ac02358030591fcfa40acde3b27f6ee30" kindref="member">capacity</ref>))<sp/></highlight><highlight class="comment">#<sp/>keep<sp/>90%<sp/>best<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(ns):</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a0ae90f35f58deb629c18747fbf9b1cc9" kindref="member">replace</ref>(i,<sp/>ys2[i],<sp/>xs2[i])</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value<sp/>=<sp/>ns<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1afefa9194fbf5ada1b23dcd45ed3e48f3" kindref="member">worst_y</ref>.value<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a907617cde0def7276f1f609d7690335f" kindref="member">get_y</ref>(ns-1)</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ns</highlight></codeline>
<codeline lineno="620"><highlight class="normal"></highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a7dfa5440d1d295083cef68ea37be60fe" kindref="member">add_result</ref>(self,<sp/>y:<sp/>float,<sp/>x:<sp/>np.ndarray,<sp/>evals:<sp/>int,<sp/>limit:<sp/>Optional[float]<sp/>=<sp/>np.inf):</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="623" refid="classfcmaes_1_1advretry_1_1_store_1aa5c9f7209b6bfb5bf079ad940a84eea4" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Adds<sp/>a<sp/>result<sp/>to<sp/>the<sp/>current<sp/>optimization<sp/>process,<sp/>updating<sp/>the<sp/>best<sp/>result<sp/>if</highlight></codeline>
<codeline lineno="624"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>necessary<sp/>and<sp/>storing<sp/>the<sp/>new<sp/>result<sp/>in<sp/>the<sp/>internal<sp/>data<sp/>structure.</highlight></codeline>
<codeline lineno="625"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="626"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>is<sp/>designed<sp/>to<sp/>handle<sp/>updates<sp/>in<sp/>a<sp/>thread-safe<sp/>manner.<sp/>It<sp/>increments</highlight></codeline>
<codeline lineno="627"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>number<sp/>of<sp/>evaluations,<sp/>checks<sp/>if<sp/>the<sp/>new<sp/>result<sp/>is<sp/>within<sp/>the<sp/>given<sp/>limit,</highlight></codeline>
<codeline lineno="628"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>updates<sp/>the<sp/>best<sp/>result<sp/>as<sp/>well<sp/>as<sp/>the<sp/>storage<sp/>if<sp/>the<sp/>criteria<sp/>are<sp/>met.<sp/>If<sp/>the</highlight></codeline>
<codeline lineno="629"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>storage<sp/>reaches<sp/>its<sp/>capacity,<sp/>it<sp/>triggers<sp/>a<sp/>sorting<sp/>operation<sp/>to<sp/>maintain<sp/>order.</highlight></codeline>
<codeline lineno="630"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="631"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="632"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y<sp/>(float):<sp/>The<sp/>result<sp/>value<sp/>to<sp/>be<sp/>added.</highlight></codeline>
<codeline lineno="633"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>(np.ndarray):<sp/>The<sp/>array<sp/>representing<sp/>input<sp/>parameters<sp/>corresponding<sp/>to<sp/>the<sp/>result.</highlight></codeline>
<codeline lineno="634"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evals<sp/>(int):<sp/>The<sp/>number<sp/>of<sp/>evaluations<sp/>associated<sp/>with<sp/>this<sp/>result.</highlight></codeline>
<codeline lineno="635"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>limit<sp/>(Optional[float]):<sp/>The<sp/>threshold<sp/>value.<sp/>Results<sp/>with<sp/>a<sp/>value<sp/>greater<sp/>than</highlight></codeline>
<codeline lineno="636"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this<sp/>limit<sp/>are<sp/>ignored.<sp/>Defaults<sp/>to<sp/>infinity.</highlight></codeline>
<codeline lineno="637"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ae73944a21ee51902dfdc93403dadc8ce" kindref="member">add_mutex</ref>:</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af0db304f4763604809335265782f7d98" kindref="member">count_evals</ref>.value<sp/>+=<sp/>evals</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>y<sp/>&lt;<sp/>limit:</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>y<sp/>&lt;<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a597ae039b1fe0bd28ed9afc8e270075a" kindref="member">best_y</ref>.value:</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a597ae039b1fe0bd28ed9afc8e270075a" kindref="member">best_y</ref>.value<sp/>=<sp/>y</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aeb660ff644cb19f40c20494360cebb57" kindref="member">best_x</ref>[:]<sp/>=<sp/>x[:]</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a03953d817f7ad4b1c13818e1f133a6da" kindref="member">dump</ref>()</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a4a5af1d8a29594eff250c931f481d146" kindref="member">datafile</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a19b9d6c0787fb06a2b00e595f487bf37" kindref="member">save</ref>(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a4a5af1d8a29594eff250c931f481d146" kindref="member">datafile</ref>)</highlight></codeline>
<codeline lineno="647"><highlight class="normal"></highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value<sp/>&gt;=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ac02358030591fcfa40acde3b27f6ee30" kindref="member">capacity</ref><sp/>-<sp/>1:</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aa5c9f7209b6bfb5bf079ad940a84eea4" kindref="member">sort</ref>()</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ns<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a0ae90f35f58deb629c18747fbf9b1cc9" kindref="member">replace</ref>(ns,<sp/>y,<sp/>x)</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value<sp/>=<sp/>ns<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a95e2b65e516214df91625c67e4ebe558" kindref="member">get_x_best</ref>(self)<sp/>-&gt;<sp/>np.ndarray:</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="656"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>best<sp/>solutions<sp/>stored<sp/>in<sp/>the<sp/>internal<sp/>state.</highlight></codeline>
<codeline lineno="657"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="658"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>retrieves<sp/>the<sp/>best<sp/>solution(s)<sp/>found,<sp/>which<sp/>are<sp/>stored</highlight></codeline>
<codeline lineno="659"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>internally,<sp/>and<sp/>returns<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>data<sp/>to<sp/>avoid<sp/>unintentional</highlight></codeline>
<codeline lineno="660"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>modifications<sp/>to<sp/>the<sp/>original<sp/>data.</highlight></codeline>
<codeline lineno="661"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="662"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="663" refid="classfcmaes_1_1advretry_1_1_store_1a7dfa5440d1d295083cef68ea37be60fe" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>np.ndarray:<sp/>A<sp/>numpy<sp/>array<sp/>containing<sp/>the<sp/>best<sp/>solution(s).</highlight></codeline>
<codeline lineno="664"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>np.array(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aeb660ff644cb19f40c20494360cebb57" kindref="member">best_x</ref>[:])</highlight></codeline>
<codeline lineno="666"><highlight class="normal"></highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a97e407315b2e0c802b9d5b4414f3f91b" kindref="member">get_x</ref>(self,<sp/>pid)<sp/>-&gt;<sp/>np.ndarray:</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="669"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Retrieves<sp/>a<sp/>segment<sp/>of<sp/>the<sp/>`xs`<sp/>array<sp/>corresponding<sp/>to<sp/>the<sp/>provided<sp/>`pid`.</highlight></codeline>
<codeline lineno="670"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="671"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="672"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pid<sp/>(int):<sp/>Index<sp/>used<sp/>to<sp/>calculate<sp/>the<sp/>segment.</highlight></codeline>
<codeline lineno="673"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="674"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="675"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>np.ndarray:<sp/>The<sp/>segment<sp/>of<sp/>the<sp/>`xs`<sp/>array.</highlight></codeline>
<codeline lineno="676"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1adcc4bcd2b2d9dd72a7d315ac273def89" kindref="member">xs</ref>[pid*self.<ref refid="classfcmaes_1_1advretry_1_1_store_1abe787e76d4993d0280a389dabc8c3fe9" kindref="member">dim</ref>:(pid+1)*self.<ref refid="classfcmaes_1_1advretry_1_1_store_1abe787e76d4993d0280a389dabc8c3fe9" kindref="member">dim</ref>]</highlight></codeline>
<codeline lineno="678"><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a2df2e37a5663c3e12c22c4b97f2549a2" kindref="member">get_xs</ref>(self)-&gt;<sp/>np.ndarray:</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="681"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Builds<sp/>and<sp/>returns<sp/>an<sp/>array<sp/>of<sp/>x<sp/>values<sp/>stored<sp/>in<sp/>the<sp/>object.</highlight></codeline>
<codeline lineno="682"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="683"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>iterates<sp/>over<sp/>the<sp/>number<sp/>of<sp/>stored<sp/>x<sp/>values<sp/>and<sp/>retrieves<sp/>each</highlight></codeline>
<codeline lineno="684"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value<sp/>using<sp/>the<sp/>`get_x`<sp/>method.<sp/>The<sp/>retrieved<sp/>values<sp/>are<sp/>then<sp/>compiled<sp/>into</highlight></codeline>
<codeline lineno="685"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a<sp/>NumPy<sp/>array,<sp/>which<sp/>is<sp/>returned.</highlight></codeline>
<codeline lineno="686"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="687"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="688"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>np.ndarray:<sp/>A<sp/>NumPy<sp/>array<sp/>containing<sp/>the<sp/>retrieved<sp/>x<sp/>values.</highlight></codeline>
<codeline lineno="689"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="690" refid="classfcmaes_1_1advretry_1_1_store_1a95e2b65e516214df91625c67e4ebe558" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>np.array([self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a97e407315b2e0c802b9d5b4414f3f91b" kindref="member">get_x</ref>(i)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value)])</highlight></codeline>
<codeline lineno="691"><highlight class="normal"></highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a907617cde0def7276f1f609d7690335f" kindref="member">get_y</ref>(self,<sp/>pid:<sp/>int)<sp/>-&gt;<sp/>float:</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="694"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Fetches<sp/>a<sp/>value<sp/>for<sp/>a<sp/>given<sp/>ID<sp/>from<sp/>a<sp/>dictionary<sp/>of<sp/>float<sp/>values.</highlight></codeline>
<codeline lineno="695"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="696"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>retrieves<sp/>a<sp/>corresponding<sp/>float<sp/>value<sp/>from<sp/>the<sp/>`ys`<sp/>dictionary</highlight></codeline>
<codeline lineno="697"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>based<sp/>on<sp/>the<sp/>provided<sp/>integer<sp/>ID.<sp/>The<sp/>dictionary<sp/>`ys`<sp/>maps<sp/>integer<sp/>IDs<sp/>to</highlight></codeline>
<codeline lineno="698"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>values.<sp/>The<sp/>function<sp/>returns<sp/>the<sp/>float<sp/>value<sp/>associated<sp/>with<sp/>the</highlight></codeline>
<codeline lineno="699"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>supplied<sp/>`pid`.</highlight></codeline>
<codeline lineno="700"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="701"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="702" refid="classfcmaes_1_1advretry_1_1_store_1a97e407315b2e0c802b9d5b4414f3f91b" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pid<sp/>(int):<sp/>The<sp/>unique<sp/>identifier<sp/>used<sp/>to<sp/>fetch<sp/>a<sp/>value<sp/>from<sp/>the<sp/>`ys`</highlight></codeline>
<codeline lineno="703"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dictionary.</highlight></codeline>
<codeline lineno="704"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="705"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="706"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float:<sp/>The<sp/>value<sp/>corresponding<sp/>to<sp/>the<sp/>provided<sp/>`pid`<sp/>from<sp/>the<sp/>`ys`</highlight></codeline>
<codeline lineno="707"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dictionary.</highlight></codeline>
<codeline lineno="708"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ac058ac776acb3ce2891ddb0fe7a15100" kindref="member">ys</ref>[pid]</highlight></codeline>
<codeline lineno="710"><highlight class="normal"></highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a3cc073975313c4893de761cfc9771d77" kindref="member">get_ys</ref>(self)<sp/>-&gt;<sp/>np.ndarray:</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="713"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Gets<sp/>the<sp/>stored<sp/>y-values<sp/>up<sp/>to<sp/>the<sp/>specified<sp/>count.</highlight></codeline>
<codeline lineno="714"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="715" refid="classfcmaes_1_1advretry_1_1_store_1a2df2e37a5663c3e12c22c4b97f2549a2" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>retrieves<sp/>the<sp/>portion<sp/>of<sp/>the<sp/>y-values<sp/>list<sp/>that<sp/>corresponds<sp/>to</highlight></codeline>
<codeline lineno="716"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>count<sp/>determined<sp/>by<sp/>`num_stored.value`.<sp/>The<sp/>result<sp/>is<sp/>returned<sp/>as<sp/>a</highlight></codeline>
<codeline lineno="717"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NumPy<sp/>array.</highlight></codeline>
<codeline lineno="718"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="719"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="720"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>np.ndarray:<sp/>A<sp/>NumPy<sp/>array<sp/>containing<sp/>the<sp/>stored<sp/>y-values<sp/>up<sp/>to<sp/>the<sp/>specified<sp/>count.</highlight></codeline>
<codeline lineno="721"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>np.array(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ac058ac776acb3ce2891ddb0fe7a15100" kindref="member">ys</ref>[:self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value])</highlight></codeline>
<codeline lineno="723"><highlight class="normal"></highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a801f488c7741c549ab3212f5ce52803a" kindref="member">get_y_best</ref>(self)<sp/>-&gt;<sp/>float:</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="726"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns<sp/>the<sp/>best<sp/>value<sp/>of<sp/>y<sp/>stored<sp/>in<sp/>the<sp/>`best_y`<sp/>attribute.</highlight></codeline>
<codeline lineno="727"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="728"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>function<sp/>accesses<sp/>the<sp/>`best_y`<sp/>attribute<sp/>and<sp/>retrieves<sp/>its<sp/>value</highlight></codeline>
<codeline lineno="729"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>as<sp/>a<sp/>float.</highlight></codeline>
<codeline lineno="730"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="731"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="732"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float:<sp/>The<sp/>best<sp/>value<sp/>of<sp/>y.</highlight></codeline>
<codeline lineno="733"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="734" refid="classfcmaes_1_1advretry_1_1_store_1a907617cde0def7276f1f609d7690335f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a597ae039b1fe0bd28ed9afc8e270075a" kindref="member">best_y</ref>.value</highlight></codeline>
<codeline lineno="735"><highlight class="normal"></highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a0e6a826522ffacef8ab24249fc4127b4" kindref="member">get_count_evals</ref>(self)<sp/>-&gt;<sp/>int:</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="738"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Retrieves<sp/>the<sp/>value<sp/>of<sp/>the<sp/>evaluation<sp/>count.</highlight></codeline>
<codeline lineno="739"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="740"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>accesses<sp/>the<sp/>`count_evals`<sp/>attribute<sp/>and<sp/>returns<sp/>its<sp/>integer</highlight></codeline>
<codeline lineno="741"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value.<sp/>It<sp/>is<sp/>primarily<sp/>intended<sp/>to<sp/>report<sp/>the<sp/>current<sp/>count<sp/>of<sp/>evaluations</highlight></codeline>
<codeline lineno="742"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stored<sp/>in<sp/>the<sp/>`count_evals`<sp/>attribute.</highlight></codeline>
<codeline lineno="743"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="744"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="745"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int:<sp/>The<sp/>current<sp/>evaluation<sp/>count<sp/>stored<sp/>in<sp/>`count_evals`.</highlight></codeline>
<codeline lineno="746"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="747" refid="classfcmaes_1_1advretry_1_1_store_1a3cc073975313c4893de761cfc9771d77" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af0db304f4763604809335265782f7d98" kindref="member">count_evals</ref>.value</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a329ccb4c8a17a35fec30a506495dee61" kindref="member">get_count_runs</ref>(self)<sp/>-&gt;<sp/>int:</highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="751"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Retrieves<sp/>the<sp/>count<sp/>of<sp/>runs.</highlight></codeline>
<codeline lineno="752"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="753"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>returns<sp/>the<sp/>value<sp/>of<sp/>the<sp/>`count_runs`<sp/>attribute,<sp/>representing</highlight></codeline>
<codeline lineno="754"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>total<sp/>count<sp/>of<sp/>runs<sp/>made.</highlight></codeline>
<codeline lineno="755"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="756"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="757"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int:<sp/>The<sp/>value<sp/>of<sp/>the<sp/>`count_runs`<sp/>attribute.</highlight></codeline>
<codeline lineno="758"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="759" refid="classfcmaes_1_1advretry_1_1_store_1a801f488c7741c549ab3212f5ce52803a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a073e21184da6081e7a868fb615bfa55f" kindref="member">count_runs</ref>.value</highlight></codeline>
<codeline lineno="760"><highlight class="normal"></highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a732636cd5ab3c40b878ef2e0274b1d1b" kindref="member">set_x</ref>(self,<sp/>pid,<sp/>xs):</highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="763"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Sets<sp/>a<sp/>subset<sp/>of<sp/>the<sp/>`xs`<sp/>list<sp/>for<sp/>a<sp/>specific<sp/>process<sp/>ID.</highlight></codeline>
<codeline lineno="764"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="765"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>function<sp/>updates<sp/>a<sp/>section<sp/>of<sp/>the<sp/>`xs`<sp/>attribute<sp/>corresponding<sp/>to<sp/>a</highlight></codeline>
<codeline lineno="766"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>particular<sp/>process<sp/>ID<sp/>(`pid`)<sp/>based<sp/>on<sp/>the<sp/>provided<sp/>input<sp/>values.</highlight></codeline>
<codeline lineno="767"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="768"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="769"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pid:<sp/>Process<sp/>ID<sp/>whose<sp/>section<sp/>in<sp/>`xs`<sp/>is<sp/>to<sp/>be<sp/>updated.</highlight></codeline>
<codeline lineno="770"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs:<sp/>List<sp/>of<sp/>values<sp/>to<sp/>update<sp/>in<sp/>the<sp/>specific<sp/>section<sp/>of<sp/>`xs`<sp/>for<sp/>the<sp/>given</highlight></codeline>
<codeline lineno="771"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process<sp/>ID.</highlight></codeline>
<codeline lineno="772" refid="classfcmaes_1_1advretry_1_1_store_1a0e6a826522ffacef8ab24249fc4127b4" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1adcc4bcd2b2d9dd72a7d315ac273def89" kindref="member">xs</ref>[pid*self.<ref refid="classfcmaes_1_1advretry_1_1_store_1abe787e76d4993d0280a389dabc8c3fe9" kindref="member">dim</ref>:(pid+1)*self.<ref refid="classfcmaes_1_1advretry_1_1_store_1abe787e76d4993d0280a389dabc8c3fe9" kindref="member">dim</ref>]<sp/>=<sp/>xs[:]</highlight></codeline>
<codeline lineno="774"><highlight class="normal"></highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a12d96e54629b449293d2aabf5542ddc1" kindref="member">set_y</ref>(self,<sp/>pid,<sp/>y):</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="777"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Sets<sp/>the<sp/>value<sp/>of<sp/>y<sp/>for<sp/>a<sp/>given<sp/>pid<sp/>within<sp/>the<sp/>&apos;ys&apos;<sp/>mapping.</highlight></codeline>
<codeline lineno="778"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="779"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Modifies<sp/>the<sp/>associated<sp/>value<sp/>of<sp/>y<sp/>in<sp/>the<sp/>dictionary<sp/>&apos;ys&apos;<sp/>for<sp/>the</highlight></codeline>
<codeline lineno="780"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>provided<sp/>process<sp/>identifier<sp/>(pid).<sp/>This<sp/>method<sp/>stores<sp/>or<sp/>updates</highlight></codeline>
<codeline lineno="781"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>y<sp/>value<sp/>tied<sp/>to<sp/>a<sp/>specific<sp/>pid.</highlight></codeline>
<codeline lineno="782"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="783"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="784" refid="classfcmaes_1_1advretry_1_1_store_1a329ccb4c8a17a35fec30a506495dee61" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pid:<sp/>Identifier<sp/>for<sp/>the<sp/>process<sp/>whose<sp/>y<sp/>value<sp/>is<sp/>being<sp/>set.</highlight></codeline>
<codeline lineno="785"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>y:<sp/>The<sp/>value<sp/>to<sp/>associate<sp/>with<sp/>the<sp/>given<sp/>pid<sp/>in<sp/>the<sp/>&apos;ys&apos;<sp/>mapping.</highlight></codeline>
<codeline lineno="786"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ac058ac776acb3ce2891ddb0fe7a15100" kindref="member">ys</ref>[pid]<sp/>=<sp/>y</highlight></codeline>
<codeline lineno="788"><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1ac1a185da0fdff01550d275b4635f73df" kindref="member">get_runs_compare_incr</ref>(self,<sp/>limit:<sp/>float)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="791"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Compares<sp/>the<sp/>current<sp/>count<sp/>of<sp/>runs<sp/>against<sp/>a<sp/>specified<sp/>limit<sp/>and<sp/>increments<sp/>internal</highlight></codeline>
<codeline lineno="792"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>counters<sp/>accordingly<sp/>if<sp/>the<sp/>limit<sp/>is<sp/>not<sp/>exceeded.</highlight></codeline>
<codeline lineno="793"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="794"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="795"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>limit<sp/>(float):<sp/>The<sp/>upper<sp/>threshold<sp/>to<sp/>compare<sp/>against<sp/>the<sp/>current<sp/>count<sp/>of<sp/>runs.</highlight></codeline>
<codeline lineno="796"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="797"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="798" refid="classfcmaes_1_1advretry_1_1_store_1a732636cd5ab3c40b878ef2e0274b1d1b" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bool:<sp/>True<sp/>if<sp/>the<sp/>current<sp/>count<sp/>is<sp/>less<sp/>than<sp/>the<sp/>limit<sp/>and<sp/>the<sp/>increment<sp/>operation<sp/>was</highlight></codeline>
<codeline lineno="799"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>performed.<sp/>False<sp/>otherwise.</highlight></codeline>
<codeline lineno="800"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1ae73944a21ee51902dfdc93403dadc8ce" kindref="member">add_mutex</ref>:</highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a073e21184da6081e7a868fb615bfa55f" kindref="member">count_runs</ref>.value<sp/>&lt;<sp/>limit:</highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a073e21184da6081e7a868fb615bfa55f" kindref="member">count_runs</ref>.value<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a073e21184da6081e7a868fb615bfa55f" kindref="member">count_runs</ref>.value<sp/>%<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3dc00b6f12a508d7e3537e4869bae3ae" kindref="member">check_interval</ref><sp/>==<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3dc00b6f12a508d7e3537e4869bae3ae" kindref="member">check_interval</ref>-1:</highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aca1758cb0a6f2a0033b311b9cc89684c" kindref="member">eval_fac</ref>.value<sp/>&lt;<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a943e1c9111fc75a8c7aad94b9feb5538" kindref="member">max_eval_fac</ref>:</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aca1758cb0a6f2a0033b311b9cc89684c" kindref="member">eval_fac</ref>.value<sp/>+=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aebbd407d5af1334e38fbdc5a8ba36d3f" kindref="member">eval_fac_incr</ref></highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aa5c9f7209b6bfb5bf079ad940a84eea4" kindref="member">sort</ref>()<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="811"><highlight class="normal"></highlight></codeline>
<codeline lineno="812" refid="classfcmaes_1_1advretry_1_1_store_1a12d96e54629b449293d2aabf5542ddc1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classfcmaes_1_1advretry_1_1_store_1a03953d817f7ad4b1c13818e1f133a6da" kindref="member">dump</ref>(self):</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="814"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Logs<sp/>a<sp/>summary<sp/>of<sp/>the<sp/>execution<sp/>metrics<sp/>and<sp/>current<sp/>status.</highlight></codeline>
<codeline lineno="815"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="816"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>method<sp/>collects<sp/>relevant<sp/>metrics<sp/>about<sp/>the<sp/>execution<sp/>process<sp/>and<sp/>generates<sp/>a</highlight></codeline>
<codeline lineno="817"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>formatted<sp/>log<sp/>message<sp/>to<sp/>provide<sp/>insights<sp/>into<sp/>the<sp/>current<sp/>state.<sp/>Metrics<sp/>such<sp/>as</highlight></codeline>
<codeline lineno="818"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evaluation<sp/>counts,<sp/>best<sp/>and<sp/>worst<sp/>outcomes,<sp/>and<sp/>a<sp/>snapshot<sp/>of<sp/>the<sp/>best<sp/>solutions<sp/>are</highlight></codeline>
<codeline lineno="819"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>included<sp/>in<sp/>the<sp/>message.</highlight></codeline>
<codeline lineno="820"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="821"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="822"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="823"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="824"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="825"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>None</highlight></codeline>
<codeline lineno="826" refid="classfcmaes_1_1advretry_1_1_store_1ac1a185da0fdff01550d275b4635f73df" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Ys<sp/>=<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3cc073975313c4893de761cfc9771d77" kindref="member">get_ys</ref>()</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vals<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(min(20,<sp/>len(Ys))):</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vals.append(round(Ys[i],2))<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt<sp/>=<sp/>dtime(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a3353add8a5c4d01dd02a8a56890c1036" kindref="member">t0</ref>)+.000001<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;{0}<sp/>{1}<sp/>{2}<sp/>{3}<sp/>{4:.6f}<sp/>{5:.2f}<sp/>{6}<sp/>{7}<sp/>{8!s}<sp/>{9!s}&apos;</highlight><highlight class="normal">.format(</highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt,<sp/>int(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af0db304f4763604809335265782f7d98" kindref="member">count_evals</ref>.value<sp/>/<sp/>dt),<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a073e21184da6081e7a868fb615bfa55f" kindref="member">count_runs</ref>.value,<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1af0db304f4763604809335265782f7d98" kindref="member">count_evals</ref>.value,<sp/></highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a597ae039b1fe0bd28ed9afc8e270075a" kindref="member">best_y</ref>.value,<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1afefa9194fbf5ada1b23dcd45ed3e48f3" kindref="member">worst_y</ref>.value,<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1a35cab48a8942fed186c0a6bd88b90497" kindref="member">num_stored</ref>.value,<sp/>int(self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aca1758cb0a6f2a0033b311b9cc89684c" kindref="member">eval_fac</ref>.value),<sp/></highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vals,<sp/>self.<ref refid="classfcmaes_1_1advretry_1_1_store_1aeb660ff644cb19f40c20494360cebb57" kindref="member">best_x</ref>[:])</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(message)</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="838"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1advretry_1a2e67b1339ce1e546807f7cba0a45d8c9" kindref="member">_retry_loop</ref>(pid,<sp/>rgs,<sp/>store,<sp/>optimize,<sp/>value_limit,<sp/>stop_fitness<sp/>=<sp/>-np.inf):</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="840"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Retries<sp/>a<sp/>loop<sp/>for<sp/>optimization<sp/>until<sp/>stopping<sp/>criteria<sp/>are<sp/>met.</highlight></codeline>
<codeline lineno="841"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="842"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>The<sp/>function<sp/>performs<sp/>optimization<sp/>processes<sp/>in<sp/>a<sp/>loop,<sp/>sampling<sp/>solutions<sp/>and<sp/>evaluating<sp/>their</highlight></codeline>
<codeline lineno="843"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>fitness<sp/>to<sp/>improve<sp/>a<sp/>defined<sp/>objective<sp/>within<sp/>bounds.<sp/>It<sp/>also<sp/>incorporates<sp/>handling<sp/>parallel</highlight></codeline>
<codeline lineno="844"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>executions<sp/>for<sp/>optimization<sp/>using<sp/>private<sp/>random<sp/>generator<sp/>and<sp/>thread<sp/>limits.</highlight></codeline>
<codeline lineno="845"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="846"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="847"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pid<sp/>(int):<sp/>The<sp/>process<sp/>or<sp/>thread<sp/>identifier<sp/>for<sp/>parallel<sp/>computation.</highlight></codeline>
<codeline lineno="848"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgs<sp/>(List[RandomState]):<sp/>A<sp/>list<sp/>of<sp/>random<sp/>generator<sp/>states<sp/>that<sp/>control<sp/>the<sp/>stochastic</highlight></codeline>
<codeline lineno="849"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>behavior<sp/>of<sp/>each<sp/>process<sp/>or<sp/>thread.</highlight></codeline>
<codeline lineno="850"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>store<sp/>(Store):<sp/>The<sp/>shared<sp/>data<sp/>store,<sp/>containing<sp/>optimization<sp/>inherent<sp/>details<sp/>like<sp/>lower</highlight></codeline>
<codeline lineno="851"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>upper<sp/>bounds,<sp/>number<sp/>of<sp/>retries,<sp/>best<sp/>fitness<sp/>achieved,<sp/>and<sp/>statistical<sp/>configurations.</highlight></codeline>
<codeline lineno="852" refid="classfcmaes_1_1advretry_1_1_store_1a03953d817f7ad4b1c13818e1f133a6da" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimize<sp/>(Callable):<sp/>The<sp/>optimization<sp/>function<sp/>responsible<sp/>for<sp/>processing<sp/>sample<sp/>solutions</highlight></codeline>
<codeline lineno="853"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>measuring<sp/>fitness<sp/>outcomes.</highlight></codeline>
<codeline lineno="854"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_limit<sp/>(float):<sp/>The<sp/>maximum<sp/>value<sp/>allowed<sp/>for<sp/>a<sp/>solution,<sp/>restricting<sp/>unacceptable</highlight></codeline>
<codeline lineno="855"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outliers<sp/>in<sp/>the<sp/>results.</highlight></codeline>
<codeline lineno="856"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stop_fitness<sp/>(float):<sp/>The<sp/>fitness<sp/>threshold<sp/>at<sp/>which<sp/>the<sp/>optimization<sp/>ceases<sp/>if<sp/>exceeded</highlight></codeline>
<codeline lineno="857"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>by<sp/>best<sp/>achieved<sp/>fitness.<sp/>Defaults<sp/>to<sp/>negative<sp/>infinity.</highlight></codeline>
<codeline lineno="858"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/>fun<sp/>=<sp/>store.wrapper<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>store.statistic_num<sp/>&gt;<sp/>0<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>store.fun</highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#with<sp/>threadpoolctl.threadpool_limits(limits=1,<sp/>user_api=&quot;blas&quot;):</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>store.get_runs_compare_incr(store.num_retries)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>store.best_y.value<sp/>&gt;<sp/>stop_fitness:</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/><ref refid="namespacefcmaes_1_1advretry_1a6c3c42e1fa5ab01ff7ba59710578ebb5" kindref="member">_crossover</ref>(fun,<sp/>store,<sp/>optimize,<sp/>rgs[pid]):</highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rg<sp/>=<sp/>rgs[pid]</highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dim<sp/>=<sp/>len(store.lower)</highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sol,<sp/>y,<sp/>evals<sp/>=<sp/>optimize(fun,<sp/>Bounds(store.lower,<sp/>store.upper),<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[rg.uniform(0.05,<sp/>0.1)]*dim,<sp/>rg,<sp/>store)</highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>store.add_result(y,<sp/>sol,<sp/>evals,<sp/>value_limit)</highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>ex:</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="873"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1advretry_1a6c3c42e1fa5ab01ff7ba59710578ebb5" kindref="member">_crossover</ref>(fun,<sp/>store,<sp/>optimize,<sp/>rg):</highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="875"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Performs<sp/>a<sp/>crossover<sp/>operation<sp/>to<sp/>optimize<sp/>a<sp/>function.</highlight></codeline>
<codeline lineno="876"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="877"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>This<sp/>function<sp/>attempts<sp/>to<sp/>optimize<sp/>a<sp/>given<sp/>function<sp/>using<sp/>an<sp/>optimization</highlight></codeline>
<codeline lineno="878"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>strategy<sp/>by<sp/>utilizing<sp/>the<sp/>provided<sp/>parameters<sp/>and<sp/>probabilistic<sp/>logic<sp/>to<sp/>decide</highlight></codeline>
<codeline lineno="879"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>whether<sp/>crossover<sp/>should<sp/>be<sp/>performed.<sp/>It<sp/>uses<sp/>the<sp/>specified<sp/>random<sp/>generator</highlight></codeline>
<codeline lineno="880"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>and<sp/>optimization<sp/>function,<sp/>and<sp/>updates<sp/>the<sp/>solution<sp/>store<sp/>upon<sp/>successful</highlight></codeline>
<codeline lineno="881"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>optimization<sp/>completion.</highlight></codeline>
<codeline lineno="882"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="883"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="884"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fun:<sp/>The<sp/>objective<sp/>function<sp/>to<sp/>be<sp/>optimized.</highlight></codeline>
<codeline lineno="885"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>store:<sp/>An<sp/>object<sp/>that<sp/>stores<sp/>limits,<sp/>results,<sp/>and<sp/>other<sp/>related<sp/>data.</highlight></codeline>
<codeline lineno="886" refid="namespacefcmaes_1_1advretry_1a2e67b1339ce1e546807f7cba0a45d8c9" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimize:<sp/>A<sp/>callable<sp/>function<sp/>used<sp/>to<sp/>perform<sp/>the<sp/>optimization.</highlight></codeline>
<codeline lineno="887"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rg:<sp/>A<sp/>random<sp/>generator<sp/>for<sp/>probabilistic<sp/>decisions<sp/>and<sp/>randomness<sp/>during</highlight></codeline>
<codeline lineno="888"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>optimization<sp/>process.</highlight></codeline>
<codeline lineno="889"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="890"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="891"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bool:<sp/>True<sp/>if<sp/>the<sp/>optimization<sp/>process<sp/>completes<sp/>successfully;<sp/>False<sp/>otherwise.</highlight></codeline>
<codeline lineno="892"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>rg.uniform(0,1)<sp/>&lt;<sp/>0.5:</highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/>y0,<sp/>guess,<sp/>lower,<sp/>upper,<sp/>sdev<sp/>=<sp/>store.limits()</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>guess<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/>guess<sp/>=<sp/>fitting(guess,<sp/>lower,<sp/>upper)<sp/></highlight><highlight class="comment">#<sp/>take<sp/>X<sp/>from<sp/>lower</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sol,<sp/>y,<sp/>evals<sp/>=<sp/>optimize(fun,<sp/>Bounds(lower,<sp/>upper),<sp/>guess,<sp/>sdev,<sp/>rg,<sp/>store)</highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>store.add_result(y,<sp/>sol,<sp/>evals,<sp/>y0)<sp/></highlight><highlight class="comment">#<sp/>limit<sp/>to<sp/>y0<sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="fcmaes/advretry.py"/>
  </compounddef>
</doxygen>

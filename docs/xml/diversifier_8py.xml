<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="diversifier_8py" kind="file" language="Python">
    <compoundname>diversifier.py</compoundname>
    <innernamespace refid="namespacefcmaes">fcmaes</innernamespace>
    <innernamespace refid="namespacefcmaes_1_1diversifier">fcmaes::diversifier</innernamespace>
    <sectiondef kind="func">
      <memberdef kind="function" id="namespacefcmaes_1_1diversifier_1aff21c62cc4f78f4786b277e0b20cb216" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Archive</type>
        <definition> Archive fcmaes.diversifier.minimize</definition>
        <argsstring>(Callable[[ArrayLike], Tuple[float, np.ndarray]] qd_fitness, Bounds bounds, Bounds qd_bounds, Optional[int] niche_num=10000, Optional[int] samples_per_niche=20, Optional[int] max_evals=None, Optional[int] workers=mp.cpu_count(), Optional[Archive] archive=None, Optional[Dict] opt_params={}, Optional[bool] use_stats=False)</argsstring>
        <name>minimize</name>
        <qualifiedname>fcmaes.diversifier.minimize</qualifiedname>
        <param>
          <type>Callable</type>
          <defname>qd_fitness</defname>
          <array>[[ArrayLike]</array>
        </param>
        <param>
          <type>Tuple]</type>
          <declname>qd_fitness</declname>
          <defname>bounds</defname>
          <array>[float, np.ndarray]</array>
        </param>
        <param>
          <type>Bounds</type>
          <declname>bounds</declname>
          <defname>qd_bounds</defname>
        </param>
        <param>
          <type>Bounds</type>
          <declname>qd_bounds</declname>
          <defname>niche_num</defname>
        </param>
        <param>
          <type>Optional</type>
          <declname>niche_num</declname>
          <defname>samples_per_niche</defname>
          <array>[int]</array>
          <defval>10000</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>samples_per_niche</declname>
          <defname>max_evals</defname>
          <array>[int]</array>
          <defval>20</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>max_evals</declname>
          <defname>workers</defname>
          <array>[int]</array>
          <defval>None</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>workers</declname>
          <defname>archive</defname>
          <array>[int]</array>
          <defval>mp.cpu_count()</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>archive</declname>
          <defname>opt_params</defname>
          <array>[Archive]</array>
          <defval>None</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>opt_params</declname>
          <defname>use_stats</defname>
          <array>[Dict]</array>
          <defval>{}</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>use_stats</declname>
          <array>[bool]</array>
          <defval>False</defval>
        </param>
        <briefdescription>
<para>Performs parallel optimization to minimize the fitness function with a focus on quality-diversity. </para>
        </briefdescription>
        <detaileddescription>
<para>The function initializes an archive that stores optimal inputs and their fitness values, organizes the records into defined niches, and carries out optimization using parallel processing.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>qd_fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>Callable fitness function that takes an input array and returns a tuple containing a scalar objective value and an array of descriptor </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>values.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>Bounds object defining the lower and upper bounds of the search </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>space.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>qd_bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>Bounds object defining the lower and upper bounds for the quality-diversity archive. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>niche_num</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional; The number of niches to partition the archive. <programlisting><codeline><highlight class="normal">Default<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/>10000.</highlight></codeline>
</programlisting> samples_per_niche: Optional; The number of samples to initialize in each <programlisting><codeline><highlight class="normal">niche.<sp/>Default<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/>20.</highlight></codeline>
</programlisting> max_evals: Optional; The maximum number of function evaluations. If not provided, the default is workers * 50000. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>workers</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional; The number of parallel processes to use. Default is the number of CPU cores available. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>archive</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional; An existing archive object to initialize the optimization process. If not provided, a new archive is created. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>opt_params</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional; A dictionary of parameters used by the optimization function. Default is an empty dictionary. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>use_stats</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional; A flag to determine whether to track statistical properties within the archive. Default is False.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para></para>
</simplesect>
<simplesect kind="return"><para><ref refid="classfcmaes_1_1mapelites_1_1_archive" kindref="compound">Archive</ref> An archive object containing the optimized results, including fitness values and descriptors. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/diversifier.py" line="110" column="1" bodyfile="fcmaes/diversifier.py" bodystart="120" bodyend="139"/>
        <references refid="namespacefcmaes_1_1diversifier_1ab816a6a4e44baee3d8bee364a7522274" compoundref="diversifier_8py" startline="246" endline="255">fcmaes.diversifier.minimize_parallel_</references>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1diversifier_1a02e1220deec92a5ffd1a04e5b168fe6c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>fcmaes.diversifier.apply_advretry</definition>
        <argsstring>(Callable[[ArrayLike], float] fitness, Callable[[ArrayLike], Tuple[float, np.ndarray]] qd_fitness, Bounds bounds, Archive archive, Optional[Optimizer] optimizer=None, Optional[int] num_retries=1000, Optional[int] workers=mp.cpu_count(), Optional[float] max_eval_fac=5.0, Optional[np.ndarray] xs=None, Optional[np.ndarray] ys=None, Callable[[ArrayLike], ArrayLike] x_conv=None)</argsstring>
        <name>apply_advretry</name>
        <qualifiedname>fcmaes.diversifier.apply_advretry</qualifiedname>
        <param>
          <type>Callable</type>
          <defname>fitness</defname>
          <array>[[ArrayLike]</array>
        </param>
        <param>
          <type>float]</type>
          <declname>fitness</declname>
          <defname>qd_fitness</defname>
        </param>
        <param>
          <type>Callable</type>
          <defname>bounds</defname>
          <array>[[ArrayLike]</array>
        </param>
        <param>
          <type>Tuple]</type>
          <declname>qd_fitness</declname>
          <defname>archive</defname>
          <array>[float, np.ndarray]</array>
        </param>
        <param>
          <type>Bounds</type>
          <declname>bounds</declname>
          <defname>optimizer</defname>
        </param>
        <param>
          <type>Archive</type>
          <declname>archive</declname>
          <defname>num_retries</defname>
        </param>
        <param>
          <type>Optional</type>
          <declname>optimizer</declname>
          <defname>workers</defname>
          <array>[Optimizer]</array>
          <defval>None</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>num_retries</declname>
          <defname>max_eval_fac</defname>
          <array>[int]</array>
          <defval>1000</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>workers</declname>
          <defname>xs</defname>
          <array>[int]</array>
          <defval>mp.cpu_count()</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>max_eval_fac</declname>
          <defname>ys</defname>
          <array>[float]</array>
          <defval>5.0</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>xs</declname>
          <defname>x_conv</defname>
          <array>[np.ndarray]</array>
          <defval>None</defval>
        </param>
        <param>
          <type>Optional</type>
          <declname>ys</declname>
          <array>[np.ndarray]</array>
          <defval>None</defval>
        </param>
        <param>
          <type>Callable</type>
          <array>[[ArrayLike]</array>
        </param>
        <param>
          <type>ArrayLike]</type>
          <declname>x_conv</declname>
          <defval>None</defval>
        </param>
        <briefdescription>
<para>Applies an advanced retry mechanism to optimize solutions for a given fitness function and update an archive with optimized results. </para>
        </briefdescription>
        <detaileddescription>
<para>This function manages an iterative process where previously computed solutions from an archive are refined and optimized using a specified optimizer. Advanced retry logic is utilized to ensure the process effectively minimizes the given fitness function within the defined bounds and constraints.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>Callable that evaluates the fitness of a solution. Must return a floating-point fitness score for a given input. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>qd_fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>Callable that evaluates the quality-diversity of a solution. Returns a tuple where the first item is the fitness value (float) and the second item is a feature descriptor (e.g., NumPy array). </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>Boundary constraints for the optimization process. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>archive</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="classfcmaes_1_1mapelites_1_1_archive" kindref="compound">Archive</ref> object that stores and manages solutions. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>optimizer</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional optimizer to be used for the minimization process. If none, defaults to a DE-CMA optimizer with 1500 iterations. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>num_retries</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional integer setting the number of retries allowed in advanced retry logic. Defaults to 1000. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>workers</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional integer specifying the number of workers for parallelization. Defaults to the number of CPUs available. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_eval_fac</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional floating-point factor setting the maximum allowed fitness function evaluations per retry. Defaults to 5.0. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>xs</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional NumPy array containing a set of previously obtained solutions. If none, solutions are derived from the archive&apos;s current entries. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>ys</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional NumPy array containing fitness values corresponding to <computeroutput>xs</computeroutput>. If none, fitness values are derived from the archive&apos;s entries. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>x_conv</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional callable to transform or convert solutions (<computeroutput>xs</computeroutput>) before evaluating their quality-diversity fitness. If none, no transformation is applied. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/diversifier.py" line="172" column="1" bodyfile="fcmaes/diversifier.py" bodystart="182" bodyend="218"/>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1diversifier_1ab816a6a4e44baee3d8bee364a7522274" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>fcmaes.diversifier.minimize_parallel_</definition>
        <argsstring>(archive, fitness, bounds, workers, opt_params, max_evals)</argsstring>
        <name>minimize_parallel_</name>
        <qualifiedname>fcmaes.diversifier.minimize_parallel_</qualifiedname>
        <param>
          <type>archive</type>
          <defname>archive</defname>
        </param>
        <param>
          <type>fitness</type>
          <defname>fitness</defname>
        </param>
        <param>
          <type>bounds</type>
          <defname>bounds</defname>
        </param>
        <param>
          <type>workers</type>
          <defname>workers</defname>
        </param>
        <param>
          <type>opt_params</type>
          <defname>opt_params</defname>
        </param>
        <param>
          <type>max_evals</type>
          <defname>max_evals</defname>
        </param>
        <briefdescription>
<para>Minimizes a fitness function in parallel using multiple workers. </para>
        </briefdescription>
        <detaileddescription>
<para>This function utilizes multiprocessing to divide the workload of minimizing a fitness function across several worker processes. Each worker operates independently using its own random number generator, and the results are combined to find the minimum value.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>archive</parametername>
</parameternamelist>
<parameterdescription>
<para>Object or structure used to store and manage state or intermediate results during the optimization process. Details of its structure or behavior depend on the implementation. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>Callable that evaluates the fitness or cost function to be minimized. Accepts input variables and returns a numerical value representing the cost/fitness. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>Defines the boundaries within which the optimization process is allowed to search. Typically, this can be a list of tuples specifying the lower and upper bounds for each dimension. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>workers</parametername>
</parameternamelist>
<parameterdescription>
<para>Integer specifying the number of parallel workers (processes) to execute the fitness function evaluation and optimization tasks. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>opt_params</parametername>
</parameternamelist>
<parameterdescription>
<para>Parameters or configuration values required for the optimization method. Includes details specific to the optimization algorithm being </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>employed.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_evals</parametername>
</parameternamelist>
<parameterdescription>
<para>Integer representing the maximum number of fitness function evaluations allowed across all worker processes in total. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/diversifier.py" line="246" column="1" bodyfile="fcmaes/diversifier.py" bodystart="246" bodyend="255"/>
        <referencedby refid="namespacefcmaes_1_1diversifier_1aff21c62cc4f78f4786b277e0b20cb216" compoundref="diversifier_8py" startline="120" endline="139">fcmaes.diversifier.minimize</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1diversifier_1a37838757d6fbed5b0cd7e56fa51f194e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>fcmaes.diversifier.run_minimize_</definition>
        <argsstring>(archive, fitness, bounds, rg, opt_params, p, workers, evals, max_evals)</argsstring>
        <name>run_minimize_</name>
        <qualifiedname>fcmaes.diversifier.run_minimize_</qualifiedname>
        <param>
          <type>archive</type>
          <defname>archive</defname>
        </param>
        <param>
          <type>fitness</type>
          <defname>fitness</defname>
        </param>
        <param>
          <type>bounds</type>
          <defname>bounds</defname>
        </param>
        <param>
          <type>rg</type>
          <defname>rg</defname>
        </param>
        <param>
          <type>opt_params</type>
          <defname>opt_params</defname>
        </param>
        <param>
          <type>p</type>
          <defname>p</defname>
        </param>
        <param>
          <type>workers</type>
          <defname>workers</defname>
        </param>
        <param>
          <type>evals</type>
          <defname>evals</defname>
        </param>
        <param>
          <type>max_evals</type>
          <defname>max_evals</defname>
        </param>
        <briefdescription>
<para>Executes the optimization processes involving MAP-Elites or solvers in a sequential or multiple configuration depending on the provided optimization parameters. </para>
        </briefdescription>
        <detaileddescription>
<para>The method adapts to the given <computeroutput>opt_params</computeroutput>, evaluating various solvers until the maximum number of allowed evaluations (<computeroutput>max_evals</computeroutput>) is reached.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>archive</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="classfcmaes_1_1mapelites_1_1_archive" kindref="compound">Archive</ref> object used for storing solutions and managing population niches. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>A callable fitness function used to evaluate solutions. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>Boundary constraints associated with the problem. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rg</parametername>
</parameternamelist>
<parameterdescription>
<para>Random generator for deterministic random processes. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>opt_params</parametername>
</parameternamelist>
<parameterdescription>
<para>Optimization parameters, which can be in the form of a dictionary, list, tuple, or NumPy array. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>p</parametername>
</parameternamelist>
<parameterdescription>
<para>Integer indicating the number of processing resources available. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>workers</parametername>
</parameternamelist>
<parameterdescription>
<para>Integer specifying the number of worker threads or processes allocated for solver execution. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>evals</parametername>
</parameternamelist>
<parameterdescription>
<para>A shared counter object tracking the current total number of evaluations performed. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_evals</parametername>
</parameternamelist>
<parameterdescription>
<para>Maximum allowed number of evaluations over the optimization processes. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/diversifier.py" line="276" column="1" bodyfile="fcmaes/diversifier.py" bodystart="276" bodyend="301"/>
        <references refid="namespacefcmaes_1_1diversifier_1a4e57f15d7add818aaf5dfe6223e98475" compoundref="diversifier_8py" startline="383" endline="415">fcmaes.diversifier.minimize_</references>
        <references refid="namespacefcmaes_1_1diversifier_1ae5fd5f192aa814e8e6abe660f4592d7d" compoundref="diversifier_8py" startline="331" endline="355">fcmaes.diversifier.run_map_elites_</references>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1diversifier_1ae5fd5f192aa814e8e6abe660f4592d7d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>fcmaes.diversifier.run_map_elites_</definition>
        <argsstring>(archive, fitness, bounds, rg, evals, max_evals, opt_params={})</argsstring>
        <name>run_map_elites_</name>
        <qualifiedname>fcmaes.diversifier.run_map_elites_</qualifiedname>
        <param>
          <type>archive</type>
          <defname>archive</defname>
        </param>
        <param>
          <type>fitness</type>
          <defname>fitness</defname>
        </param>
        <param>
          <type>bounds</type>
          <defname>bounds</defname>
        </param>
        <param>
          <type>rg</type>
          <defname>rg</defname>
        </param>
        <param>
          <type>evals</type>
          <defname>evals</defname>
        </param>
        <param>
          <type>max_evals</type>
          <defname>max_evals</defname>
        </param>
        <param>
          <type>opt_params</type>
          <defname>opt_params</defname>
          <defval>{}</defval>
        </param>
        <briefdescription>
<para>Executes the MAP-Elites algorithm for a given archive and fitness function. </para>
        </briefdescription>
        <detaileddescription>
<para>The function iteratively generates a population of individuals, applies variation operators on them, evaluates their fitness, and updates the archive with the newly generated individuals. It can utilize either simulated binary crossover (SBX) or isolation distribution crossover (ISO/DD) depending on the specified optimization parameters. Additionally, the function includes boundaries for the search space and adjusts the archive to maintain its capacity.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>archive</parametername>
</parameternamelist>
<parameterdescription>
<para>The data structure representing the archive of solutions. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>The fitness function to evaluate each solution. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>The search space bounds containing lower (<computeroutput>lb</computeroutput>) and upper (<computeroutput>ub</computeroutput>) limits for variables. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rg</parametername>
</parameternamelist>
<parameterdescription>
<para>Random number generator for stochastic operations. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>evals</parametername>
</parameternamelist>
<parameterdescription>
<para>Object to track the number of evaluations performed. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_evals</parametername>
</parameternamelist>
<parameterdescription>
<para>Maximum number of evaluations allowed for the algorithm. opt_params (dict, optional): A dictionary of optional parameters for optimization. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="par"><title>Includes</title><para><itemizedlist>
<listitem><para>popsize (int): Population size for the algorithm (default: 32).</para>
</listitem><listitem><para>use_sbx (bool): Whether to use simulated binary crossover (default: True).</para>
</listitem><listitem><para>dis_c (float): Distribution index for simulated binary crossover (SBX) (default: 20).</para>
</listitem><listitem><para>dis_m (float): Distribution index for mutation (default: 20).</para>
</listitem><listitem><para>iso_sigma (float): Standard deviation for isotropic distribution (default: 0.01).</para>
</listitem><listitem><para>line_sigma (float): Standard deviation for line distribution (default: 0.2). </para>
</listitem></itemizedlist>
</para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/diversifier.py" line="331" column="1" bodyfile="fcmaes/diversifier.py" bodystart="331" bodyend="355"/>
        <referencedby refid="namespacefcmaes_1_1diversifier_1a37838757d6fbed5b0cd7e56fa51f194e" compoundref="diversifier_8py" startline="276" endline="301">fcmaes.diversifier.run_minimize_</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1diversifier_1a4e57f15d7add818aaf5dfe6223e98475" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>fcmaes.diversifier.minimize_</definition>
        <argsstring>(archive, fitness, bounds, rg, evals, max_evals, opt_params, x0=None)</argsstring>
        <name>minimize_</name>
        <qualifiedname>fcmaes.diversifier.minimize_</qualifiedname>
        <param>
          <type>archive</type>
          <defname>archive</defname>
        </param>
        <param>
          <type>fitness</type>
          <defname>fitness</defname>
        </param>
        <param>
          <type>bounds</type>
          <defname>bounds</defname>
        </param>
        <param>
          <type>rg</type>
          <defname>rg</defname>
        </param>
        <param>
          <type>evals</type>
          <defname>evals</defname>
        </param>
        <param>
          <type>max_evals</type>
          <defname>max_evals</defname>
        </param>
        <param>
          <type>opt_params</type>
          <defname>opt_params</defname>
        </param>
        <param>
          <type>x0</type>
          <defname>x0</defname>
          <defval>None</defval>
        </param>
        <briefdescription>
<para>Minimizes a given objective function using an evolutionary algorithm or the B.I.T.E. </para>
        </briefdescription>
        <detaileddescription>
<para>solver.</para>
<para>The function determines the solver type based on the provided optimization parameters and runs the optimization process accordingly. It continuously updates an archive of candidate solutions and evaluates their fitness while adhering to the specified evaluation and iteration limits. A stopping condition is also applied based on lack of improvement.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>archive</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="classfcmaes_1_1mapelites_1_1_archive" kindref="compound">Archive</ref> object for storing solution candidates and their respective fitness evaluations. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>Callable representing the fitness function or objective function to be minimized. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>Bounds or constraints for the solution search space. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rg</parametername>
</parameternamelist>
<parameterdescription>
<para>Random number generator to ensure reproducibility. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>evals</parametername>
</parameternamelist>
<parameterdescription>
<para>A mutable object, typically an integer, tracking the number of evaluations performed. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_evals</parametername>
</parameternamelist>
<parameterdescription>
<para>Integer specifying the maximum number of fitness evaluations to allow. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>opt_params</parametername>
</parameternamelist>
<parameterdescription>
<para>Dictionary containing optimization parameters, such as solver type and stopping criteria. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>x0</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional initial guess or starting point for the optimization process.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The best found solution, represented as a real-valued array, that optimizes the provided fitness function. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/diversifier.py" line="383" column="1" bodyfile="fcmaes/diversifier.py" bodystart="383" bodyend="415"/>
        <references refid="namespacefcmaes_1_1diversifier_1a7360db2f799d60d42b8a3f76650f075a" compoundref="diversifier_8py" startline="501" endline="534">fcmaes.diversifier.get_solver_</references>
        <references refid="namespacefcmaes_1_1diversifier_1a91529f8a57353a18ce9ce8ea0e372f63" compoundref="diversifier_8py" startline="439" endline="477">fcmaes.diversifier.run_bite_</references>
        <referencedby refid="namespacefcmaes_1_1diversifier_1a37838757d6fbed5b0cd7e56fa51f194e" compoundref="diversifier_8py" startline="276" endline="301">fcmaes.diversifier.run_minimize_</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1diversifier_1a91529f8a57353a18ce9ce8ea0e372f63" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>fcmaes.diversifier.run_bite_</definition>
        <argsstring>(archive, fitness, bounds, rg, evals, max_evals, opt_params, x0=None)</argsstring>
        <name>run_bite_</name>
        <qualifiedname>fcmaes.diversifier.run_bite_</qualifiedname>
        <param>
          <type>archive</type>
          <defname>archive</defname>
        </param>
        <param>
          <type>fitness</type>
          <defname>fitness</defname>
        </param>
        <param>
          <type>bounds</type>
          <defname>bounds</defname>
        </param>
        <param>
          <type>rg</type>
          <defname>rg</defname>
        </param>
        <param>
          <type>evals</type>
          <defname>evals</defname>
        </param>
        <param>
          <type>max_evals</type>
          <defname>max_evals</defname>
        </param>
        <param>
          <type>opt_params</type>
          <defname>opt_params</defname>
        </param>
        <param>
          <type>x0</type>
          <defname>x0</defname>
          <defval>None</defval>
        </param>
        <briefdescription>
<para>Runs the BiteOpt algorithm to optimize a given fitness function. </para>
        </briefdescription>
        <detaileddescription>
<para>The function utilizes the BiteOpt implementation from bitecpp to minimize the provided fitness function over the given bounds and constraints. It supports dynamic updates to the solution archive and stops execution based on a defined maximum evaluation limit or optimization parameters.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>archive</parametername>
</parameternamelist>
<parameterdescription>
<para>An archive to keep track of the solution space explored during the optimization process. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>fitness</parametername>
</parameternamelist>
<parameterdescription>
<para>A callable that takes an input, evaluates it, and returns a fitness value. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>The variable bounds for the optimization problem. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rg</parametername>
</parameternamelist>
<parameterdescription>
<para>A random generator instance to ensure reproducibility in the optimization process. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>evals</parametername>
</parameternamelist>
<parameterdescription>
<para>An object containing a mutable integer used to track the number of evaluations performed. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_evals</parametername>
</parameternamelist>
<parameterdescription>
<para>An integer defining the maximum number of evaluations before the optimization halts. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>opt_params</parametername>
</parameternamelist>
<parameterdescription>
<para>A dictionary containing optimization parameters such as &apos;max_evals&apos; and &apos;stall_criterion&apos;. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>x0</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional starting point for the optimization. Defaults to None.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The optimized solution vector obtained from BiteOpt. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/diversifier.py" line="439" column="1" bodyfile="fcmaes/diversifier.py" bodystart="439" bodyend="477"/>
        <referencedby refid="namespacefcmaes_1_1diversifier_1a4e57f15d7add818aaf5dfe6223e98475" compoundref="diversifier_8py" startline="383" endline="415">fcmaes.diversifier.minimize_</referencedby>
      </memberdef>
      <memberdef kind="function" id="namespacefcmaes_1_1diversifier_1a7360db2f799d60d42b8a3f76650f075a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>fcmaes.diversifier.get_solver_</definition>
        <argsstring>(bounds, opt_params, rg, x0=None)</argsstring>
        <name>get_solver_</name>
        <qualifiedname>fcmaes.diversifier.get_solver_</qualifiedname>
        <param>
          <type>bounds</type>
          <defname>bounds</defname>
        </param>
        <param>
          <type>opt_params</type>
          <defname>opt_params</defname>
        </param>
        <param>
          <type>rg</type>
          <defname>rg</defname>
        </param>
        <param>
          <type>x0</type>
          <defname>x0</defname>
          <defval>None</defval>
        </param>
        <briefdescription>
<para>Selects and initializes the appropriate optimization solver based on the specified parameters. </para>
        </briefdescription>
        <detaileddescription>
<para>The solver is chosen from a set of predefined options, and it is configured with the given dimensions, bounds, mean, population size, and other solver-specific parameters.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>bounds</parametername>
</parameternamelist>
<parameterdescription>
<para>Object representing the bounds for the optimization problem. It provides attributes like lower bounds (<computeroutput>lb</computeroutput>) and upper bounds (<computeroutput>ub</computeroutput>). </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>opt_params</parametername>
</parameternamelist>
<parameterdescription>
<para>Dictionary containing optional solver parameters, such as:<itemizedlist>
<listitem><para>&apos;popsize&apos;: Population size</para>
</listitem><listitem><para>&apos;sigma&apos;: Step size</para>
</listitem><listitem><para>&apos;mean&apos;: Initial mean position</para>
</listitem><listitem><para>&apos;solver&apos;: Name of the solver to use, e.g., &apos;CMA&apos;, &apos;CMA_CPP&apos;, etc. </para>
</listitem></itemizedlist>
</para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rg</parametername>
</parameternamelist>
<parameterdescription>
<para>Random number generator for initializing values within the specified bounds or for stochastic components of the solver. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>x0</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional starting position for the optimization. Overrides the <computeroutput>mean</computeroutput> parameter if provided.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The initialized optimization solver object if the specified solver name is valid. Returns <computeroutput>None</computeroutput> if an invalid solver name is provided. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="fcmaes/diversifier.py" line="501" column="1" bodyfile="fcmaes/diversifier.py" bodystart="501" bodyend="534"/>
        <referencedby refid="namespacefcmaes_1_1diversifier_1a4e57f15d7add818aaf5dfe6223e98475" compoundref="diversifier_8py" startline="383" endline="415">fcmaes.diversifier.minimize_</referencedby>
      </memberdef>
    </sectiondef>
    <briefdescription>
<para>============================================================================= </para>
    </briefdescription>
    <detaileddescription>
<para>Fast version 1.6.11</para>
<para>(c) 2025 – Dietmar Wolz (c) 2025 – Latitude</para>
<para>License MIT</para>
<para><itemizedlist>
<listitem><para><ref refid="diversifier_8py" kindref="compound">diversifier.py</ref></para>
</listitem></itemizedlist>
</para>
<para><simplesect kind="par"><title>Description</title><para><itemizedlist>
<listitem><para>Numpy based implementation of an diversifying wrapper / parallel retry mechanism. </para>
</listitem></itemizedlist>
</para>
</simplesect>
<simplesect kind="par"><title></title><para>Uses the archive from CVT MAP-Elites [2] to maintain a set of diverse solutions and generalizes ideas from CMA-ME [3] to other wrapped algorithms. </para>
</simplesect>
<simplesect kind="par"><title></title><para>Both the parallel retry and the archive based modification of the fitness function enhance the diversification of the optimization result. The resulting archive may be stored and can be used to continue the optimization later. </para>
</simplesect>
<simplesect kind="par"><title></title><para>Requires a QD-fitness function returning both an fitness value and a behavior vector used to determine the corresponding archive niche using Voronoi tesselation. </para>
</simplesect>
<simplesect kind="par"><title></title><para>Returns an archive of niche-elites containing also for each niche statistics about the associated solutions.</para>
</simplesect>
<simplesect kind="author"><para>:<itemizedlist>
<listitem><para>Dietmar Wolz <programlisting><codeline><highlight class="normal">-<sp/>romain.despoullains</highlight><highlight class="preprocessor">@latitude.eu</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">-<sp/>corentin.generet</highlight><highlight class="preprocessor">@latitude.eu</highlight></codeline>
</programlisting></para>
</listitem></itemizedlist>
</para>
</simplesect>
<simplesect kind="par"><title>References</title><para><itemizedlist>
<listitem><para>[1] <ulink url="https://github.com/dietmarwo/fast-cma-es">https://github.com/dietmarwo/fast-cma-es</ulink></para>
</listitem><listitem><para>[2] <ulink url="https://arxiv.org/abs/1610.05729">https://arxiv.org/abs/1610.05729</ulink></para>
</listitem><listitem><para>[3] <ulink url="https://arxiv.org/pdf/1912.02400.pdf">https://arxiv.org/pdf/1912.02400.pdf</ulink></para>
</listitem></itemizedlist>
</para>
</simplesect>
<simplesect kind="par"><title>Documentation</title><para><itemizedlist>
<listitem></listitem></itemizedlist>
</para>
</simplesect>
<hruler/>
 </para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacefcmaes_1_1diversifier" refkind="compound"><highlight class="comment">#<sp/>-*-<sp/>coding:<sp/>utf-8<sp/>-*-</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="3"><highlight class="stringliteral">=============================================================================</highlight></codeline>
<codeline lineno="4"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="5"><highlight class="stringliteral"><sp/>Fast<sp/>CMA-ES<sp/>-<sp/>version<sp/>1.6.11</highlight></codeline>
<codeline lineno="6"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="7"><highlight class="stringliteral"><sp/>(c)<sp/>2025<sp/>–<sp/>Dietmar<sp/>Wolz</highlight></codeline>
<codeline lineno="8"><highlight class="stringliteral"><sp/>(c)<sp/>2025<sp/>–<sp/>Latitude</highlight></codeline>
<codeline lineno="9"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="10"><highlight class="stringliteral"><sp/>License:<sp/>MIT</highlight></codeline>
<codeline lineno="11"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="12"><highlight class="stringliteral"><sp/>File:</highlight></codeline>
<codeline lineno="13"><highlight class="stringliteral"><sp/><sp/>-<sp/>diversifier.py</highlight></codeline>
<codeline lineno="14"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="15"><highlight class="stringliteral"><sp/>Description:</highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral"><sp/><sp/>-<sp/>Numpy<sp/>based<sp/>implementation<sp/>of<sp/>an<sp/>diversifying<sp/>wrapper<sp/>/<sp/>parallel<sp/>retry<sp/>mechanism.</highlight></codeline>
<codeline lineno="17"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Uses<sp/>the<sp/>archive<sp/>from<sp/>CVT<sp/>MAP-Elites<sp/>[2]<sp/>to<sp/>maintain<sp/>a<sp/>set<sp/>of<sp/>diverse<sp/>solutions</highlight></codeline>
<codeline lineno="19"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>and<sp/>generalizes<sp/>ideas<sp/>from<sp/>CMA-ME<sp/>[3]</highlight></codeline>
<codeline lineno="20"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>to<sp/>other<sp/>wrapped<sp/>algorithms.</highlight></codeline>
<codeline lineno="21"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="22"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Both<sp/>the<sp/>parallel<sp/>retry<sp/>and<sp/>the<sp/>archive<sp/>based<sp/>modification<sp/>of<sp/>the<sp/>fitness</highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>function<sp/>enhance<sp/>the<sp/>diversification<sp/>of<sp/>the<sp/>optimization<sp/>result.</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>The<sp/>resulting<sp/>archive<sp/>may<sp/>be<sp/>stored<sp/>and<sp/>can<sp/>be<sp/>used<sp/>to<sp/>continue<sp/>the</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>optimization<sp/>later.</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Requires<sp/>a<sp/>QD-fitness<sp/>function<sp/>returning<sp/>both<sp/>an<sp/>fitness<sp/>value<sp/>and<sp/>a</highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>behavior<sp/>vector<sp/>used<sp/>to<sp/>determine<sp/>the<sp/>corresponding<sp/>archive<sp/>niche<sp/>using</highlight></codeline>
<codeline lineno="29"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Voronoi<sp/>tesselation.</highlight></codeline>
<codeline lineno="30"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="31"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Returns<sp/>an<sp/>archive<sp/>of<sp/>niche-elites<sp/>containing<sp/>also<sp/>for<sp/>each<sp/>niche<sp/>statistics</highlight></codeline>
<codeline lineno="32"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>about<sp/>the<sp/>associated<sp/>solutions.</highlight></codeline>
<codeline lineno="33"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="34"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="35"><highlight class="stringliteral"><sp/>Authors:</highlight></codeline>
<codeline lineno="36"><highlight class="stringliteral"><sp/><sp/>-<sp/>Dietmar<sp/>Wolz</highlight></codeline>
<codeline lineno="37"><highlight class="stringliteral"><sp/><sp/>-<sp/>romain.despoullains@latitude.eu</highlight></codeline>
<codeline lineno="38"><highlight class="stringliteral"><sp/><sp/>-<sp/>corentin.generet@latitude.eu</highlight></codeline>
<codeline lineno="39"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="40"><highlight class="stringliteral"><sp/>References:</highlight></codeline>
<codeline lineno="41"><highlight class="stringliteral"><sp/><sp/>-<sp/>[1]<sp/>https://github.com/dietmarwo/fast-cma-es</highlight></codeline>
<codeline lineno="42"><highlight class="stringliteral"><sp/><sp/>-<sp/>[2]<sp/>https://arxiv.org/abs/1610.05729</highlight></codeline>
<codeline lineno="43"><highlight class="stringliteral"><sp/><sp/>-<sp/>[3]<sp/>https://arxiv.org/pdf/1912.02400.pdf</highlight></codeline>
<codeline lineno="44"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="45"><highlight class="stringliteral"><sp/>Documentation:</highlight></codeline>
<codeline lineno="46"><highlight class="stringliteral"><sp/><sp/>-</highlight></codeline>
<codeline lineno="47"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="48"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="49"><highlight class="stringliteral">=============================================================================</highlight></codeline>
<codeline lineno="50"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>__future__<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>annotations</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>numpy<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>np</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>numpy.random<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Generator,<sp/>PCG64DXSM,<sp/>SeedSequence</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>multiprocessing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Process</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>scipy.optimize<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Bounds</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacefcmaes_1_1optimizer" kindref="compound">fcmaes.optimizer</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>dtime,<sp/>de_cma,<sp/>Optimizer</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>multiprocessing<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>mp</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ctypes<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>ct</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>time<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>perf_counter</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacefcmaes_1_1mapelites" kindref="compound">fcmaes.mapelites</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Archive,<sp/>update_archive,<sp/>rng</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>fcmaes<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>advretry</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacefcmaes_1_1evaluator" kindref="compound">fcmaes.evaluator</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>is_debug_active</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>loguru<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>logger</highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>threadpoolctl</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Optional,<sp/>Callable,<sp/>Tuple,<sp/>Dict</highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>numpy.typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ArrayLike</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1diversifier_1aff21c62cc4f78f4786b277e0b20cb216" kindref="member">minimize</ref>(qd_fitness:<sp/>Callable[[ArrayLike],<sp/>Tuple[float,<sp/>np.ndarray]],<sp/></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Bounds,</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qd_bounds:<sp/>Bounds,</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>niche_num:<sp/>Optional[int]<sp/>=<sp/>10000,</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>samples_per_niche:<sp/>Optional[int]<sp/>=<sp/>20,</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals:<sp/>Optional[int]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers:<sp/>Optional[int]<sp/>=<sp/>mp.cpu_count(),</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive:<sp/>Optional[Archive]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_params:<sp/>Optional[Dict]<sp/>=<sp/>{},</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>use_stats:<sp/>Optional[bool]<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>-&gt;<sp/>Archive:</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="84"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Performs<sp/>parallel<sp/>optimization<sp/>to<sp/>minimize<sp/>the<sp/>fitness<sp/>function<sp/>with<sp/>a<sp/>focus<sp/>on</highlight></codeline>
<codeline lineno="85"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>quality-diversity.<sp/>The<sp/>function<sp/>initializes<sp/>an<sp/>archive<sp/>that<sp/>stores<sp/>optimal</highlight></codeline>
<codeline lineno="86"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>inputs<sp/>and<sp/>their<sp/>fitness<sp/>values,<sp/>organizes<sp/>the<sp/>records<sp/>into<sp/>defined<sp/>niches,</highlight></codeline>
<codeline lineno="87"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>and<sp/>carries<sp/>out<sp/>optimization<sp/>using<sp/>parallel<sp/>processing.</highlight></codeline>
<codeline lineno="88"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="89"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="90"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qd_fitness:<sp/>Callable<sp/>fitness<sp/>function<sp/>that<sp/>takes<sp/>an<sp/>input<sp/>array<sp/>and<sp/>returns</highlight></codeline>
<codeline lineno="91"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a<sp/>tuple<sp/>containing<sp/>a<sp/>scalar<sp/>objective<sp/>value<sp/>and<sp/>an<sp/>array<sp/>of<sp/>descriptor</highlight></codeline>
<codeline lineno="92"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>values.</highlight></codeline>
<codeline lineno="93"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Bounds<sp/>object<sp/>defining<sp/>the<sp/>lower<sp/>and<sp/>upper<sp/>bounds<sp/>of<sp/>the<sp/>search</highlight></codeline>
<codeline lineno="94"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>space.</highlight></codeline>
<codeline lineno="95"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qd_bounds:<sp/>Bounds<sp/>object<sp/>defining<sp/>the<sp/>lower<sp/>and<sp/>upper<sp/>bounds<sp/>for<sp/>the</highlight></codeline>
<codeline lineno="96"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>quality-diversity<sp/>archive.</highlight></codeline>
<codeline lineno="97"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>niche_num:<sp/>Optional;<sp/>The<sp/>number<sp/>of<sp/>niches<sp/>to<sp/>partition<sp/>the<sp/>archive.</highlight></codeline>
<codeline lineno="98"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Default<sp/>is<sp/>10000.</highlight></codeline>
<codeline lineno="99"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>samples_per_niche:<sp/>Optional;<sp/>The<sp/>number<sp/>of<sp/>samples<sp/>to<sp/>initialize<sp/>in<sp/>each</highlight></codeline>
<codeline lineno="100"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>niche.<sp/>Default<sp/>is<sp/>20.</highlight></codeline>
<codeline lineno="101"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals:<sp/>Optional;<sp/>The<sp/>maximum<sp/>number<sp/>of<sp/>function<sp/>evaluations.<sp/>If<sp/>not</highlight></codeline>
<codeline lineno="102"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>provided,<sp/>the<sp/>default<sp/>is<sp/>workers<sp/>*<sp/>50000.</highlight></codeline>
<codeline lineno="103"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers:<sp/>Optional;<sp/>The<sp/>number<sp/>of<sp/>parallel<sp/>processes<sp/>to<sp/>use.<sp/>Default<sp/>is<sp/>the</highlight></codeline>
<codeline lineno="104"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>number<sp/>of<sp/>CPU<sp/>cores<sp/>available.</highlight></codeline>
<codeline lineno="105"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive:<sp/>Optional;<sp/>An<sp/>existing<sp/>archive<sp/>object<sp/>to<sp/>initialize<sp/>the<sp/>optimization</highlight></codeline>
<codeline lineno="106"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.<sp/>If<sp/>not<sp/>provided,<sp/>a<sp/>new<sp/>archive<sp/>is<sp/>created.</highlight></codeline>
<codeline lineno="107"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_params:<sp/>Optional;<sp/>A<sp/>dictionary<sp/>of<sp/>parameters<sp/>used<sp/>by<sp/>the<sp/>optimization</highlight></codeline>
<codeline lineno="108"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>function.<sp/>Default<sp/>is<sp/>an<sp/>empty<sp/>dictionary.</highlight></codeline>
<codeline lineno="109"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>use_stats:<sp/>Optional;<sp/>A<sp/>flag<sp/>to<sp/>determine<sp/>whether<sp/>to<sp/>track<sp/>statistical</highlight></codeline>
<codeline lineno="110" refid="namespacefcmaes_1_1diversifier_1aff21c62cc4f78f4786b277e0b20cb216" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>properties<sp/>within<sp/>the<sp/>archive.<sp/>Default<sp/>is<sp/>False.</highlight></codeline>
<codeline lineno="111"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="112"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="113"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Archive:<sp/>An<sp/>archive<sp/>object<sp/>containing<sp/>the<sp/>optimized<sp/>results,<sp/>including</highlight></codeline>
<codeline lineno="114"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fitness<sp/>values<sp/>and<sp/>descriptors.</highlight></codeline>
<codeline lineno="115"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>max_evals<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals<sp/>=<sp/>workers*50000</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/>dim<sp/>=<sp/>len(bounds.lb)</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>archive<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:<sp/></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive<sp/>=<sp/><ref refid="classfcmaes_1_1mapelites_1_1_archive" kindref="compound">Archive</ref>(dim,<sp/>qd_bounds,<sp/>niche_num,<sp/>use_stats)</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive.init_niches(samples_per_niche)</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>initialize<sp/>archive<sp/>with<sp/>random<sp/>values</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive.xs_view[:]<sp/>=<sp/>rng.uniform(bounds.lb,<sp/>bounds.ub,<sp/>(niche_num,<sp/>dim))<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>perf_counter()<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/>qd_fitness.archive<sp/>=<sp/>archive<sp/></highlight><highlight class="comment">#<sp/>attach<sp/>archive<sp/>for<sp/>logging<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacefcmaes_1_1diversifier_1ab816a6a4e44baee3d8bee364a7522274" kindref="member">minimize_parallel_</ref>(archive,<sp/>qd_fitness,<sp/>bounds,<sp/>workers,<sp/>opt_params,<sp/>max_evals)</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>is_debug_active():</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys<sp/>=<sp/>np.sort(archive.get_ys())[:min(100,<sp/>archive.capacity)]<sp/></highlight><highlight class="comment">#<sp/>best<sp/>fitness<sp/>values</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.debug(f</highlight><highlight class="stringliteral">&apos;best<sp/>{min(ys):.3f}<sp/>worst<sp/>{max(ys):.3f}<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f</highlight><highlight class="stringliteral">&apos;mean<sp/>{np.mean(ys):.3f}<sp/>stdev<sp/>{np.std(ys):.3f}<sp/>time<sp/>{dtime(t0)}<sp/>s&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>archive</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1diversifier_1a02e1220deec92a5ffd1a04e5b168fe6c" kindref="member">apply_advretry</ref>(fitness:<sp/>Callable[[ArrayLike],<sp/>float],<sp/></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qd_fitness:<sp/>Callable[[ArrayLike],<sp/>Tuple[float,<sp/>np.ndarray]],<sp/></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Bounds,<sp/></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive:<sp/>Archive,<sp/></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimizer:<sp/>Optional[Optimizer]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries:<sp/>Optional[int]<sp/>=<sp/>1000,<sp/></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers:<sp/>Optional[int]<sp/>=<sp/>mp.cpu_count(),</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac:<sp/>Optional[float]<sp/>=<sp/>5.0,</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs:<sp/>Optional[np.ndarray]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys:<sp/>Optional[np.ndarray]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x_conv:<sp/>Callable[[ArrayLike],<sp/>ArrayLike]<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="147"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Applies<sp/>an<sp/>advanced<sp/>retry<sp/>mechanism<sp/>to<sp/>optimize<sp/>solutions<sp/>for<sp/>a<sp/>given<sp/>fitness<sp/>function</highlight></codeline>
<codeline lineno="148"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>and<sp/>update<sp/>an<sp/>archive<sp/>with<sp/>optimized<sp/>results.</highlight></codeline>
<codeline lineno="149"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="150"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>This<sp/>function<sp/>manages<sp/>an<sp/>iterative<sp/>process<sp/>where<sp/>previously<sp/>computed<sp/>solutions<sp/>from</highlight></codeline>
<codeline lineno="151"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>an<sp/>archive<sp/>are<sp/>refined<sp/>and<sp/>optimized<sp/>using<sp/>a<sp/>specified<sp/>optimizer.<sp/>Advanced<sp/>retry<sp/>logic</highlight></codeline>
<codeline lineno="152"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>is<sp/>utilized<sp/>to<sp/>ensure<sp/>the<sp/>process<sp/>effectively<sp/>minimizes<sp/>the<sp/>given<sp/>fitness<sp/>function</highlight></codeline>
<codeline lineno="153"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>within<sp/>the<sp/>defined<sp/>bounds<sp/>and<sp/>constraints.</highlight></codeline>
<codeline lineno="154"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="155"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="156"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fitness:<sp/>Callable<sp/>that<sp/>evaluates<sp/>the<sp/>fitness<sp/>of<sp/>a<sp/>solution.<sp/>Must<sp/>return<sp/>a</highlight></codeline>
<codeline lineno="157"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>floating-point<sp/>fitness<sp/>score<sp/>for<sp/>a<sp/>given<sp/>input.</highlight></codeline>
<codeline lineno="158"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>qd_fitness:<sp/>Callable<sp/>that<sp/>evaluates<sp/>the<sp/>quality-diversity<sp/>of<sp/>a<sp/>solution.<sp/>Returns</highlight></codeline>
<codeline lineno="159"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a<sp/>tuple<sp/>where<sp/>the<sp/>first<sp/>item<sp/>is<sp/>the<sp/>fitness<sp/>value<sp/>(float)<sp/>and<sp/>the<sp/>second<sp/>item<sp/>is</highlight></codeline>
<codeline lineno="160"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a<sp/>feature<sp/>descriptor<sp/>(e.g.,<sp/>NumPy<sp/>array).</highlight></codeline>
<codeline lineno="161"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Boundary<sp/>constraints<sp/>for<sp/>the<sp/>optimization<sp/>process.</highlight></codeline>
<codeline lineno="162"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive:<sp/>Archive<sp/>object<sp/>that<sp/>stores<sp/>and<sp/>manages<sp/>solutions.</highlight></codeline>
<codeline lineno="163"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimizer:<sp/>Optional<sp/>optimizer<sp/>to<sp/>be<sp/>used<sp/>for<sp/>the<sp/>minimization<sp/>process.<sp/>If<sp/>none,</highlight></codeline>
<codeline lineno="164"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>defaults<sp/>to<sp/>a<sp/>DE-CMA<sp/>optimizer<sp/>with<sp/>1500<sp/>iterations.</highlight></codeline>
<codeline lineno="165"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_retries:<sp/>Optional<sp/>integer<sp/>setting<sp/>the<sp/>number<sp/>of<sp/>retries<sp/>allowed<sp/>in</highlight></codeline>
<codeline lineno="166"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>advanced<sp/>retry<sp/>logic.<sp/>Defaults<sp/>to<sp/>1000.</highlight></codeline>
<codeline lineno="167"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers:<sp/>Optional<sp/>integer<sp/>specifying<sp/>the<sp/>number<sp/>of<sp/>workers<sp/>for<sp/>parallelization.</highlight></codeline>
<codeline lineno="168"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Defaults<sp/>to<sp/>the<sp/>number<sp/>of<sp/>CPUs<sp/>available.</highlight></codeline>
<codeline lineno="169"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac:<sp/>Optional<sp/>floating-point<sp/>factor<sp/>setting<sp/>the<sp/>maximum<sp/>allowed</highlight></codeline>
<codeline lineno="170"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fitness<sp/>function<sp/>evaluations<sp/>per<sp/>retry.<sp/>Defaults<sp/>to<sp/>5.0.</highlight></codeline>
<codeline lineno="171"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs:<sp/>Optional<sp/>NumPy<sp/>array<sp/>containing<sp/>a<sp/>set<sp/>of<sp/>previously<sp/>obtained<sp/>solutions.</highlight></codeline>
<codeline lineno="172" refid="namespacefcmaes_1_1diversifier_1a02e1220deec92a5ffd1a04e5b168fe6c" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>none,<sp/>solutions<sp/>are<sp/>derived<sp/>from<sp/>the<sp/>archive&apos;s<sp/>current<sp/>entries.</highlight></codeline>
<codeline lineno="173"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys:<sp/>Optional<sp/>NumPy<sp/>array<sp/>containing<sp/>fitness<sp/>values<sp/>corresponding<sp/>to<sp/>`xs`.</highlight></codeline>
<codeline lineno="174"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>none,<sp/>fitness<sp/>values<sp/>are<sp/>derived<sp/>from<sp/>the<sp/>archive&apos;s<sp/>entries.</highlight></codeline>
<codeline lineno="175"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x_conv:<sp/>Optional<sp/>callable<sp/>to<sp/>transform<sp/>or<sp/>convert<sp/>solutions<sp/>(`xs`)<sp/>before</highlight></codeline>
<codeline lineno="176"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evaluating<sp/>their<sp/>quality-diversity<sp/>fitness.<sp/>If<sp/>none,<sp/>no<sp/>transformation<sp/>is<sp/>applied.</highlight></codeline>
<codeline lineno="177"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>optimizer<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optimizer<sp/>=<sp/>de_cma(1500)</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>generate<sp/>advretry<sp/>store</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/>store<sp/>=<sp/><ref refid="classfcmaes_1_1advretry_1_1_store" kindref="compound">advretry.Store</ref>(fitness,<sp/>bounds,<sp/>num_retries=num_retries,<sp/></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_eval_fac=max_eval_fac)<sp/><sp/></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>select<sp/>only<sp/>occupied<sp/>entries</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>xs<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys<sp/>=<sp/>archive.get_ys()<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>valid<sp/>=<sp/>(ys<sp/>&lt;<sp/>np.inf)</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys<sp/>=<sp/>ys[valid]</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs<sp/>=<sp/>archive.xs_view[valid]</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/>t0<sp/>=<sp/>perf_counter()<sp/></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>transfer<sp/>to<sp/>advretry<sp/>store</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(ys)):</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>store.add_result(ys[i],<sp/>xs[i],<sp/>1)</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>perform<sp/>parallel<sp/>retry</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/>advretry.retry(store,<sp/>optimizer.minimize,<sp/>workers=workers)</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>transfer<sp/>back<sp/>to<sp/>archive<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/>xs<sp/>=<sp/>store.xs_view</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>x_conv<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs<sp/>=<sp/>[x_conv(x)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>xs]</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/>yds<sp/>=<sp/>[qd_fitness(x)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>xs]</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>descs<sp/>=<sp/>np.array([yd[1]<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>yd<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>yds])</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/>ys<sp/>=<sp/>np.array([yd[0]<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>yd<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>yds])</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>niches<sp/>=<sp/>archive.index_of_niches(descs)</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(ys)):</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive.set(niches[i],<sp/>(ys[i],<sp/>descs[i]),<sp/>xs[i])</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/>archive.argsort()</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>is_debug_active():</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys<sp/>=<sp/>np.sort(archive.get_ys())[:min(100,<sp/>archive.capacity)]<sp/></highlight><highlight class="comment">#<sp/>best<sp/>fitness<sp/>values</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.debug(f</highlight><highlight class="stringliteral">&apos;best<sp/>{min(ys):.3f}<sp/>worst<sp/>{max(ys):.3f}<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f</highlight><highlight class="stringliteral">&apos;mean<sp/>{np.mean(ys):.3f}<sp/>stdev<sp/>{np.std(ys):.3f}<sp/>time<sp/>{dtime(t0)}<sp/>s&apos;</highlight><highlight class="normal">)<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1diversifier_1ab816a6a4e44baee3d8bee364a7522274" kindref="member">minimize_parallel_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>workers,<sp/>opt_params,<sp/>max_evals):</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="215"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Minimizes<sp/>a<sp/>fitness<sp/>function<sp/>in<sp/>parallel<sp/>using<sp/>multiple<sp/>workers.</highlight></codeline>
<codeline lineno="216"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="217"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>This<sp/>function<sp/>utilizes<sp/>multiprocessing<sp/>to<sp/>divide<sp/>the<sp/>workload<sp/>of<sp/>minimizing</highlight></codeline>
<codeline lineno="218"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>a<sp/>fitness<sp/>function<sp/>across<sp/>several<sp/>worker<sp/>processes.<sp/>Each<sp/>worker<sp/>operates</highlight></codeline>
<codeline lineno="219"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>independently<sp/>using<sp/>its<sp/>own<sp/>random<sp/>number<sp/>generator,<sp/>and<sp/>the<sp/>results<sp/>are</highlight></codeline>
<codeline lineno="220"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>combined<sp/>to<sp/>find<sp/>the<sp/>minimum<sp/>value.</highlight></codeline>
<codeline lineno="221"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="222"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="223"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive:<sp/>Object<sp/>or<sp/>structure<sp/>used<sp/>to<sp/>store<sp/>and<sp/>manage<sp/>state<sp/>or<sp/>intermediate</highlight></codeline>
<codeline lineno="224"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>results<sp/>during<sp/>the<sp/>optimization<sp/>process.<sp/>Details<sp/>of<sp/>its<sp/>structure<sp/>or</highlight></codeline>
<codeline lineno="225"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>behavior<sp/>depend<sp/>on<sp/>the<sp/>implementation.</highlight></codeline>
<codeline lineno="226"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fitness:<sp/>Callable<sp/>that<sp/>evaluates<sp/>the<sp/>fitness<sp/>or<sp/>cost<sp/>function<sp/>to<sp/>be</highlight></codeline>
<codeline lineno="227"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>minimized.<sp/>Accepts<sp/>input<sp/>variables<sp/>and<sp/>returns<sp/>a<sp/>numerical<sp/>value</highlight></codeline>
<codeline lineno="228"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>representing<sp/>the<sp/>cost/fitness.</highlight></codeline>
<codeline lineno="229"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Defines<sp/>the<sp/>boundaries<sp/>within<sp/>which<sp/>the<sp/>optimization<sp/>process<sp/>is</highlight></codeline>
<codeline lineno="230"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>allowed<sp/>to<sp/>search.<sp/>Typically,<sp/>this<sp/>can<sp/>be<sp/>a<sp/>list<sp/>of<sp/>tuples<sp/>specifying</highlight></codeline>
<codeline lineno="231"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>lower<sp/>and<sp/>upper<sp/>bounds<sp/>for<sp/>each<sp/>dimension.</highlight></codeline>
<codeline lineno="232"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers:<sp/>Integer<sp/>specifying<sp/>the<sp/>number<sp/>of<sp/>parallel<sp/>workers<sp/>(processes)<sp/>to</highlight></codeline>
<codeline lineno="233"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>execute<sp/>the<sp/>fitness<sp/>function<sp/>evaluation<sp/>and<sp/>optimization<sp/>tasks.</highlight></codeline>
<codeline lineno="234"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_params:<sp/>Parameters<sp/>or<sp/>configuration<sp/>values<sp/>required<sp/>for<sp/>the<sp/>optimization</highlight></codeline>
<codeline lineno="235"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>method.<sp/>Includes<sp/>details<sp/>specific<sp/>to<sp/>the<sp/>optimization<sp/>algorithm<sp/>being</highlight></codeline>
<codeline lineno="236"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>employed.</highlight></codeline>
<codeline lineno="237"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals:<sp/>Integer<sp/>representing<sp/>the<sp/>maximum<sp/>number<sp/>of<sp/>fitness<sp/>function</highlight></codeline>
<codeline lineno="238"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evaluations<sp/>allowed<sp/>across<sp/>all<sp/>worker<sp/>processes<sp/>in<sp/>total.</highlight></codeline>
<codeline lineno="239"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="240"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/>sg<sp/>=<sp/>SeedSequence()</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>rgs<sp/>=<sp/>[Generator(PCG64DXSM(s))<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>s<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>sg.spawn(workers)]</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/>evals<sp/>=<sp/>mp.RawValue(ct.c_long,<sp/>0)</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/>proc=[Process(target=run_minimize_,</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>args=(archive,<sp/>fitness,<sp/>bounds,<sp/>rgs[p],</highlight></codeline>
<codeline lineno="246" refid="namespacefcmaes_1_1diversifier_1ab816a6a4e44baee3d8bee364a7522274" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_params,<sp/>p,<sp/>workers,<sp/>evals,<sp/>max_evals))<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>p<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(workers)]</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>[p.start()<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>p<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>proc]</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>[p.join()<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>p<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>proc]</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1diversifier_1a37838757d6fbed5b0cd7e56fa51f194e" kindref="member">run_minimize_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>rg,<sp/>opt_params,<sp/>p,<sp/>workers,<sp/>evals,<sp/>max_evals):</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="252"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Executes<sp/>the<sp/>optimization<sp/>processes<sp/>involving<sp/>MAP-Elites<sp/>or<sp/>solvers<sp/>in<sp/>a<sp/>sequential<sp/>or</highlight></codeline>
<codeline lineno="253"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>multiple<sp/>configuration<sp/>depending<sp/>on<sp/>the<sp/>provided<sp/>optimization<sp/>parameters.<sp/>The<sp/>method<sp/>adapts</highlight></codeline>
<codeline lineno="254"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>to<sp/>the<sp/>given<sp/>`opt_params`,<sp/>evaluating<sp/>various<sp/>solvers<sp/>until<sp/>the<sp/>maximum<sp/>number<sp/>of<sp/>allowed</highlight></codeline>
<codeline lineno="255"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>evaluations<sp/>(`max_evals`)<sp/>is<sp/>reached.</highlight></codeline>
<codeline lineno="256"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="257"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="258"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive:<sp/>Archive<sp/>object<sp/>used<sp/>for<sp/>storing<sp/>solutions<sp/>and<sp/>managing<sp/>population<sp/>niches.</highlight></codeline>
<codeline lineno="259"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fitness:<sp/>A<sp/>callable<sp/>fitness<sp/>function<sp/>used<sp/>to<sp/>evaluate<sp/>solutions.</highlight></codeline>
<codeline lineno="260"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Boundary<sp/>constraints<sp/>associated<sp/>with<sp/>the<sp/>problem.</highlight></codeline>
<codeline lineno="261"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rg:<sp/>Random<sp/>generator<sp/>for<sp/>deterministic<sp/>random<sp/>processes.</highlight></codeline>
<codeline lineno="262"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_params:<sp/>Optimization<sp/>parameters,<sp/>which<sp/>can<sp/>be<sp/>in<sp/>the<sp/>form<sp/>of<sp/>a<sp/>dictionary,<sp/>list,</highlight></codeline>
<codeline lineno="263"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tuple,<sp/>or<sp/>NumPy<sp/>array.</highlight></codeline>
<codeline lineno="264"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p:<sp/>Integer<sp/>indicating<sp/>the<sp/>number<sp/>of<sp/>processing<sp/>resources<sp/>available.</highlight></codeline>
<codeline lineno="265"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>workers:<sp/>Integer<sp/>specifying<sp/>the<sp/>number<sp/>of<sp/>worker<sp/>threads<sp/>or<sp/>processes<sp/>allocated<sp/>for</highlight></codeline>
<codeline lineno="266"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>solver<sp/>execution.</highlight></codeline>
<codeline lineno="267"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evals:<sp/>A<sp/>shared<sp/>counter<sp/>object<sp/>tracking<sp/>the<sp/>current<sp/>total<sp/>number<sp/>of<sp/>evaluations<sp/>performed.</highlight></codeline>
<codeline lineno="268"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals:<sp/>Maximum<sp/>allowed<sp/>number<sp/>of<sp/>evaluations<sp/>over<sp/>the<sp/>optimization<sp/>processes.</highlight></codeline>
<codeline lineno="269"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="270"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>threadpoolctl.threadpool_limits(limits=1,<sp/>user_api=</highlight><highlight class="stringliteral">&quot;blas&quot;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(opt_params,<sp/>(list,<sp/>tuple,<sp/>np.ndarray)):</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>default_workers<sp/>=<sp/>int(workers/2)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(opt_params)<sp/>&gt;<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>workers</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>params<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>opt_params:<sp/></highlight><highlight class="comment">#<sp/>call<sp/>MAP-Elites</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;elites&apos;</highlight><highlight class="normal"><sp/>==<sp/>params.get(</highlight><highlight class="stringliteral">&apos;solver&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="276" refid="namespacefcmaes_1_1diversifier_1a37838757d6fbed5b0cd7e56fa51f194e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>elites_workers<sp/>=<sp/>params.get(</highlight><highlight class="stringliteral">&apos;workers&apos;</highlight><highlight class="normal">,<sp/>default_workers)<sp/></highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>p<sp/>&lt;<sp/>elites_workers:</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacefcmaes_1_1diversifier_1ae5fd5f192aa814e8e6abe660f4592d7d" kindref="member">run_map_elites_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>rg,<sp/>evals,<sp/>max_evals,<sp/>params)</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>evals.value<sp/>&lt;<sp/>max_evals:<sp/></highlight><highlight class="comment">#<sp/>call<sp/>solvers<sp/>in<sp/>loop<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best_x<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(opt_params,<sp/>(list,<sp/>tuple,<sp/>np.ndarray)):</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>params<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>opt_params:<sp/></highlight><highlight class="comment">#<sp/>call<sp/>in<sp/>sequence</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;elites&apos;</highlight><highlight class="normal"><sp/>==<sp/>params.get(</highlight><highlight class="stringliteral">&apos;solver&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">#<sp/>ignore<sp/>in<sp/>loop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>best_x<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>selecting<sp/>a<sp/>niche<sp/>elite<sp/>is<sp/>no<sp/>improvement<sp/>over<sp/>random<sp/>x0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x0<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="comment">#,<sp/>_,<sp/>_<sp/>=<sp/>archive.random_xs_one(select_n,<sp/>rg)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best_x<sp/>=<sp/><ref refid="namespacefcmaes_1_1diversifier_1a4e57f15d7add818aaf5dfe6223e98475" kindref="member">minimize_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>rg,<sp/>evals,<sp/>max_evals,<sp/>params,<sp/></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x0<sp/>=<sp/>x0)</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best_x<sp/>=<sp/><ref refid="namespacefcmaes_1_1diversifier_1a4e57f15d7add818aaf5dfe6223e98475" kindref="member">minimize_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>rg,<sp/>evals,<sp/>max_evals,<sp/>params,<sp/>x0<sp/>=<sp/>best_x)</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacefcmaes_1_1diversifier_1a4e57f15d7add818aaf5dfe6223e98475" kindref="member">minimize_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>rg,<sp/>evals,<sp/>max_evals,<sp/>opt_params)<sp/></highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacefcmaes_1_1mapelites" kindref="compound">fcmaes.mapelites</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>variation_,<sp/><sp/>iso_dd_</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1diversifier_1ae5fd5f192aa814e8e6abe660f4592d7d" kindref="member">run_map_elites_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>rg,<sp/>evals,<sp/>max_evals,<sp/>opt_params<sp/>=<sp/>{}):</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="300"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Executes<sp/>the<sp/>MAP-Elites<sp/>algorithm<sp/>for<sp/>a<sp/>given<sp/>archive<sp/>and<sp/>fitness<sp/>function.</highlight></codeline>
<codeline lineno="301"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="302"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>The<sp/>function<sp/>iteratively<sp/>generates<sp/>a<sp/>population<sp/>of<sp/>individuals,<sp/>applies<sp/>variation</highlight></codeline>
<codeline lineno="303"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>operators<sp/>on<sp/>them,<sp/>evaluates<sp/>their<sp/>fitness,<sp/>and<sp/>updates<sp/>the<sp/>archive<sp/>with<sp/>the<sp/>newly</highlight></codeline>
<codeline lineno="304"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>generated<sp/>individuals.<sp/>It<sp/>can<sp/>utilize<sp/>either<sp/>simulated<sp/>binary<sp/>crossover<sp/>(SBX)<sp/>or<sp/>isolation</highlight></codeline>
<codeline lineno="305"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>distribution<sp/>crossover<sp/>(ISO/DD)<sp/>depending<sp/>on<sp/>the<sp/>specified<sp/>optimization<sp/>parameters.</highlight></codeline>
<codeline lineno="306"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Additionally,<sp/>the<sp/>function<sp/>includes<sp/>boundaries<sp/>for<sp/>the<sp/>search<sp/>space<sp/>and<sp/>adjusts<sp/>the</highlight></codeline>
<codeline lineno="307"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>archive<sp/>to<sp/>maintain<sp/>its<sp/>capacity.</highlight></codeline>
<codeline lineno="308"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="309"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="310"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive<sp/>(object):<sp/>The<sp/>data<sp/>structure<sp/>representing<sp/>the<sp/>archive<sp/>of<sp/>solutions.</highlight></codeline>
<codeline lineno="311"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fitness<sp/>(callable):<sp/>The<sp/>fitness<sp/>function<sp/>to<sp/>evaluate<sp/>each<sp/>solution.</highlight></codeline>
<codeline lineno="312"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds<sp/>(object):<sp/>The<sp/>search<sp/>space<sp/>bounds<sp/>containing<sp/>lower<sp/>(`lb`)<sp/>and<sp/>upper<sp/>(`ub`)</highlight></codeline>
<codeline lineno="313"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>limits<sp/>for<sp/>variables.</highlight></codeline>
<codeline lineno="314"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rg<sp/>(numpy.random.Generator):<sp/>Random<sp/>number<sp/>generator<sp/>for<sp/>stochastic<sp/>operations.</highlight></codeline>
<codeline lineno="315"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evals<sp/>(object):<sp/>Object<sp/>to<sp/>track<sp/>the<sp/>number<sp/>of<sp/>evaluations<sp/>performed.</highlight></codeline>
<codeline lineno="316"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals<sp/>(int):<sp/>Maximum<sp/>number<sp/>of<sp/>evaluations<sp/>allowed<sp/>for<sp/>the<sp/>algorithm.</highlight></codeline>
<codeline lineno="317"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_params<sp/>(dict,<sp/>optional):<sp/>A<sp/>dictionary<sp/>of<sp/>optional<sp/>parameters<sp/>for<sp/>optimization.</highlight></codeline>
<codeline lineno="318"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Includes:</highlight></codeline>
<codeline lineno="319"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>popsize<sp/>(int):<sp/>Population<sp/>size<sp/>for<sp/>the<sp/>algorithm<sp/>(default:<sp/>32).</highlight></codeline>
<codeline lineno="320"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>use_sbx<sp/>(bool):<sp/>Whether<sp/>to<sp/>use<sp/>simulated<sp/>binary<sp/>crossover<sp/>(default:<sp/>True).</highlight></codeline>
<codeline lineno="321"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>dis_c<sp/>(float):<sp/>Distribution<sp/>index<sp/>for<sp/>simulated<sp/>binary<sp/>crossover<sp/>(SBX)<sp/>(default:<sp/>20).</highlight></codeline>
<codeline lineno="322"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>dis_m<sp/>(float):<sp/>Distribution<sp/>index<sp/>for<sp/>mutation<sp/>(default:<sp/>20).</highlight></codeline>
<codeline lineno="323"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>iso_sigma<sp/>(float):<sp/>Standard<sp/>deviation<sp/>for<sp/>isotropic<sp/>distribution<sp/>(default:<sp/>0.01).</highlight></codeline>
<codeline lineno="324"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>line_sigma<sp/>(float):<sp/>Standard<sp/>deviation<sp/>for<sp/>line<sp/>distribution<sp/>(default:<sp/>0.2).</highlight></codeline>
<codeline lineno="325"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/>popsize<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;popsize&apos;</highlight><highlight class="normal">,<sp/>32)<sp/><sp/></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/>use_sbx<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;use_sbx&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/>dis_c<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;dis_c&apos;</highlight><highlight class="normal">,<sp/>20)<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/>dis_m<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;dis_m&apos;</highlight><highlight class="normal">,<sp/>20)<sp/><sp/></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/>iso_sigma<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;iso_sigma&apos;</highlight><highlight class="normal">,<sp/>0.01)</highlight></codeline>
<codeline lineno="331" refid="namespacefcmaes_1_1diversifier_1ae5fd5f192aa814e8e6abe660f4592d7d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>line_sigma<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;line_sigma&apos;</highlight><highlight class="normal">,<sp/>0.2)</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/>select_n<sp/>=<sp/>archive.capacity</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>evals.value<sp/>&lt;<sp/>max_evals:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>use_sbx:</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pop<sp/>=<sp/>archive.random_xs(select_n,<sp/>popsize,<sp/>rg)</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs<sp/>=<sp/>variation_(pop,<sp/>bounds.lb,<sp/>bounds.ub,<sp/>rg,<sp/>dis_c,<sp/>dis_m)</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x1<sp/>=<sp/>archive.random_xs(select_n,<sp/>popsize,<sp/>rg)</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x2<sp/>=<sp/>archive.random_xs(select_n,<sp/>popsize,<sp/>rg)</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs<sp/>=<sp/>iso_dd_(x1,<sp/>x2,<sp/>bounds.lb,<sp/>bounds.ub,<sp/>rg,<sp/>iso_sigma,<sp/>line_sigma)<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>yds<sp/>=<sp/>[fitness(x)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>xs]</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evals.value<sp/>+=<sp/>popsize</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>descs<sp/>=<sp/>np.array([yd[1]<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>yd<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>yds])</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>niches<sp/>=<sp/>archive.index_of_niches(descs)</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(yds)):</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive.set(niches[i],<sp/>yds[i],<sp/>xs[i])</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive.argsort()<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>select_n<sp/>=<sp/>archive.get_occupied()<sp/><sp/></highlight></codeline>
<codeline lineno="349"><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1diversifier_1a4e57f15d7add818aaf5dfe6223e98475" kindref="member">minimize_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>rg,<sp/>evals,<sp/>max_evals,<sp/>opt_params,<sp/>x0<sp/>=<sp/>None):</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="352"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Minimizes<sp/>a<sp/>given<sp/>objective<sp/>function<sp/>using<sp/>an<sp/>evolutionary<sp/>algorithm<sp/>or<sp/>the<sp/>B.I.T.E.<sp/>solver.</highlight></codeline>
<codeline lineno="353"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="354"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>The<sp/>function<sp/>determines<sp/>the<sp/>solver<sp/>type<sp/>based<sp/>on<sp/>the<sp/>provided<sp/>optimization<sp/>parameters</highlight></codeline>
<codeline lineno="355"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>and<sp/>runs<sp/>the<sp/>optimization<sp/>process<sp/>accordingly.<sp/>It<sp/>continuously<sp/>updates<sp/>an<sp/>archive</highlight></codeline>
<codeline lineno="356"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>of<sp/>candidate<sp/>solutions<sp/>and<sp/>evaluates<sp/>their<sp/>fitness<sp/>while<sp/>adhering<sp/>to<sp/>the<sp/>specified</highlight></codeline>
<codeline lineno="357"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>evaluation<sp/>and<sp/>iteration<sp/>limits.<sp/>A<sp/>stopping<sp/>condition<sp/>is<sp/>also<sp/>applied<sp/>based<sp/>on<sp/>lack</highlight></codeline>
<codeline lineno="358"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>of<sp/>improvement.</highlight></codeline>
<codeline lineno="359"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="360"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="361"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive:<sp/>Archive<sp/>object<sp/>for<sp/>storing<sp/>solution<sp/>candidates<sp/>and<sp/>their<sp/>respective</highlight></codeline>
<codeline lineno="362"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fitness<sp/>evaluations.</highlight></codeline>
<codeline lineno="363"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fitness:<sp/>Callable<sp/>representing<sp/>the<sp/>fitness<sp/>function<sp/>or<sp/>objective</highlight></codeline>
<codeline lineno="364"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>function<sp/>to<sp/>be<sp/>minimized.</highlight></codeline>
<codeline lineno="365"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Bounds<sp/>or<sp/>constraints<sp/>for<sp/>the<sp/>solution<sp/>search<sp/>space.</highlight></codeline>
<codeline lineno="366"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rg:<sp/>Random<sp/>number<sp/>generator<sp/>to<sp/>ensure<sp/>reproducibility.</highlight></codeline>
<codeline lineno="367"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evals:<sp/>A<sp/>mutable<sp/>object,<sp/>typically<sp/>an<sp/>integer,<sp/>tracking<sp/>the<sp/>number<sp/>of</highlight></codeline>
<codeline lineno="368"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evaluations<sp/>performed.</highlight></codeline>
<codeline lineno="369"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals:<sp/>Integer<sp/>specifying<sp/>the<sp/>maximum<sp/>number<sp/>of<sp/>fitness<sp/>evaluations<sp/>to<sp/>allow.</highlight></codeline>
<codeline lineno="370"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_params:<sp/>Dictionary<sp/>containing<sp/>optimization<sp/>parameters,<sp/>such<sp/>as<sp/>solver<sp/>type</highlight></codeline>
<codeline lineno="371"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>stopping<sp/>criteria.</highlight></codeline>
<codeline lineno="372"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x0:<sp/>Optional<sp/>initial<sp/>guess<sp/>or<sp/>starting<sp/>point<sp/>for<sp/>the<sp/>optimization<sp/>process.</highlight></codeline>
<codeline lineno="373"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="374"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="375"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>best<sp/>found<sp/>solution,<sp/>represented<sp/>as<sp/>a<sp/>real-valued<sp/>array,</highlight></codeline>
<codeline lineno="376"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>that<sp/>optimizes<sp/>the<sp/>provided<sp/>fitness<sp/>function.</highlight></codeline>
<codeline lineno="377"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;BITE_CPP&apos;</highlight><highlight class="normal"><sp/>==<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;solver&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacefcmaes_1_1diversifier_1a91529f8a57353a18ce9ce8ea0e372f63" kindref="member">run_bite_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>rg,<sp/>evals,<sp/>max_evals,<sp/>opt_params,<sp/>x0<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>es<sp/>=<sp/><ref refid="namespacefcmaes_1_1diversifier_1a7360db2f799d60d42b8a3f76650f075a" kindref="member">get_solver_</ref>(bounds,<sp/>opt_params,<sp/>rg,<sp/>x0)<sp/></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stall_criterion<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;stall_criterion&apos;</highlight><highlight class="normal">,<sp/>20)</highlight></codeline>
<codeline lineno="383" refid="namespacefcmaes_1_1diversifier_1a4e57f15d7add818aaf5dfe6223e98475" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals_iter<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;max_evals&apos;</highlight><highlight class="normal">,<sp/>50000)</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_iters<sp/>=<sp/>int(max_evals_iter/es.popsize)</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>old_ys<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>last_improve<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best_x<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best_y<sp/>=<sp/>np.inf</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>iter<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(max_iters):</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xs<sp/>=<sp/>es.ask()</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys,<sp/>real_ys<sp/>=<sp/>update_archive(archive,<sp/>xs,<sp/>fitness)</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evals.value<sp/>+=<sp/>es.popsize</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>update<sp/>best<sp/>real<sp/>fitness</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>yi<sp/>=<sp/>np.argmin(real_ys)</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ybest<sp/>=<sp/>real_ys[yi]<sp/></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>ybest<sp/>&lt;<sp/>best_y:</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best_y<sp/>=<sp/>ybest</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best_x<sp/>=<sp/>xs[yi]</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>old_ys<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(np.sort(ys)<sp/>&lt;<sp/>old_ys).any():</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>last_improve<sp/>=<sp/>iter<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>last_improve<sp/>+<sp/>stall_criterion<sp/>&lt;<sp/>iter:</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stop<sp/>=<sp/>es.tell(ys)</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>stop<sp/>!=<sp/>0<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>evals.value<sp/>&gt;=<sp/>max_evals:</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>old_ys<sp/>=<sp/>np.sort(ys)</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>best_x<sp/></highlight><highlight class="comment">#<sp/>real<sp/>best<sp/>solution</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>fcmaes<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>cmaes,<sp/>cmaescpp,<sp/>crfmnescpp,<sp/>pgpecpp,<sp/>decpp,<sp/>crfmnes,<sp/>de,<sp/>bitecpp</highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1diversifier_1a91529f8a57353a18ce9ce8ea0e372f63" kindref="member">run_bite_</ref>(archive,<sp/>fitness,<sp/>bounds,<sp/>rg,<sp/>evals,<sp/>max_evals,<sp/>opt_params,<sp/>x0<sp/>=<sp/>None):</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="414"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Runs<sp/>the<sp/>BiteOpt<sp/>algorithm<sp/>to<sp/>optimize<sp/>a<sp/>given<sp/>fitness<sp/>function.</highlight></codeline>
<codeline lineno="415"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="416"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>The<sp/>function<sp/>utilizes<sp/>the<sp/>BiteOpt<sp/>implementation<sp/>from<sp/>bitecpp</highlight></codeline>
<codeline lineno="417"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>to<sp/>minimize<sp/>the<sp/>provided<sp/>fitness<sp/>function<sp/>over<sp/>the<sp/>given<sp/>bounds<sp/>and<sp/>constraints.</highlight></codeline>
<codeline lineno="418"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>It<sp/>supports<sp/>dynamic<sp/>updates<sp/>to<sp/>the<sp/>solution<sp/>archive<sp/>and<sp/>stops<sp/>execution</highlight></codeline>
<codeline lineno="419"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>based<sp/>on<sp/>a<sp/>defined<sp/>maximum<sp/>evaluation<sp/>limit<sp/>or<sp/>optimization<sp/>parameters.</highlight></codeline>
<codeline lineno="420"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="421"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="422"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive:<sp/>An<sp/>archive<sp/>to<sp/>keep<sp/>track<sp/>of<sp/>the<sp/>solution<sp/>space<sp/>explored<sp/>during<sp/>the<sp/>optimization<sp/>process.</highlight></codeline>
<codeline lineno="423"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fitness:<sp/>A<sp/>callable<sp/>that<sp/>takes<sp/>an<sp/>input,<sp/>evaluates<sp/>it,<sp/>and<sp/>returns<sp/>a<sp/>fitness<sp/>value.</highlight></codeline>
<codeline lineno="424"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>The<sp/>variable<sp/>bounds<sp/>for<sp/>the<sp/>optimization<sp/>problem.</highlight></codeline>
<codeline lineno="425"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rg:<sp/>A<sp/>random<sp/>generator<sp/>instance<sp/>to<sp/>ensure<sp/>reproducibility<sp/>in<sp/>the<sp/>optimization<sp/>process.</highlight></codeline>
<codeline lineno="426"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evals:<sp/>An<sp/>object<sp/>containing<sp/>a<sp/>mutable<sp/>integer<sp/>used<sp/>to<sp/>track<sp/>the<sp/>number<sp/>of<sp/>evaluations<sp/>performed.</highlight></codeline>
<codeline lineno="427"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evals:<sp/>An<sp/>integer<sp/>defining<sp/>the<sp/>maximum<sp/>number<sp/>of<sp/>evaluations<sp/>before<sp/>the<sp/>optimization<sp/>halts.</highlight></codeline>
<codeline lineno="428"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_params:<sp/>A<sp/>dictionary<sp/>containing<sp/>optimization<sp/>parameters<sp/>such<sp/>as<sp/>&apos;max_evals&apos;<sp/>and<sp/>&apos;stall_criterion&apos;.</highlight></codeline>
<codeline lineno="429"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x0:<sp/>Optional<sp/>starting<sp/>point<sp/>for<sp/>the<sp/>optimization.<sp/>Defaults<sp/>to<sp/>None.</highlight></codeline>
<codeline lineno="430"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="431"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="432"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>optimized<sp/>solution<sp/>vector<sp/>obtained<sp/>from<sp/>BiteOpt.</highlight></codeline>
<codeline lineno="433"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>BiteOpt<sp/>doesn&apos;t<sp/>support<sp/>ask/tell,<sp/>so<sp/>we<sp/>have<sp/>to<sp/>&quot;patch&quot;<sp/>fitness.<sp/>Note<sp/>that<sp/>Voronoi<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>tesselation<sp/>is<sp/>more<sp/>expensive<sp/>if<sp/>called<sp/>for<sp/>single<sp/>behavior<sp/>vectors<sp/>and<sp/>not<sp/>for<sp/>batches.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">fit(x:<sp/>Callable[[ArrayLike],<sp/>float]):</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="439" refid="namespacefcmaes_1_1diversifier_1a91529f8a57353a18ce9ce8ea0e372f63" refkind="member"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Evaluates<sp/>a<sp/>given<sp/>function<sp/>with<sp/>constraints<sp/>on<sp/>a<sp/>maximum<sp/>number<sp/>of<sp/>evaluations.</highlight></codeline>
<codeline lineno="440"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="441"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>function<sp/>checks<sp/>if<sp/>the<sp/>given<sp/>number<sp/>of<sp/>evaluations<sp/>exceeds<sp/>the<sp/>permitted</highlight></codeline>
<codeline lineno="442"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maximum<sp/>before<sp/>proceeding.<sp/>If<sp/>the<sp/>threshold<sp/>is<sp/>not<sp/>surpassed,<sp/>it<sp/>updates<sp/>the</highlight></codeline>
<codeline lineno="443"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive<sp/>with<sp/>the<sp/>computed<sp/>fitness<sp/>values<sp/>and<sp/>returns<sp/>the<sp/>fitness<sp/>of<sp/>the<sp/>evaluated</highlight></codeline>
<codeline lineno="444"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input.</highlight></codeline>
<codeline lineno="445"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="446"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="447"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x:<sp/>A<sp/>callable<sp/>function<sp/>that<sp/>takes<sp/>an<sp/>ArrayLike<sp/>input<sp/>and<sp/>returns<sp/>a<sp/>float</highlight></codeline>
<codeline lineno="448"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>representing<sp/>the<sp/>fitness<sp/>value.</highlight></codeline>
<codeline lineno="449"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="450"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="451"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float:<sp/>The<sp/>computed<sp/>fitness<sp/>value<sp/>of<sp/>the<sp/>input<sp/>`x`.<sp/>If<sp/>the<sp/>maximum<sp/>allowed</highlight></codeline>
<codeline lineno="452"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evaluations<sp/>are<sp/>reached,<sp/>returns<sp/>infinity.</highlight></codeline>
<codeline lineno="453"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="454"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Raises:</highlight></codeline>
<codeline lineno="455"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ValueError:<sp/>If<sp/>the<sp/>input<sp/>function<sp/>(or<sp/>its<sp/>return<sp/>value)<sp/>does<sp/>not<sp/>align<sp/>with</highlight></codeline>
<codeline lineno="456"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>expected<sp/>structure<sp/>or<sp/>type<sp/>definitions<sp/>during<sp/>processing.</highlight></codeline>
<codeline lineno="457"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>evals.value<sp/>&gt;=<sp/>max_evals:</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>np.inf</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>evals.value<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ys,<sp/>_<sp/>=<sp/>update_archive(archive,<sp/>[x],<sp/>fitness)</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ys[0]</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/>max_evals_iter<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;max_evals&apos;</highlight><highlight class="normal">,<sp/>50000)<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/>stall_criterion<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;stall_criterion&apos;</highlight><highlight class="normal">,<sp/>20)<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#popsize<sp/>=<sp/>opt_params.get(&apos;popsize&apos;,<sp/>0)<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>bitecpp.minimize(fit,<sp/>bounds,<sp/>x0<sp/>=<sp/>x0,<sp/>M<sp/>=<sp/>1,<sp/></highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stall_criterion<sp/>=<sp/>stall_criterion,</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_evaluations<sp/>=<sp/>max_evals_iter,<sp/>rg<sp/>=<sp/>rg)</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret.x<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="471"><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacefcmaes_1_1diversifier_1a7360db2f799d60d42b8a3f76650f075a" kindref="member">get_solver_</ref>(bounds,<sp/>opt_params,<sp/>rg,<sp/>x0<sp/>=<sp/>None):</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="474"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Selects<sp/>and<sp/>initializes<sp/>the<sp/>appropriate<sp/>optimization<sp/>solver<sp/>based<sp/>on<sp/>the<sp/>specified</highlight></codeline>
<codeline lineno="475"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>parameters.<sp/>The<sp/>solver<sp/>is<sp/>chosen<sp/>from<sp/>a<sp/>set<sp/>of<sp/>predefined<sp/>options,<sp/>and<sp/>it<sp/>is<sp/>configured</highlight></codeline>
<codeline lineno="476"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>with<sp/>the<sp/>given<sp/>dimensions,<sp/>bounds,<sp/>mean,<sp/>population<sp/>size,<sp/>and<sp/>other<sp/>solver-specific</highlight></codeline>
<codeline lineno="477"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>parameters.</highlight></codeline>
<codeline lineno="478"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="479"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Args:</highlight></codeline>
<codeline lineno="480"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bounds:<sp/>Object<sp/>representing<sp/>the<sp/>bounds<sp/>for<sp/>the<sp/>optimization<sp/>problem.<sp/>It<sp/>provides</highlight></codeline>
<codeline lineno="481"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attributes<sp/>like<sp/>lower<sp/>bounds<sp/>(`lb`)<sp/>and<sp/>upper<sp/>bounds<sp/>(`ub`).</highlight></codeline>
<codeline lineno="482"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_params:<sp/>Dictionary<sp/>containing<sp/>optional<sp/>solver<sp/>parameters,<sp/>such<sp/>as:</highlight></codeline>
<codeline lineno="483"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>&apos;popsize&apos;:<sp/>Population<sp/>size</highlight></codeline>
<codeline lineno="484"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>&apos;sigma&apos;:<sp/>Step<sp/>size</highlight></codeline>
<codeline lineno="485"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>&apos;mean&apos;:<sp/>Initial<sp/>mean<sp/>position</highlight></codeline>
<codeline lineno="486"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>&apos;solver&apos;:<sp/>Name<sp/>of<sp/>the<sp/>solver<sp/>to<sp/>use,<sp/>e.g.,<sp/>&apos;CMA&apos;,<sp/>&apos;CMA_CPP&apos;,<sp/>etc.</highlight></codeline>
<codeline lineno="487"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rg:<sp/>Random<sp/>number<sp/>generator<sp/>for<sp/>initializing<sp/>values<sp/>within<sp/>the<sp/>specified<sp/>bounds</highlight></codeline>
<codeline lineno="488"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>or<sp/>for<sp/>stochastic<sp/>components<sp/>of<sp/>the<sp/>solver.</highlight></codeline>
<codeline lineno="489"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>x0:<sp/>Optional<sp/>starting<sp/>position<sp/>for<sp/>the<sp/>optimization.<sp/>Overrides<sp/>the<sp/>`mean`<sp/>parameter</highlight></codeline>
<codeline lineno="490"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>provided.</highlight></codeline>
<codeline lineno="491"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="492"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Returns:</highlight></codeline>
<codeline lineno="493"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>initialized<sp/>optimization<sp/>solver<sp/>object<sp/>if<sp/>the<sp/>specified<sp/>solver<sp/>name<sp/>is<sp/>valid.</highlight></codeline>
<codeline lineno="494"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns<sp/>`None`<sp/>if<sp/>an<sp/>invalid<sp/>solver<sp/>name<sp/>is<sp/>provided.</highlight></codeline>
<codeline lineno="495"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/>dim<sp/>=<sp/>len(bounds.lb)</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/>popsize<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;popsize&apos;</highlight><highlight class="normal">,<sp/>31)<sp/></highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#sigma<sp/>=<sp/>opt_params.get(&apos;sigma&apos;,rg.uniform(0.03,<sp/>0.3)**2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/>sigma<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;sigma&apos;</highlight><highlight class="normal">,rg.uniform(0.1,<sp/>0.5)**2)</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#sigma<sp/>=<sp/>opt_params.get(&apos;sigma&apos;,rg.uniform(0.2,<sp/>0.5)**2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="501" refid="namespacefcmaes_1_1diversifier_1a7360db2f799d60d42b8a3f76650f075a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#sigma<sp/>=<sp/>opt_params.get(&apos;sigma&apos;,rg.uniform(0.1,<sp/>0.5))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/>mean<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;mean&apos;</highlight><highlight class="normal">,<sp/>rg.uniform(bounds.lb,<sp/>bounds.ub))<sp/>\</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>x0<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>x0</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/>name<sp/>=<sp/>opt_params.get(</highlight><highlight class="stringliteral">&apos;solver&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;CMA_CPP&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>name<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;CMA&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classfcmaes_1_1cmaes_1_1_cmaes" kindref="compound">cmaes.Cmaes</ref>(bounds,<sp/>x0<sp/>=<sp/>mean,</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>popsize<sp/>=<sp/>popsize,<sp/>input_sigma<sp/>=<sp/>sigma,<sp/>rg<sp/>=<sp/>rg)</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>name<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;CMA_CPP&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classfcmaes_1_1cmaescpp_1_1_a_c_m_a___c" kindref="compound">cmaescpp.ACMA_C</ref>(dim,<sp/>bounds,<sp/>x0<sp/>=<sp/>mean,<sp/></highlight><highlight class="comment">#stop_hist<sp/>=<sp/>0,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>popsize<sp/>=<sp/>popsize,<sp/>input_sigma<sp/>=<sp/>sigma,<sp/>rg<sp/>=<sp/>rg)</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>name<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;CRMFNES&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>crfmnes.CRFMNES(dim,<sp/>bounds,<sp/>x0<sp/>=<sp/>mean,</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>popsize<sp/>=<sp/>popsize,<sp/>input_sigma<sp/>=<sp/>sigma,<sp/>rg<sp/>=<sp/>rg)</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>name<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;CRMFNES_CPP&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classfcmaes_1_1crfmnescpp_1_1_c_r_f_m_n_e_s___c" kindref="compound">crfmnescpp.CRFMNES_C</ref>(dim,<sp/>bounds,<sp/>x0<sp/>=<sp/>mean,</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>popsize<sp/>=<sp/>popsize,<sp/>input_sigma<sp/>=<sp/>sigma,<sp/>rg<sp/>=<sp/>rg)</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>name<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;DE&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classfcmaes_1_1de_1_1_d_e" kindref="compound">de.DE</ref>(dim,<sp/>bounds,<sp/>popsize<sp/>=<sp/>popsize,<sp/>rg<sp/>=<sp/>rg)</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>name<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;DE_CPP&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classfcmaes_1_1decpp_1_1_d_e___c" kindref="compound">decpp.DE_C</ref>(dim,<sp/>bounds,<sp/>popsize<sp/>=<sp/>popsize,<sp/>rg<sp/>=<sp/>rg)</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>name<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;PGPE&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classfcmaes_1_1pgpecpp_1_1_p_g_p_e___c" kindref="compound">pgpecpp.PGPE_C</ref>(dim,<sp/>bounds,<sp/>x0<sp/>=<sp/>mean,</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>popsize<sp/>=<sp/>popsize,<sp/>input_sigma<sp/>=<sp/>sigma,<sp/>rg<sp/>=<sp/>rg)</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">print</highlight><highlight class="normal"><sp/>(</highlight><highlight class="stringliteral">&quot;invalid<sp/>solver&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
    </programlisting>
    <location file="fcmaes/diversifier.py"/>
  </compounddef>
</doxygen>
